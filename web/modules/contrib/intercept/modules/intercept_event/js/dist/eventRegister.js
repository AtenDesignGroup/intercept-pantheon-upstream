wpJsonpIntercept([3],{0:function(e,t){e.exports=React},11:function(e,t){e.exports=interceptClient},1134:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(0),i=a.n(n),s=a(18),r=a.n(s),o=a(73),l=a(33),d=a.n(l),c=a(1135),u=Object(o.a)(c.a),p=document.getElementById("eventRegisterRoot"),m=p.getAttribute("data-uuid"),g=d.a.intercept.user;Object(s.render)(i.a.createElement(u,{eventId:m,user:g}),p)},1135:function(e,t,a){"use strict";var n=a(26),i=a.n(n),s=a(6),r=a.n(s),o=a(7),l=a.n(o),d=a(8),u=a.n(d),p=a(9),m=a.n(p),g=a(10),v=a.n(g),f=a(13),E=a.n(f),h=a(17),y=a.n(h),_=a(0),b=a.n(_),T=a(1),C=a.n(T),R=a(15),x=a(20),N=a.n(x),I=a(11),S=a.n(I),P=a(103),k=a(1136),A=a(1140),O=S.a.api,w=S.a.select,V=S.a.constants,c=function(e){function t(){var e,a;r()(this,t);for(var n=arguments.length,i=Array(n),s=0;s<n;s++)i[s]=arguments[s];return a=u()(this,(e=m()(t)).call.apply(e,[this].concat(i))),y()(E()(E()(a)),"onlyActiveOrWaitlist",function(){return a.props.registrations.filter(function(e){return("active"===e.data.attributes.status||"waitlist"===e.data.attributes.status)&&e.state.saved})}),y()(E()(E()(a)),"acceptingReservations",function(){var e=N()(E()(E()(a)),"props.event.data.attributes.registration.status");return"open"===e||"waitlist"===e}),a}return v()(t,e),l()(t,[{key:"componentDidMount",value:function e(){this.props.fetchSegments(),this.props.fetchEvent(this.props.eventId),this.props.fetchUser(this.props.user.uuid),this.props.fetchRegistrations(this.props.eventId)}},{key:"componentDidUpdate",value:function e(t){var a=t.registrations.some(function(e){return e.state.syncing});a&&!this.props.registrations.some(function(e){return e.state.syncing})&&this.props.fetchEvent(this.props.eventId)}},{key:"render",value:function e(){var t=this.props,a=t.registrations,n=t.registrationsLoading,s=t.eventId;if(n)return b.a.createElement(P.a,{loading:!0});var r=0>=this.onlyActiveOrWaitlist().length,o=null;r&&(o=this.acceptingReservations()?b.a.createElement(k.a,i()({},this.props,{eventId:s})):b.a.createElement("p",null,"Registrations are not being accepted at this time."));var l=0<a.length?b.a.createElement(A.a,{eventId:s}):null;return b.a.createElement("div",{className:"l--offset"},b.a.createElement("div",{className:"l--section"},o),b.a.createElement("div",{className:"l--section"},l))}}]),t}(b.a.Component);c.propTypes={registrations:C.a.array,event:C.a.object,user:C.a.object.isRequired,segments:C.a.arrayOf(C.a.object),eventId:C.a.string.isRequired,fetchEvent:C.a.func.isRequired,fetchUser:C.a.func.isRequired,fetchRegistrations:C.a.func.isRequired,fetchSegments:C.a.func.isRequired,registrationsLoading:C.a.bool.isRequired,eventsLoading:C.a.bool.isRequired,segmentsLoading:C.a.bool.isRequired},c.defaultProps={event:null,registrations:[],segments:[]};var W=function e(t,a){return{registrations:w.eventRegistrationsByEventByUser(a.eventId,a.user.uuid)(t),registrationsLoading:w.recordsAreLoading(V.TYPE_EVENT_REGISTRATION)(t),event:w.record(w.getIdentifier(V.TYPE_EVENT,a.eventId))(t),users:w.record(w.getIdentifier(V.TYPE_USER,a.user.uuid))(t),eventsLoading:w.recordIsLoading(V.TYPE_EVENT,a.eventId)(t),segments:w.recordOptions(V.TYPE_POPULATION_SEGMENT)(t),segmentsLoading:w.recordsAreLoading(V.TYPE_POPULATION_SEGMENT)(t)}},Y=function e(t,a){return{fetchEvent:function e(a){t(O[V.TYPE_EVENT].fetchResource(a,{fields:y()({},V.TYPE_EVENT,["field_capacity_max","field_waitlist_max","field_event_register_period","field_event_user_reg_max","field_has_waitlist","field_must_register","registration"])}))},fetchUser:function e(a){t(O[V.TYPE_USER].fetchResource(a))},fetchSegments:function e(){var a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{fields:y()({},V.TYPE_POPULATION_SEGMENT,["name","weight"])};t(O[V.TYPE_POPULATION_SEGMENT].fetchAll(a))},fetchRegistrations:function e(n){t(O[V.TYPE_EVENT_REGISTRATION].fetchAll({filters:{event:{value:n,path:"field_event.id"},user:{value:a.user.uuid,path:"field_user.id"}}}))}}};t.a=Object(R.b)(W,Y)(c)},1136:function(e,t,a){"use strict";function n(e){return N.a.createElement("div",{className:"form"},N.a.createElement("h2",{className:"form__heading"},"Number of Attendees?"),e.children)}var i=a(19),s=a.n(i),r=a(50),o=a.n(r),l=a(64),d=a.n(l),u=a(6),p=a.n(u),m=a(7),g=a.n(m),v=a(8),f=a.n(v),E=a(9),h=a.n(E),y=a(10),_=a.n(y),b=a(13),T=a.n(b),C=a(17),R=a.n(C),x=a(0),N=a.n(x),I=a(1),S=a.n(I),P=a(15),k=a(334),A=a.n(k),O=a(20),w=a.n(O),V=a(104),W=a.n(V),Y=a(11),L=a.n(Y),j=a(33),M=a.n(j),U=a(1137),G=a(27),q=a.n(G),D=a(323),B=a(14),F=L.a.actions,z=L.a.constants,H=L.a.select,K=z;Object(G.addValidationRule)("isRequired",function(e,t){return""!==t}),Object(G.addValidationRule)("isPositive",function(e,t){return 0<=t}),Object(G.addValidationRule)("isPositiveTotal",function(e){return 0<=e});var c={active:{button:"Register",dialogHeading:"Are you sure you want to register?"},waitlist:{button:"Join Waitlist",dialogHeading:"Are you sure you want to join the waitlist?"}},X=function e(t){var a=A()(),n={id:a,type:K.TYPE_EVENT_REGISTRATION,attributes:{status:t.status},relationships:{field_event:{data:{type:K.TYPE_EVENT,id:t.event}},field_registrants:{data:W()(t.registrants,function(e,t){return{type:K.TYPE_POPULATION_SEGMENT,id:t,meta:{count:e}}})},field_user:{data:{type:K.TYPE_USER,id:t.user}}}};return n},J=function(e){function t(e){var a;return p()(this,t),a=f()(this,h()(t).call(this,e)),R()(T()(T()(a)),"onOpenDialog",function(){a.setState({openDialog:!0})}),R()(T()(T()(a)),"onCloseDialog",function(){a.setState({openDialog:!1})}),R()(T()(T()(a)),"saveEntitytoStore",function(e){var t=a.props.save,n=X(e);return a.setState({uuid:n.id}),t(n),n.id}),a.state={openDialog:!1,canSubmit:!1,values:{},validationErrors:{},uuid:null},a.form=N.a.createRef(),a.disableButton=a.disableButton.bind(T()(T()(a))),a.enableButton=a.enableButton.bind(T()(T()(a))),a.getCurrentValues=a.getCurrentValues.bind(T()(T()(a))),a.getValuesTotal=a.getValuesTotal.bind(T()(T()(a))),a.saveEntitytoStore=a.saveEntitytoStore.bind(T()(T()(a))),a.onInputChange=a.onInputChange.bind(T()(T()(a))),a.onValueChange=a.onValueChange.bind(T()(T()(a))),a.updateValue=a.updateValue.bind(T()(T()(a))),a.updateValues=a.updateValues.bind(T()(T()(a))),a.validateForm=a.validateForm.bind(T()(T()(a))),a}return _()(t,e),g()(t,[{key:"onInputChange",value:function e(t){var a=this;return function(e){a.updateValue(t,e.target.value)}}},{key:"onValueChange",value:function e(t){var a=this;return function(e){a.updateValue(t,e)}}},{key:"getCurrentValues",value:function e(){return this.form.current?this.form.current.getModel():this.props.values}},{key:"getValuesTotal",value:function e(){var t=this.getCurrentValues();return this.props.segments.reduce(function(e,a){return e+(t[a.key]||0)},0)}},{key:"getCapacity",value:function e(){return w()(this,"props.event.data.attributes.field_capacity_max")||0}},{key:"getRegistrationLimit",value:function e(){return w()(this,"props.event.data.attributes.field_event_user_reg_max")||0}},{key:"getRegistrationCount",value:function e(){return w()(this,"props.event.data.attributes.registration.total")}},{key:"getAvailableCapacity",value:function e(){return this.getCapacity()-this.getRegistrationCount()}},{key:"getWaitlistCapacity",value:function e(){return w()(this,"props.event.data.attributes.field_waitlist_max")||0}},{key:"getWaitlistRegistrationCount",value:function e(){return w()(this,"props.event.data.attributes.registration.total_waitlist")}},{key:"getAvailableWaitlistCapacity",value:function e(){return this.getWaitlistCapacity()-this.getWaitlistRegistrationCount()}},{key:"getAvailableText",value:function e(){if(0===this.getCapacity())return"";var t=this.getAvailableCapacity();return 0===t?"This event is full.":1===t?"There is ".concat(t," seat available."):"There are ".concat(t," seats available.")}},{key:"getWaitlistAvailableText",value:function e(){if(0===this.getWaitlistCapacity())return"";var t=this.getAvailableWaitlistCapacity();return 0===t?"The waitlist is full.":1===t?"There is only ".concat(t," seat available on the waitlist."):"There are only ".concat(t," seats available on the waitlist.")}},{key:"getLimitText",value:function e(){var t=this.getRegistrationLimit();return 0<t?"Limit ".concat(t," registrations per user"):null}},{key:"getStatusText",value:function e(){var t=this.getValuesTotal();return 0>=t?"You must register at least 1 attendee":this.isOverTotalCapacity(t)?"This event has a total capacity of ".concat(this.getCapacity()):this.isOverCapacity(t)&&this.hasWaitlist()&&this.isOverWaitlistCapacity(t)?"".concat(this.getAvailableText()," ").concat(this.getWaitlistAvailableText()):this.isOverCapacity(t)&&this.hasWaitlist()?"".concat(this.getAvailableText()," Would you like to join the waitlist?"):this.getAvailableText()}},{key:"hasWaitlist",value:function e(){return w()(this,"props.event.data.attributes.field_has_waitlist")}},{key:"isDisabled",value:function e(t){return!this.state.canSubmit||0>=t||this.isOverUserLimit(t)||this.isOverTotalCapacity(t)||this.isOverCapacity(t)&&!this.hasWaitlist()||this.isOverCapacity(t)&&this.isOverWaitlistCapacity(t)}},{key:"isOverCapacity",value:function e(t){return 0!==this.getCapacity()&&0>this.getAvailableCapacity()-t}},{key:"isOverTotalCapacity",value:function e(t){var a=this.getCapacity();return 0!==a&&0<a&&0>a-t}},{key:"isOverWaitlistCapacity",value:function e(t){return 0!==this.getWaitlistCapacity()&&0>this.getAvailableWaitlistCapacity()-t}},{key:"isOverUserLimit",value:function e(t){return 0!==this.getRegistrationLimit()&&0>this.getRegistrationLimit()-t}},{key:"disableButton",value:function e(){this.setState({canSubmit:!1})}},{key:"enableButton",value:function e(){this.setState({canSubmit:!0})}},{key:"updateValue",value:function e(t,a){var n=s()({},this.props.values,R()({},t,a));this.setState({values:n})}},{key:"updateValues",value:function e(t){var a=s()({},this.props.values,t);this.setState({values:a})}},{key:"validateForm",value:function e(t){0>=this.getValuesTotal(t)?this.setState({validationErrors:R()({},this.props.segments[0].key,"You must register at least one person")}):this.setState({validationErrors:{}})}},{key:"render",value:function e(){var t=this,a=this.props,i=a.values,s=a.segments,r=a.user,o=a.eventId,l=a.status,d=this.state.uuid,u=this.getValuesTotal(),p=l,m=null,g=this.getLimitText(),v=this.getStatusText();return("active"===l&&this.hasWaitlist()&&this.isOverCapacity(u)&&!this.isOverTotalCapacity(u)&&!this.isOverWaitlistCapacity(u)&&(p="waitlist"),0>=s.length)?N.a.createElement(n,null,N.a.createElement("p",null,"Loading segments")):(M.a.intercept.user.telephone&&M.a.intercept.user.email&&(m=N.a.createElement("div",{className:"l--section"},N.a.createElement("h4",{className:"section-title section-title--secondary"},"Your Current Contact Information"),N.a.createElement("small",null,"Telephone: ",M.a.intercept.user.telephone,N.a.createElement("br",null),"Email: ",M.a.intercept.user.email,N.a.createElement("br",null),N.a.createElement("em",null,"Need to update your info? After finishing your registration visit My Account > Settings")))),N.a.createElement("div",{className:"l--section"},N.a.createElement("div",{className:"l--subsection"},N.a.createElement(n,null,N.a.createElement(q.a,{className:"form__main",ref:this.form,onChange:this.validateForm,onValidSubmit:this.onOpenDialog,onValid:this.enableButton,onInvalid:this.disableButton,validationErrors:this.state.validationErrors},g&&N.a.createElement("p",{className:"action-button__message action-button__message--left"},g),v&&N.a.createElement("p",{className:"action-button__message action-button__message--left"},v),N.a.createElement("div",{className:"l--subsection input-group--find-room"},s.map(function(e){return N.a.createElement(U.a,{label:e.value,value:i[e.key]||0,onChange:t.onValueChange(e.key),key:e.key,name:e.key,min:0,int:!0,required:i.meeting,validations:"isPositive",validationError:"Attendees must be a positive number"})}),N.a.createElement("p",null,"Total ",u)),N.a.createElement("div",{className:"form__actions"},N.a.createElement(B.b,{variant:"raised",size:"small",color:"primary",type:"submit",className:"button button--primary",disabled:this.isDisabled(u)},c[p].button))),N.a.createElement(D.a,{open:this.state.openDialog,onCancel:this.onCloseDialog,uuid:d,eventId:o,heading:c[p].dialogHeading,total:u,status:p,onConfirm:function e(){return t.saveEntitytoStore({user:r.uuid,event:o,status:p,registrants:t.getCurrentValues()})}}))),N.a.createElement("div",{className:"l--subsection"},m)))}}]),t}(N.a.Component);J.propTypes={segments:S.a.array,values:S.a.shape({}),user:S.a.object,eventId:S.a.string.isRequired,save:S.a.func.isRequired,status:S.a.string},J.defaultProps={segments:[],values:{},user:{},status:"active"};var $=function e(t,a){var n=H.record(H.getIdentifier(K.TYPE_EVENT,a.eventId))(t),i=w()(n,"data.attributes.registration.status"),s="waitlist"===i?"waitlist":"active";return{status:s}},Z=function e(t){return{save:function e(a){t(F.add(a,K.TYPE_EVENT_REGISTRATION,a.id))}}};t.a=Object(P.b)($,Z)(J)},1137:function(e,t,a){"use strict";var n=a(19),i=a.n(n),s=a(51),r=a.n(s),o=a(6),l=a.n(o),d=a(7),c=a.n(d),u=a(8),p=a.n(u),m=a(9),g=a.n(m),v=a(10),f=a.n(v),E=a(0),h=a.n(E),y=a(1),_=a.n(y),b=a(27),T=a.n(b),C=a(1138),R=a.n(C),x=a(1139),N=a.n(x),I=a(12),S=a(14),P=function e(t){return{container:{display:"flex",flexWrap:"nowrap",flexDirection:"row",alignItems:"stretch"},inputWrapper:{borderBottom:"1px solid ".concat(t.palette.grey[300]),borderTop:"1px solid ".concat(t.palette.grey[300]),fontSize:"inherit",margin:0,textAlign:"center",display:"flex",alignItems:"center"},input:{appearance:"none",margin:0,textAlign:"center",fontSize:"inherit",width:"2em",padding:".25em 0 .25em .5em"},button:{fontSize:"1em",minWidth:0,padding:".4em"},buttonFirst:{borderRadius:".3em 0 0 .3em"},buttonLast:{borderRadius:"0 .3em .3em 0",marginRight:"1em"},icon:{fontSize:"1em !important",height:"1em !important",width:"1em !important"},label:{marginBottom:"auto",marginTop:"auto",fontWeight:"700",fontSize:"".concat(14/18,"em"),fontFamily:"inherit"}}},k=function(e){function t(){return l()(this,t),p()(this,g()(t).apply(this,arguments))}return f()(t,e),c()(t,[{key:"render",value:function e(){var t=this,a=this.props,n=a.classes,i=a.step,s=a.label,r=a.onChange,o=a.min,l=a.max,d=a.int,c=a.required,u=a.name,p=this.props.getValue(),m="input-increment--".concat(u),g=function e(a){t.props.setValue(a),r(a)},v=function e(t){var a=d?parseInt:parseFloat,n=t.target.value?a(t.target.value):null;g(n)},f=function e(){return g(p-1)},E=function e(){return g(p+1)};return h.a.createElement("div",{className:"input input--incrementer"},h.a.createElement(S.l,{className:n.container,"aria-live":"polite"},h.a.createElement(S.b,{className:[n.button,n.buttonFirst].join(" "),"aria-label":"Decrement","aria-controls":m,variant:"contained",disabled:"number"==typeof o&&p<=o,onClick:f},h.a.createElement(R.a,{className:n.icon})),h.a.createElement(S.r,{disableUnderline:!0,className:n.inputWrapper,type:"number",value:p,onChange:v,step:i,id:m,inputProps:{className:n.input,step:i,min:o,max:l}}),h.a.createElement(S.b,{className:[n.button,n.buttonLast].join(" "),"aria-label":"Increment","aria-controls":m,variant:"contained",disabled:"number"==typeof l&&p>=l,onClick:E},h.a.createElement(N.a,{className:n.icon})),h.a.createElement(S.p,{htmlFor:m,className:n.label},s)))}}]),t}(h.a.PureComponent);k.propTypes=i()({},b.propTypes,{onChange:_.a.func.isRequired,value:_.a.number,label:_.a.string,step:_.a.number,int:_.a.bool}),k.defaultProps=i()({},b.defaultProps,{value:0,label:"Number",step:1}),t.a=Object(b.withFormsy)(Object(I.l)(P)(k))},1138:function(e,t,a){"use strict";var n=a(39);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(0)),s=n(a(69)),r=(0,s.default)(i.default.createElement("path",{d:"M19 13H5v-2h14v2z"}),"Remove");t.default=r},1139:function(e,t,a){"use strict";var n=a(39);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(0)),s=n(a(69)),r=(0,s.default)(i.default.createElement("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"Add");t.default=r},1140:function(e,t,a){"use strict";function n(e){var t=e.classes,a=e.registrations,n=e.width,i=x(a);return Object(u.c)("md",n)?s.a.createElement(y.E,{className:t.table},s.a.createElement(y.H,null,s.a.createElement(y.I,null,s.a.createElement(y.G,null,"Registration"),s.a.createElement(y.G,null,"Status"),s.a.createElement(y.G,{numeric:!0}))),s.a.createElement(y.F,null,i.map(function(e){return s.a.createElement(y.I,{key:e.id,className:"canceled"===e.status?t.canceled:""},s.a.createElement(y.G,null,s.a.createElement(f.a,{id:e.id})),s.a.createElement(y.G,null,e.status),s.a.createElement(y.G,{numeric:!0,className:t.lastColumn},s.a.createElement(h.a,{registrationId:e.id})))}))):s.a.createElement("div",{className:"l--subsection"},s.a.createElement("h4",null,"Existing Registrations"),i.map(function(e){return s.a.createElement("div",{key:e.id,className:"metadata metadata--".concat(e.status)},s.a.createElement("div",{className:"metadata__item metadata__item--block"},s.a.createElement("h4",{className:"metadate__title"},"Attendees:"),s.a.createElement("div",{className:"metadata__content"},s.a.createElement(f.a,{id:e.id}))),s.a.createElement("div",{className:"metadata__item metadata__item--inline"},s.a.createElement("h4",{className:"metadate__title"},"Status:"),s.a.createElement("div",{className:"metadata__content"},e.status)),s.a.createElement("div",{className:"metadata__footer"},s.a.createElement(h.a,{registrationId:e.id})))}))}var i=a(0),s=a.n(i),r=a(1),o=a.n(r),l=a(15),d=a(12),u=a(187),p=a(20),m=a.n(p),g=a(11),v=a.n(g),f=a(1141),E=a(200),h=a(379),y=a(14),_=v.a.constants,b=v.a.select,T=v.a.utils,C=_,c=T.getUserUuid(),R=function e(t){return{root:{width:"100%",marginTop:t.spacing(3),overflowX:"auto"},table:{minWidth:700},lastColumn:{paddingRight:0,"&:last-child":{paddingRight:0}},canceled:{opacity:".6"}}},x=function e(t){return t.map(function(e){return{id:m()(e,"data.id"),status:m()(e,"data.attributes.status")}})};n.propTypes={eventId:o.a.string.isRequired,registrations:o.a.array,classes:o.a.object.isRequired},n.defaultProps={registrations:[]};var N=function e(t,a){return{registrations:b.eventRegistrationsByEventByUser(a.eventId,a.userId||c)(t),registrationsLoading:b.recordsAreLoading(C.TYPE_EVENT_REGISTRATION)(t)}};t.a=Object(y.N)()(Object(d.l)(R)(Object(l.b)(N)(n)))},1141:function(e,t,a){"use strict";function n(e){var t=e.registration;return t?s.a.createElement(g.a,{key:u()(t,"data.id"),id:u()(t,"data.id"),valuePath:"data.relationships.field_registrants.data",type:E.TYPE_EVENT_REGISTRATION}):null}var i=a(0),s=a.n(i),r=a(1),o=a.n(r),l=a(15),d=a(20),u=a.n(d),p=a(11),m=a.n(p),g=a(388),v=m.a.select,f=m.a.constants,E=f;n.propTypes={registration:o.a.object},n.defaultProps={registration:null};var c=function e(t,a){var n=v.getIdentifier(E.TYPE_EVENT_REGISTRATION,a.id);return{registration:v.record(n)(t)}};t.a=Object(l.b)(c)(n)},129:function(e,t,a){var n=a(63),i=a(23)("toStringTag"),s="Arguments"==n(function(){return arguments}()),r=function(e,t){try{return e[t]}catch(t){}};e.exports=function(e){var t,a,o;return e===void 0?"Undefined":null===e?"Null":"string"==typeof(a=r(t=Object(e),i))?a:s?n(t):"Object"==(o=n(t))&&"function"==typeof t.callee?"Arguments":o}},130:function(e,t,a){var n,i,s,r=a(82),o=a(236),l=a(303),d=a(202),c=a(29),u=c.process,p=c.setImmediate,m=c.clearImmediate,g=c.MessageChannel,v=c.Dispatch,f=0,E={},h="onreadystatechange",y=function(){var e=+this;if(E.hasOwnProperty(e)){var t=E[e];delete E[e],t()}},_=function(e){y.call(e.data)};p&&m||(p=function e(t){for(var a=[],s=1;arguments.length>s;)a.push(arguments[s++]);return E[++f]=function(){o("function"==typeof t?t:Function(t),a)},n(f),f},m=function e(t){delete E[t]},"process"==a(63)(u)?n=function(e){u.nextTick(r(y,e,1))}:v&&v.now?n=function(e){v.now(r(y,e,1))}:g?(i=new g,s=i.port2,i.port1.onmessage=_,n=r(s.postMessage,s,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts?(n=function(e){c.postMessage(e+"","*")},c.addEventListener("message",_,!1)):h in d("script")?n=function(e){l.appendChild(d("script"))[h]=function(){l.removeChild(this),y.call(e)}}:n=function(e){setTimeout(r(y,e,1),0)}),e.exports={set:p,clear:m}},131:function(e,t,a){"use strict";function n(e){var t,a;this.promise=new e(function(e,n){if(t!==void 0||a!==void 0)throw TypeError("Bad Promise constructor");t=e,a=n}),this.resolve=i(t),this.reject=i(a)}var i=a(98);e.exports.f=function(e){return new n(e)}},18:function(e,t){e.exports=ReactDOM},191:function(e,t,a){"use strict";var n,i,s,r,o=a(204),l=a(29),d=a(82),c=a(129),u=a(72),p=a(70),m=a(98),g=a(230),v=a(231),f=a(235),E=a(130).set,h=a(237)(),y=a(131),_=a(238),b=a(239),T=a(240),C="Promise",R=l.TypeError,x=l.process,N=x&&x.versions,I=N&&N.v8||"",S=l[C],P="process"==c(x),k=function(){},A=i=y.f,O=!!function(){try{var e=S.resolve(1),t=(e.constructor={})[a(23)("species")]=function(e){e(k,k)};return(P||"function"==typeof PromiseRejectionEvent)&&e.then(k)instanceof t&&0!==I.indexOf("6.6")&&-1===b.indexOf("Chrome/66")}catch(t){}}(),w=function(e){var t;return!!(p(e)&&"function"==typeof(t=e.then))&&t},V=function(e,t){if(!e._n){e._n=!0;var a=e._c;h(function(){for(var n=e._v,s=1==e._s,r=0,i=function(t){var a,i,r,o=s?t.ok:t.fail,l=t.resolve,d=t.reject,c=t.domain;try{o?(!s&&(2==e._h&&L(e),e._h=1),!0===o?a=n:(c&&c.enter(),a=o(n),c&&(c.exit(),r=!0)),a===t.promise?d(R("Promise-chain cycle")):(i=w(a))?i.call(a,l,d):l(a)):d(n)}catch(t){c&&!r&&c.exit(),d(t)}};a.length>r;)i(a[r++]);e._c=[],e._n=!1,t&&!e._h&&W(e)})}},W=function(e){E.call(l,function(){var t,a,n,i=e._v,s=Y(e);if(s&&(t=_(function(){P?x.emit("unhandledRejection",i,e):(a=l.onunhandledrejection)?a({promise:e,reason:i}):(n=l.console)&&n.error&&n.error("Unhandled promise rejection",i)}),e._h=P||Y(e)?2:1),e._a=void 0,s&&t.e)throw t.v})},Y=function(e){return 1!==e._h&&0===(e._a||e._c).length},L=function(e){E.call(l,function(){var t;P?x.emit("rejectionHandled",e):(t=l.onrejectionhandled)&&t({promise:e,reason:e._v})})},j=function(e){var t=this;t._d||(t._d=!0,t=t._w||t,t._v=e,t._s=2,!t._a&&(t._a=t._c.slice()),V(t,!0))},M=function(e){var t,a=this;if(!a._d){a._d=!0,a=a._w||a;try{if(a===e)throw R("Promise can't be resolved itself");(t=w(e))?h(function(){var n={_w:a,_d:!1};try{t.call(e,d(M,n,1),d(j,n,1))}catch(t){j.call(n,t)}}):(a._v=e,a._s=1,V(a,!1))}catch(t){j.call({_w:a,_d:!1},t)}}};O||(S=function e(t){g(this,S,C,"_h"),m(t),n.call(this);try{t(d(M,this,1),d(j,this,1))}catch(e){j.call(this,e)}},n=function e(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},n.prototype=a(241)(S.prototype,{then:function e(t,a){var n=A(f(this,S));return n.ok="function"!=typeof t||t,n.fail="function"==typeof a&&a,n.domain=P?x.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&V(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),s=function(){var e=new n;this.promise=e,this.resolve=d(M,e,1),this.reject=d(j,e,1)},y.f=A=function(e){return e===S||e===r?new s(e):i(e)}),u(u.G+u.W+u.F*!O,{Promise:S}),a(206)(S,C),a(242)(C),r=a(71)[C],u(u.S+u.F*!O,C,{reject:function e(t){var a=A(this),n=a.reject;return n(t),a.promise}}),u(u.S+u.F*(o||!O),C,{resolve:function e(t){return T(o&&this===r?S:this,t)}}),u(u.S+u.F*!(O&&a(243)(function(e){S.all(e)["catch"](k)})),C,{all:function e(t){var a=this,n=A(a),i=n.resolve,s=n.reject,r=_(function(){var e=[],n=0,r=1;v(t,!1,function(t){var o=n++,l=!1;e.push(void 0),r++,a.resolve(t).then(function(t){l||(l=!0,e[o]=t,--r||i(e))},s)}),--r||i(e)});return r.e&&s(r.v),n.promise},race:function e(t){var a=this,n=A(a),i=n.reject,s=_(function(){v(t,!1,function(e){a.resolve(e).then(n.resolve,i)})});return s.e&&i(s.v),n.promise}})},230:function(e,t){e.exports=function(e,t,a,n){if(!(e instanceof t)||n!==void 0&&n in e)throw TypeError(a+": incorrect invocation!");return e}},231:function(e,t,a){var n=a(82),i=a(232),s=a(233),r=a(40),o=a(140),l=a(234),d={},c={},t=e.exports=function(e,t,a,u,p){var m,g,v,E,h=p?function(){return e}:l(e),y=n(a,u,t?2:1),f=0;if("function"!=typeof h)throw TypeError(e+" is not iterable!");if(s(h)){for(m=o(e.length);m>f;f++)if(E=t?y(r(g=e[f])[0],g[1]):y(e[f]),E===d||E===c)return E;}else for(v=h.call(e);!(g=v.next()).done;)if(E=i(v,y,g.value,t),E===d||E===c)return E};t.BREAK=d,t.RETURN=c},232:function(e,t,a){var n=a(40);e.exports=function(t,e,a,i){try{return i?e(n(a)[0],a[1]):e(a)}catch(a){var s=t["return"];throw void 0!==s&&n(s.call(t)),a}}},233:function(e,t,a){var n=a(106),i=a(23)("iterator"),s=Array.prototype;e.exports=function(e){return e!==void 0&&(n.Array===e||s[i]===e)}},234:function(e,t,a){var n=a(129),i=a(23)("iterator"),s=a(106);e.exports=a(71).getIteratorMethod=function(e){if(e!=void 0)return e[i]||e["@@iterator"]||s[n(e)]}},235:function(e,t,a){var n=a(40),i=a(98),s=a(23)("species");e.exports=function(e,t){var a,r=n(e).constructor;return r===void 0||(a=n(r)[s])==void 0?t:i(a)}},236:function(e,t){e.exports=function(e,t,a){var n=a===void 0;switch(t.length){case 0:return n?e():e.call(a);case 1:return n?e(t[0]):e.call(a,t[0]);case 2:return n?e(t[0],t[1]):e.call(a,t[0],t[1]);case 3:return n?e(t[0],t[1],t[2]):e.call(a,t[0],t[1],t[2]);case 4:return n?e(t[0],t[1],t[2],t[3]):e.call(a,t[0],t[1],t[2],t[3]);}return e.apply(a,t)}},237:function(e,t,a){var n=a(29),i=a(130).set,s=n.MutationObserver||n.WebKitMutationObserver,r=n.process,o=n.Promise,l="process"==a(63)(r);e.exports=function(){var t,a,d,e=function(){var e,n;for(l&&(e=r.domain)&&e.exit();t;){n=t.fn,t=t.next;try{n()}catch(n){throw t?d():a=void 0,n}}a=void 0,e&&e.enter()};if(l)d=function(){r.nextTick(e)};else if(s&&!(n.navigator&&n.navigator.standalone)){var c=!0,u=document.createTextNode("");new s(e).observe(u,{characterData:!0}),d=function(){u.data=c=!c}}else if(o&&o.resolve){var p=o.resolve(void 0);d=function(){p.then(e)}}else d=function(){i.call(n,e)};return function(e){var n={fn:e,next:void 0};a&&(a.next=n),t||(t=n,d()),a=n}}},238:function(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(t){return{e:!0,v:t}}}},239:function(e,t,a){var n=a(29),i=n.navigator;e.exports=i&&i.userAgent||""},240:function(e,t,a){var n=a(40),i=a(70),s=a(131);e.exports=function(e,t){if(n(e),i(t)&&t.constructor===e)return t;var a=s.f(e),r=a.resolve;return r(t),a.promise}},241:function(e,t,a){var n=a(126);e.exports=function(e,t,a){for(var i in t)n(e,i,t[i],a);return e}},242:function(e,t,a){"use strict";var n=a(29),i=a(125),s=a(97),r=a(23)("species");e.exports=function(e){var t=n[e];s&&t&&!t[r]&&i.f(t,r,{configurable:!0,get:function(){return this}})}},243:function(e,t,a){var n=a(23)("iterator"),i=!1;try{var s=[7][n]();s["return"]=function(){i=!0},Array.from(s,function(){throw 2})}catch(t){}e.exports=function(e,t){if(!t&&!i)return!1;var a=!1;try{var s=[7],r=s[n]();r.next=function(){return{done:a=!0}},s[n]=function(){return r},e(s)}catch(t){}return a}},245:function(e,t,a){"use strict";var n=a(0),i=a.n(n),s=a(1),r=a.n(s),o=a(11),l=a.n(o),d=a(246),u=l.a.constants,c={default:"The status of the registration is unknown",dirty:{waitlist:"Submitting registration to the waitlist",active:"Submitting registration",canceled:"Cancelling registration"},syncing:{waitlist:"Submitting registration to the waitlist",active:"Submitting registration",canceled:"Cancelling registration"},saved:{waitlist:"This registration has been added to the waitlist",active:"This registration has been confirmed",canceled:"This registration has been canceled"},error:{waitlist:"An error occured while adding to the waitlist",active:"An error occured while submitting this registration",canceled:"An error occured while cancelling this registration"}},p=function e(t){return i.a.createElement(d.a,{type:u.TYPE_EVENT_REGISTRATION,id:t.uuid,messages:c,statusPath:"data.attributes.status"})};p.propTypes={uuid:r.a.string.isRequired},t.a=p},246:function(e,t,a){"use strict";var n=a(6),i=a.n(n),s=a(7),r=a.n(s),o=a(8),l=a.n(o),d=a(9),c=a.n(d),u=a(10),p=a.n(u),m=a(13),g=a.n(m),v=a(0),f=a.n(v),E=a(1),h=a.n(E),y=a(11),_=a.n(y),b=a(15),T=a(20),C=a.n(T),R=a(14),x=_.a.select,N=function(e){function t(e){var a;return i()(this,t),a=l()(this,c()(t).call(this,e)),a.getMessage=a.getMessage.bind(g()(g()(a))),a}return p()(t,e),r()(t,[{key:"getMessage",value:function e(t,a){var n=this.props.messages,i=n.default;return a?t.syncing?(i=n.syncing[a],i):t.error?(i=n.error[a],i):t.dirty?(i=n.dirty[a],i):t.saved?(i=n.saved[a],i):i:i}},{key:"render",value:function e(){var t=this.props,a=t.entity,n=t.statusPath,i=this.getMessage(a.state,C()(a,n));return f.a.createElement("div",{className:"entity-status"},f.a.createElement("p",{className:"entity-status__message"},i),a.state.syncing&&f.a.createElement(R.f,{size:50}))}}]),t}(f.a.PureComponent);N.propTypes={type:h.a.string.isRequired,id:h.a.string.isRequired,statusPath:h.a.string.isRequired,entity:h.a.instanceOf(Object).isRequired,messages:h.a.shape({default:h.a.string,syncing:h.a.object,error:h.a.object,saved:h.a.object}).isRequired};var I=function e(t,a){var n=x.getIdentifier(a.type,a.id),i=x.record(n)(t);return{entity:i}};t.a=Object(b.b)(I)(N)},323:function(e,t,a){"use strict";function n(e){return j()(e,"data.attributes.field_capacity_max")||0}function i(e){return j()(e,"data.attributes.registration.total")}function s(e){return j()(e,"data.attributes.registration.status")}function r(e){return n(e)-i(e)}function o(e){return j()(e,"data.attributes.field_waitlist_max")||0}function l(e){return j()(e,"data.attributes.registration.total_waitlist")}function d(e){return o(e)-l(e)}function u(e){return 0<=["open","waitlist"].indexOf(s(e))}function p(e,t){return 0!==n(t)&&0>r(t)-e}function m(e,t){var a=n(t);return 0!==a&&0<a&&0>a-e}function g(e,t){return 0!==o(t)&&0>d(t)-e}function v(e,t,a){if(!u(t))return!1;return"active"===a?!p(e,t)&&!m(e,t):"waitlist"===a?!g(e,t)&&!m(e,t):!m(e,t)}var f=a(26),E=a.n(f),h=a(191),y=a.n(h),_=a(6),b=a.n(_),T=a(7),C=a.n(T),R=a(8),x=a.n(R),N=a(9),I=a.n(N),S=a(10),P=a.n(S),k=a(13),A=a.n(k),O=a(0),w=a.n(O),V=a(1),W=a.n(V),Y=a(15),L=a(20),j=a.n(L),M=a(11),U=a.n(M),G=a(107),q=a(103),D=a(245),B=a(384),F=a(14),z=U.a.api,H=U.a.constants,K=U.a.session,X=U.a.select,J=H,c="idle",$="conflict",Z="saved",Q="error",ee="loading",te="validate",ae=function(e){function t(e){var a;return b()(this,t),a=x()(this,I()(t).call(this,e)),a.state={saved:!1,state:c,uuid:e.uuid||null},a.handleConfirm=a.handleConfirm.bind(A()(A()(a))),a}return P()(t,e),C()(t,[{key:"checkEventRegistrations",value:function e(t,a,n){var i=this,s=this.props.fetchEventRegistrations;return this.setState({state:te}),new Promise(function(e,o){try{s(t,function(t){var s=JSON.parse(t);v(a,s,n)?e(s):(o(),i.setState({state:$}))})}catch(e){o(e),i.setState({state:Q})}})}},{key:"handleConfirm",value:function e(){var t=this,a=this.props,n=a.onConfirm,i=a.save,s=a.eventId,r=a.total,o=a.status;if(this.props.uuid){var l=n();i(l),this.setState({saved:!0,uuid:l,state:ee})}else this.checkEventRegistrations(s,r,o).then(function(e){var a=n();i(a),t.setState({saved:!0,uuid:a,state:ee})}).catch(function(){t.setState({state:$})})}},{key:"render",value:function e(){var t=this.props,a=t.open,n=t.onCancel,i=t.heading,s=t.text,r=this.state,o=r.saved,l=r.uuid,d=r.state,c={confirmText:"Yes",cancelText:"No",heading:i,text:s,onConfirm:this.handleConfirm,onCancel:n},u=null;return o&&(l&&(u=w.a.createElement(D.a,{uuid:l})),c={confirmText:null,cancelText:"Close",heading:"",onConfirm:function e(){window.location.href="/user"},onCancel:n}),d===$&&(c={confirmText:null,cancelText:"Close",heading:"Registration Incomplete",onConfirm:function e(){},text:"We were unable to confirm your registration. Please try again.",onCancel:function e(){n(),document.location.reload(!0)}}),w.a.createElement(G.a,E()({},c,{open:a}),u)}}]),t}(w.a.PureComponent);ae.propTypes={eventId:W.a.string,onConfirm:W.a.func,onCancel:W.a.func,open:W.a.bool,save:W.a.func.isRequired,uuid:W.a.string,heading:W.a.string,status:W.a.string,text:W.a.string,total:W.a.number},ae.defaultProps={eventId:null,onConfirm:null,onCancel:null,open:!1,uuid:null,heading:"Are you sure you want to register?",status:null,text:null,total:0};var ne=function e(){return{}},ie=function e(t){return{save:function e(a){K.getToken().then(function(e){t(z[J.TYPE_EVENT_REGISTRATION].sync(a,{headers:{"X-CSRF-Token":e}}))}).catch(function(t){console.log("Unable to save registration",t)})}}};t.a=Object(Y.b)(ne,ie)(Object(B.a)(ae))},33:function(e,t){e.exports=drupalSettings},334:function(e,t,a){function n(e,t,a){var n=t&&a||0;"string"==typeof e&&(t="binary"===e?Array(16):null,e=null),e=e||{};var i=e.random||(e.rng||s)();if(i[6]=64|15&i[6],i[8]=128|63&i[8],t)for(var o=0;16>o;++o)t[n+o]=i[o];return t||r(i)}var s=a(587),r=a(588);e.exports=n},379:function(e,t,a){"use strict";function n(e){var t=[];switch(e){case"active":t=["cancel"];break;case"canceled":t=[];break;case"waitlist":t=["cancel"];break;default:}return t}var i=a(19),s=a.n(i),r=a(6),o=a.n(r),l=a(7),d=a.n(l),u=a(8),p=a.n(u),m=a(9),g=a.n(m),v=a(10),f=a.n(v),E=a(13),h=a.n(E),y=a(0),_=a.n(y),b=a(1),T=a.n(b),C=a(15),R=a(107),x=a(11),N=a.n(x),I=a(323),S=a(245),P=a(14),k=N.a.constants,A=N.a.api,O=N.a.select,w=k,c={default:{status:"",text:"",heading:""},cancel:{status:"canceled",heading:"Are you sure you want to cancel this registration?",text:null},deny:{status:"denied",heading:"Confirm deny",text:"Confirm deny"},approve:{status:"approved",heading:"Confirm approval",text:"Confirm approval"}},V=function(e){function t(e){var a;return o()(this,t),a=p()(this,g()(t).call(this,e)),a.state={open:!1,action:"default"},a.onCancel=a.onCancel.bind(h()(h()(a))),a.onClick=a.onClick.bind(h()(h()(a))),a.onClose=a.onClose.bind(h()(h()(a))),a.onConfirm=a.props.onConfirm.bind(h()(h()(a))),a}return f()(t,e),d()(t,[{key:"onClose",value:function e(){this.onCancel()}},{key:"onCancel",value:function e(){this.setState({open:!1})}},{key:"onClick",value:function e(t){var a=this;return function(){a.setState({open:!0,action:t})}}},{key:"render",value:function e(){var t=this,a=this.props,i=a.entity,s=a.registrationId,r=a.status,o=n(r);return _.a.createElement("div",null,0<o.length&&o.map(function(e){return _.a.createElement(P.b,{key:e,onClick:t.onClick(e),variant:"cancel"===e?"outlined":"contained",color:"primary"},e)}),_.a.createElement(I.a,{open:this.state.open,onClose:this.onClose,onConfirm:this.onConfirm(i,this.state.action),onCancel:this.onCancel,uuid:s,text:c[this.state.action].text,heading:c[this.state.action].heading}))}}]),t}(y.PureComponent);V.propTypes={registrationId:T.a.string.isRequired,entity:T.a.object,status:T.a.string,onConfirm:T.a.func},V.defaultProps={entity:null,onConfirm:null,status:null};var W=function e(t,a){return{entity:O.record({type:w.TYPE_EVENT_REGISTRATION,id:a.registrationId})(t),status:O.registrationStatus(a.registrationId)(t)}},Y=function e(t,a){var n=function e(n,i){return function(){var e=s()({},n.data);return e.attributes.status=c[i].status,t(N.a.actions.edit(e,w.TYPE_EVENT_REGISTRATION,a.registrationId)),a.registrationId}};return{onConfirm:n}};t.a=Object(C.b)(W,Y)(V)},384:function(e,t,a){"use strict";function n(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:200;return function(a){function n(e){var a;return d()(this,n),a=g()(this,f()(n).call(this,e)),T()(_()(_()(a)),"handleResponse",function(e){return a.mounted&&a.setState({registrations:o()({},a.state.registrations,{loading:!1,data:S()(JSON.parse(e),"data.attributes"),shouldUpdate:!1})}),e}),a.handleResponse=a.handleResponse.bind(_()(_()(a))),a.fetchEventRegistrations=N()(a.fetchEventRegistrations,t).bind(_()(_()(a))),a.state={registrations:{loading:!1,shouldUpdate:!1,data:null}},a}return h()(n,a),p()(n,[{key:"componentDidMount",value:function e(){this.mounted=!0}},{key:"componentWillUnmount",value:function e(){this.mounted=!1}},{key:"fetchEventRegistrations",value:function e(t){var a=this,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(e){return e};this.setState({registrations:o()({},this.state.registrations,{loading:!0,shouldUpdate:!1})});var i=A[w.TYPE_EVENT].getEndpoint({id:t,fields:T()({},w.TYPE_EVENT,["field_capacity_max","field_waitlist_max","field_event_register_period","field_event_user_reg_max","field_has_waitlist","field_must_register","registration"])});return fetch(i,{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"}}).then(function(e){return e.text()}).then(function(e){return n(a.handleResponse(e))}).catch(function(t){a.mounted&&(console.log(t),a.setState({registrations:o()({},a.state.registrations,{loading:!1,shouldUpdate:!1})}))})}},{key:"render",value:function t(){return R.a.createElement(e,s()({registrations:this.state.registrations,fetchEventRegistrations:this.fetchEventRegistrations},this.props))}}]),n}(R.a.Component)}var i=a(26),s=a.n(i),r=a(19),o=a.n(r),l=a(6),d=a.n(l),u=a(7),p=a.n(u),m=a(8),g=a.n(m),v=a(9),f=a.n(v),E=a(10),h=a.n(E),y=a(13),_=a.n(y),b=a(17),T=a.n(b),C=a(0),R=a.n(C),x=a(48),N=a.n(x),I=a(20),S=a.n(I),P=a(11),k=a.n(P),A=k.a.api,O=k.a.constants,w=O;t.a=n},388:function(e,t,a){"use strict";function n(e){var t=e.tally;return s.a.createElement("p",null,t.map(function(e){return"".concat(e.count||0," ").concat(e.label)}).join(", "))}var i=a(0),s=a.n(i),r=a(1),o=a.n(r),l=a(15),d=a(12),u=a(20),p=a.n(u),m=a(11),g=a.n(m),v=g.a.constants,f=g.a.select,E=v,c={card:{maxWidth:345},media:{height:0,paddingTop:"56.25%"}};n.propTypes={tally:o.a.array},n.defaultProps={tally:[]};var h=function e(t,a){var n=f.getIdentifier(a.type,a.id),i=f.record(n)(t),s=f.records(E.TYPE_POPULATION_SEGMENT)(t),r=p()(i,a.valuePath),o=r.filter(function(e){return 0<p()(e,"meta.count")}).map(function(e){return{label:p()(s[e.id],"data.attributes.name"),count:p()(e,"meta.count")}});return{tally:o}};t.a=Object(l.b)(h)(Object(d.l)(c)(n))},39:function(e,t){function a(e){return e&&e.__esModule?e:{default:e}}e.exports=a},587:function(e,t){var a="undefined"!=typeof crypto&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&msCrypto.getRandomValues.bind(msCrypto);if(a){var n=new Uint8Array(16);e.exports=function e(){return a(n),n}}else{var s=Array(16);e.exports=function e(){for(var t,a=0;16>a;a++)0==(3&a)&&(t=4294967296*Math.random()),s[a]=255&t>>>((3&a)<<3);return s}}},588:function(e,t){function a(e,t){var a=t||0,i=n;return i[e[a++]]+i[e[a++]]+i[e[a++]]+i[e[a++]]+"-"+i[e[a++]]+i[e[a++]]+"-"+i[e[a++]]+i[e[a++]]+"-"+i[e[a++]]+i[e[a++]]+"-"+i[e[a++]]+i[e[a++]]+i[e[a++]]+i[e[a++]]+i[e[a++]]+i[e[a++]]}for(var n=[],s=0;256>s;++s)n[s]=(s+256).toString(16).substr(1);e.exports=a},69:function(e,t,a){"use strict";function n(e,t){var a=r.default.memo(r.default.forwardRef(function(t,a){return r.default.createElement(o.default,(0,s.default)({ref:a},t),e)}));return!1,a.muiName=o.default.muiName,a}var i=a(39);Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var s=i(a(26)),r=i(a(0)),o=i(a(34))},74:function(e,t){e.exports=interceptTheme}},[1134]);