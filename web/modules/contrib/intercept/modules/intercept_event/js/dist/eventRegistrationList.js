wpJsonpIntercept([6],{0:function(a,b){a.exports=React},11:function(a,b){a.exports=interceptClient},1167:function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=c(0),e=c.n(d),f=c(19),g=c.n(f),h=c(76),i=c(1168),j=Object(h.a)(i.a);Object(f.render)(e.a.createElement(j,null),document.getElementById("eventRegistrationRoot"))},1168:function(a,b,c){"use strict";var d=c(1169),e=c(1170);b.a=Object(d.a)(e.a)},1169:function(a,b,c){"use strict";var d=c(306),e=c.n(d),f=c(11),g=c.n(f),h=c(268),i={view:{type:d.UrlQueryParamTypes.string},showSaves:{type:d.UrlQueryParamTypes.boolean},showRegistrations:{type:d.UrlQueryParamTypes.boolean}},j=function a(b){return Object(h.a)(Object(d.addUrlProps)({urlPropsQueryConfig:i})(b))};b.a=j},1170:function(a,b,d){"use strict";function e(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function f(a){for(var b,c=1;c<arguments.length;c++)b=null==arguments[c]?{}:arguments[c],c%2?e(Object(b),!0).forEach(function(c){G()(a,c,b[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(b)):e(Object(b)).forEach(function(c){Object.defineProperty(a,c,Object.getOwnPropertyDescriptor(b,c))});return a}function g(){var a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"upcoming",b=1<arguments.length?arguments[1]:void 0,c="past"===a?"<":">",d=N()(new Date).toISOString();return{date:{path:b,value:d,operator:c}}}var h=d(24),i=d.n(h),j=d(25),k=d.n(j),l=d(21),m=d.n(l),n=d(20),o=d.n(n),p=d(17),q=d.n(p),r=d(22),s=d.n(r),t=d(6),u=d.n(t),v=d(7),w=d.n(v),x=d(8),y=d.n(x),z=d(9),A=d.n(z),B=d(13),C=d.n(B),D=d(10),E=d.n(D),F=d(14),G=d.n(F),H=d(0),I=d.n(H),J=d(1),K=d.n(J),L=d(15),M=d(29),N=d.n(M),O=d(36),P=d.n(O),Q=d(54),R=d.n(Q),S=d(11),T=d.n(S),U=d(198),V=d(204),W=d(111),X=d(233),Y=d(434),Z=d(16),$=T.a.constants,_=T.a.api,aa=T.a.select,ba=$,c=P.a.intercept.parameters.user.uuid,ca=[{key:"past",value:"Past"},{key:"upcoming",value:"Upcoming"}],da=function(a){function b(a){var c;return u()(this,b),c=y()(this,A()(b).call(this,a)),G()(C()(c),"handleViewChange",function(a){c.props.onChangeView(a),c.doFetch(a)}),c.state={open:!1},c.handleViewChange=c.handleViewChange.bind(C()(c)),c.doFetch=R()(c.doFetch,300).bind(C()(c)),c.doFetchRegistrations=c.doFetchRegistrations.bind(C()(c)),c.doFetchSavedEvents=c.doFetchSavedEvents.bind(C()(c)),c}return E()(b,a),w()(b,[{key:"componentDidMount",value:function a(){this.props.fetchAudiences({fields:G()({},ba.TYPE_AUDIENCE,["name"])}),this.doFetch(this.props.view)}},{key:"doFetchRegistrations",value:function a(b){this.props.fetchRegistrations({filters:f({user:{path:"field_user.id",value:c}},g(b,"field_event.field_date_time.end_value")),include:["field_event","field_event.image_primary","field_event.image_primary.field_media_image","field_event.field_location"],headers:{"X-Consumer-ID":T.a.consumer}})}},{key:"doFetchSavedEvents",value:function a(b){this.props.fetchSavedEvents({filters:{user:{path:"uid.uid",value:c}},include:["flagged_entity","flagged_entity.image_primary","flagged_entity.image_primary.field_media_image","flagged_entity.field_location"],headers:{"X-Consumer-ID":T.a.consumer}})}},{key:"doFetch",value:function a(b){this.props.showSaves&&this.doFetchSavedEvents(b),this.props.showRegistrations&&this.doFetchRegistrations(b)}},{key:"doConfirmAction",value:function a(){this.setState({open:!0,text:"Confirm cancel"})}},{key:"render",value:function a(){var b=this.props,c=this.handleViewChange,d=b.events,e=b.view,f=b.isLoading,g=function a(b){return b.map(function(a){return{key:a.data.id,node:I.a.createElement(V.a,{id:a.data.id,className:"event-teaser"})}})},h=0<d.length?I.a.createElement(U.a,{heading:null,items:g(d)}):f?I.a.createElement(W.a,{loading:f}):I.a.createElement("p",null,"No events available.");return I.a.createElement("div",{className:"l--main"},I.a.createElement("div",{className:"l--subsection"},I.a.createElement(X.a,{options:ca,value:e,handleChange:c})),I.a.createElement("div",{className:"l--subsection"},h))}}]),b}(H.Component);da.propTypes={events:K.a.array,onChangeView:K.a.func.isRequired,fetchAudiences:K.a.func.isRequired,fetchRegistrations:K.a.func.isRequired,fetchSavedEvents:K.a.func.isRequired,view:K.a.string,showSaves:K.a.bool,showRegistrations:K.a.bool},da.defaultProps={events:[],view:"upcoming",showSaves:!0,showRegistrations:!0};var ea=function a(b,d){var e="past"===d.view?"usersPastEvents":"usersUpcomingEvents";return!1===d.showSaves&&(e="past"===d.view?"usersPastRegisteredEvents":"usersUpcomingRegisteredEvents"),!1===d.showRegistrations&&(e="past"===d.view?"usersPastSavedEvents":"usersUpcomingSavedEvents"),{events:aa[e](c)(b),registrations:aa.eventRegistrations(b),isLoading:aa.recordsAreLoading(ba.TYPE_EVENT_REGISTRATION)(b)||aa.recordsAreLoading(ba.TYPE_SAVED_EVENT)(b)}},fa=function a(b,c){return{fetchAudiences:function a(c){b(_[ba.TYPE_AUDIENCE].fetchAll(c))},fetchRegistrations:function a(c){b(_[ba.TYPE_EVENT_REGISTRATION].fetchAll(c))},fetchSavedEvents:function a(c){b(_[ba.TYPE_SAVED_EVENT].fetchAll(c))}}};b.a=Object(L.b)(ea,fa)(da)},19:function(a,b){a.exports=ReactDOM},204:function(a,b,d){"use strict";var e=d(187),f=d.n(e),g=d(6),h=d.n(g),i=d(7),j=d.n(i),k=d(8),l=d.n(k),m=d(9),n=d.n(m),o=d(10),p=d.n(o),q=d(0),r=d.n(q),s=d(1),t=d.n(s),u=d(15),v=d(29),w=d.n(v),x=d(23),y=d.n(x),z=d(11),A=d.n(z),B=d(157),C=d(205),D=d(206),E=d(207),F=A.a.select,G=A.a.constants,H=A.a.utils,I=G,c=H.getUserUuid(),J=function(a){function b(){return h()(this,b),l()(this,n()(b).apply(this,arguments))}return p()(b,a),j()(b,[{key:"render",value:function a(){var b=this.props,c=b.id,d=b.event,e=b.registrations,f=function a(b){return{id:b.id,name:y()(b,"attributes.name")}},g=w()(H.dateFromDrupal(d.attributes.field_date_time.value)),h=Array.isArray(d.relationships.field_event_audience)?d.relationships.field_event_audience.map(f).filter(function(a){return a.id}):[],i=0<h.length?r.a.createElement(B.a,{label:"Audience",key:"audience",values:h}):null,j=y()(d,"attributes.event_thumbnail");return r.a.createElement(C.a,{key:c,modifiers:[j?"with-image":"without-image"],image:j,supertitle:y()(d,"relationships.field_location.0.attributes.title"),title:d.attributes.title,titleUrl:d.attributes.path?d.attributes.path.alias:"/node/".concat(d.attributes.nid),date:{month:g.utcOffset(H.getUserUtcOffset()).format("MMM"),date:g.utcOffset(H.getUserUtcOffset()).format("D"),time:H.getTimeDisplay(g).replace(":00","")},description:y()(d,"attributes.field_text_teaser.value"),tags:[i],registrations:e,footer:function a(b){return r.a.createElement(r.a.Fragment,null,r.a.createElement(D.a,{eventId:b.event.id}),r.a.createElement(E.a,{eventId:b.event.id}))},event:d})}}]),b}(q.PureComponent);J.propTypes={id:t.a.string.isRequired,event:t.a.object.isRequired,registrations:t.a.array},J.defaultProps={registrations:[]};var K=function a(b,d){var e=F.getIdentifier(I.TYPE_EVENT,d.id),f=F.eventRegistrationsByEventByUser(d.id,c)(b);return{event:F.bundle(e)(b),registrations:f}};b.a=Object(u.b)(K)(J)},233:function(a,b,c){"use strict";var d=c(6),e=c.n(d),f=c(7),g=c.n(f),h=c(8),i=c.n(h),j=c(9),k=c.n(j),l=c(10),m=c.n(l),n=c(0),o=c.n(n),p=c(1),q=c.n(p),r=c(12),s=function a(b){return{checked:{fontWeight:"bold"},unChecked:{fontWeight:"bold",color:b.palette.secondary.main}}},t=function(a){function b(){return e()(this,b),i()(this,k()(b).apply(this,arguments))}return m()(b,a),g()(b,[{key:"render",value:function a(){var b=this.props,c=b.value,d=b.handleChange,e=b.options,f=function a(b){return"view-switcher__button ".concat(b&&"view-switcher__button--active")};return o.a.createElement("div",{className:"view-switcher"},e.map(function(a){return o.a.createElement("button",{key:a.key,className:f(c===a.key),disabled:c===a.key,onClick:function b(){return d(a.key)}},a.value)}))}}]),b}(o.a.PureComponent);t.propTypes={handleChange:q.a.func.isRequired,value:q.a.string,options:q.a.arrayOf(q.a.shape({key:q.a.string,value:q.a.string})).isRequired},t.defaultProps={value:"list"},b.a=Object(r.l)(s)(t)},268:function(a,b,c){"use strict";function d(a){return a.displayName||a.name||"Component"}function e(a){var b=function(b){function c(){return g()(this,c),k()(this,m()(c).apply(this,arguments))}return o()(c,b),i()(c,[{key:"componentDidMount",value:function a(){var b=this;u.a.history.listen(function(){b.forceUpdate()})}},{key:"render",value:function b(){return s.a.createElement(a,this.props)}}]),c}(r.Component);return b.displayName="UpdateWithHistory(".concat(d(a),")"),b}var f=c(6),g=c.n(f),h=c(7),i=c.n(h),j=c(8),k=c.n(j),l=c(9),m=c.n(l),n=c(10),o=c.n(n),p=c(57),q=c.n(p),r=c(0),s=c.n(r),t=c(11),u=c.n(t);b.a=e},29:function(a,b){a.exports=moment},36:function(a,b){a.exports=drupalSettings},434:function(a,b,c){"use strict";var d=c(6),e=c.n(d),f=c(7),g=c.n(f),h=c(8),i=c.n(h),j=c(9),k=c.n(j),l=c(13),m=c.n(l),n=c(10),o=c.n(n),p=c(14),q=c.n(p),r=c(0),s=c.n(r),t=c(1),u=c.n(t),v=c(112),w=c.n(v),x=c(29),y=c.n(x),z=c(11),A=c.n(z),B=c(204),C=c(198),D=A.a.utils,E=function(a){function b(){var a,c;e()(this,b);for(var d=arguments.length,f=Array(d),g=0;g<d;g++)f[g]=arguments[g];return c=i()(this,(a=k()(b)).call.apply(a,[this].concat(f))),q()(m()(c),"state",{}),c}return o()(b,a),g()(b,[{key:"render",value:function a(){var b=this.props,c=b.events,d=b.loading,e=function a(b){return b.map(function(a){return{key:a,node:s.a.createElement(B.a,{id:a,className:"event-teaser"})}})},f=0<c.length?w()(c,function(a){return s.a.createElement(C.a,{heading:D.getDayDisplay(y.a.tz(a.date,D.getUserTimezone())),items:e(a.items),key:a.key})}):!d&&s.a.createElement("p",{key:0},"No events have been loaded.");return s.a.createElement("div",{className:"events-list"},f)}}]),b}(s.a.Component);E.propTypes={events:u.a.arrayOf(Object).isRequired,loading:u.a.bool},E.defaultProps={loading:!1},b.a=E},77:function(a,b){a.exports=interceptTheme}},[1167]);