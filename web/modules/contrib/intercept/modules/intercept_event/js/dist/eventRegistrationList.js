!function(){"use strict";var e,t={4896:function(e){e.exports=interceptClient},27997:function(e){e.exports=Drupal},38123:function(e){e.exports=moment},40140:function(e){e.exports=interceptTheme},41594:function(e){e.exports=React},73032:function(e){e.exports=drupalSettings},75206:function(e){e.exports=ReactDOM},85203:function(e,t,n){var i=n(41594),r=n.n(i),s=n(75206),a=n(5667),o=n(93641),c=n(4896),l=n.n(c),d=n(42614);const u={view:{type:o.uo.string},showSaves:{type:o.uo.boolean},showRegistrations:{type:o.uo.boolean}};var h=e=>(0,d.A)((0,o.Bi)({urlPropsQueryConfig:u})(e)),p=n(5556),v=n.n(p),f=n(84196),g=n(38123),m=n.n(g),E=n(73032),_=n.n(E),y=n(38221),b=n.n(y),w=n(45320),R=n(58156),S=n.n(R),A=n(17944),k=n(14039),T=n(27997),C=n.n(T),O=n(96746);const{select:P}=l();function N(e){const{checkinStatus:t,checkinUrl:n}=e;return"open"===t?r().createElement(O.A,{href:n,className:"action-button__button",size:"small",variant:"contained",color:"primary"},C().t("Check in")):null}N.propTypes={eventId:v().string.isRequired,checkinStatus:v().string,checkinUrl:v().string},N.defaultProps={checkinStatus:"closed",checkinUrl:null};var U=(0,f.Ng)(((e,t)=>{const{eventId:n}=t;return{checkinStatus:P.eventCheckinStatus(n)(e),checkinUrl:P.eventCheckinUrl(n)(e)}}))(N),I=n(76702),F=n(7796);const{select:x,constants:D,utils:V}=l(),j=D,q=V.getUserUuid();class M extends i.PureComponent{render(){const{id:e,event:t,registrations:n}=this.props,i=m()(V.dateFromDrupal(t.attributes.field_date_time.value)),s=Array.isArray(t.relationships.field_event_audience)?t.relationships.field_event_audience.map((e=>({id:e.id,name:S()(e,"attributes.name")}))).filter((e=>e.id)):[],a=s.length>0?r().createElement(A.A,{label:"Audience",key:"audience",values:s}):null,o=S()(t,"attributes.event_thumbnail"),c=S()(_(),"intercept.events.recommended"),l=Array.isArray(c)&&c.includes(S()(t,"attributes.drupal_internal__nid").toString())?"Recommended For You":null,d=S()(t,"relationships.field_location.0.attributes.title"),u=String(S()(t,"relationships.field_room.attributes.title"));let h="";"undefined"!==u&&(h=": "+u);const p=d+h;return r().createElement(k.A,{key:e,modifiers:[o?"with-image":"without-image"],image:o,highlight:l,supertitle:p,title:t.attributes.title,titleUrl:t.attributes.path?t.attributes.path.alias:`/node/${t.attributes.nid}`,date:{month:i.utcOffset(V.getUserUtcOffset()).format("MMM"),date:i.utcOffset(V.getUserUtcOffset()).format("D"),time:V.getTimeDisplay(i).replace(":00","")},description:S()(t,"attributes.field_text_teaser.value"),tags:[a],registrations:n,footer:e=>r().createElement(r().Fragment,null,r().createElement(U,{eventId:e.event.id}),r().createElement(I.A,{eventId:e.event.id}),r().createElement(F.A,{eventId:e.event.id})),event:t})}}M.propTypes={id:v().string.isRequired,event:v().object.isRequired,registrations:v().array},M.defaultProps={registrations:[]};var Y=(0,f.Ng)(((e,t)=>{const n=x.getIdentifier(j.TYPE_EVENT,t.id),i=x.eventRegistrationsByEventByUser(t.id,q)(e);return{event:x.bundle(n)(e),registrations:i}}))(M),B=n(36062),L=n(32150);class G extends r().PureComponent{render(){const{value:e,handleChange:t,options:n}=this.props;return r().createElement("div",{className:"view-switcher"},n.map((n=>{return r().createElement("button",{key:n.key,className:(i=e===n.key,`view-switcher__button ${i&&"view-switcher__button--active"}`),disabled:e===n.key,onClick:()=>t(n.key)},n.value);var i})))}}G.propTypes={handleChange:v().func.isRequired,value:v().string,options:v().arrayOf(v().shape({key:v().string,value:v().string})).isRequired},G.defaultProps={value:"list"};var J=(0,L.A)((e=>({checked:{fontWeight:"bold"},unChecked:{fontWeight:"bold",color:e.palette.secondary.main}})))(G);const{constants:W,api:X,select:$}=l(),z=W,Q=_().intercept.parameters.user.uuid,H=[{key:"past",value:"Past"},{key:"upcoming",value:"Upcoming"}];function K(){const e="past"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"upcoming")?"<":">";return{date:{path:arguments.length>1?arguments[1]:void 0,value:m()(new Date).toISOString(),operator:e}}}class Z extends i.Component{constructor(e){super(e),this.state={open:!1},this.handleViewChange=this.handleViewChange.bind(this),this.doFetch=b()(this.doFetch,300).bind(this),this.doFetchRegistrations=this.doFetchRegistrations.bind(this),this.doFetchSavedEvents=this.doFetchSavedEvents.bind(this)}componentDidMount(){this.props.fetchAudiences({fields:{[z.TYPE_AUDIENCE]:["name"]}}),this.doFetch(this.props.view)}handleViewChange=e=>{this.props.onChangeView(e),this.doFetch(e)};doFetchRegistrations(e){this.props.fetchRegistrations({filters:{user:{path:"field_user.id",value:Q},...K(e,"field_event.field_date_time.end_value")},include:["field_event","field_event.image_primary","field_event.image_primary.field_media_image","field_event.field_location"],headers:{"X-Consumer-ID":l().consumer}})}doFetchSavedEvents(e){this.props.fetchSavedEvents({filters:{user:{path:"uid.uid",value:Q}},include:["flagged_entity","flagged_entity.image_primary","flagged_entity.image_primary.field_media_image","flagged_entity.field_location"],headers:{"X-Consumer-ID":l().consumer}})}doFetch(e){this.props.showSaves&&this.doFetchSavedEvents(e),this.props.showRegistrations&&this.doFetchRegistrations(e)}doConfirmAction(){this.setState({open:!0,text:"Confirm cancel"})}render(){const{props:e,handleViewChange:t}=this,{events:n,view:i,isLoading:s}=e,a=n.length>0?r().createElement(w.A,{heading:null,items:(o=n,o.map((e=>({key:e.data.id,node:r().createElement(Y,{id:e.data.id,className:"event-teaser"})}))))}):s?r().createElement(B.A,{loading:s}):r().createElement("p",null,"No events available.");var o;return r().createElement("div",{className:"l--main"},r().createElement("div",{className:"l--subsection"},r().createElement(J,{options:H,value:i,handleChange:t})),r().createElement("div",{className:"l--subsection"},a))}}Z.propTypes={events:v().array,onChangeView:v().func.isRequired,fetchAudiences:v().func.isRequired,fetchRegistrations:v().func.isRequired,fetchSavedEvents:v().func.isRequired,view:v().string,showSaves:v().bool,showRegistrations:v().bool},Z.defaultProps={events:[],view:"upcoming",showSaves:!0,showRegistrations:!0};var ee=h((0,f.Ng)(((e,t)=>{let n="past"===t.view?"usersPastEvents":"usersUpcomingEvents";return!1===t.showSaves&&(n="past"===t.view?"usersPastRegisteredEvents":"usersUpcomingRegisteredEvents"),!1===t.showRegistrations&&(n="past"===t.view?"usersPastSavedEvents":"usersUpcomingSavedEvents"),{events:$[n](Q)(e),registrations:$.eventRegistrations(e),isLoading:$.recordsAreLoading(z.TYPE_EVENT_REGISTRATION)(e)||$.recordsAreLoading(z.TYPE_SAVED_EVENT)(e)}}),((e,t)=>({fetchAudiences:t=>{e(X[z.TYPE_AUDIENCE].fetchAll(t))},fetchRegistrations:t=>{e(X[z.TYPE_EVENT_REGISTRATION].fetchAll(t))},fetchSavedEvents:t=>{e(X[z.TYPE_SAVED_EVENT].fetchAll(t))}})))(Z));const te=(0,a.A)(ee);(0,s.render)(r().createElement(te,null),document.getElementById("eventRegistrationRoot"))}},n={};function i(e){var r=n[e];if(void 0!==r)return r.exports;var s=n[e]={id:e,loaded:!1,exports:{}};return t[e](s,s.exports,i),s.loaded=!0,s.exports}i.m=t,e=[],i.O=function(t,n,r,s){if(!n){var a=1/0;for(d=0;d<e.length;d++){n=e[d][0],r=e[d][1],s=e[d][2];for(var o=!0,c=0;c<n.length;c++)(!1&s||a>=s)&&Object.keys(i.O).every((function(e){return i.O[e](n[c])}))?n.splice(c--,1):(o=!1,s<a&&(a=s));if(o){e.splice(d--,1);var l=r();void 0!==l&&(t=l)}}return t}s=s||0;for(var d=e.length;d>0&&e[d-1][2]>s;d--)e[d]=e[d-1];e[d]=[n,r,s]},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,{a:t}),t},i.d=function(e,t){for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},i.j=47,function(){var e={47:0};i.O.j=function(t){return 0===e[t]};var t=function(t,n){var r,s,a=n[0],o=n[1],c=n[2],l=0;if(a.some((function(t){return 0!==e[t]}))){for(r in o)i.o(o,r)&&(i.m[r]=o[r]);if(c)var d=c(i)}for(t&&t(n);l<a.length;l++)s=a[l],i.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return i.O(d)},n=self.wpJsonpIntercept=self.wpJsonpIntercept||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var r=i.O(void 0,[436],(function(){return i(85203)}));r=i.O(r)}();