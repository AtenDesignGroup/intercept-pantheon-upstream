!function(e){function t(t){for(var r,o,s=t[0],u=t[1],c=t[2],f=0,d=[];f<s.length;f++)o=s[f],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&d.push(i[o][0]),i[o]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);for(l&&l(t);d.length;)d.shift()();return a.push.apply(a,c||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],r=!0,s=1;s<n.length;s++){var u=n[s];0!==i[u]&&(r=!1)}r&&(a.splice(t--,1),e=o(o.s=n[0]))}return e}var r={},i={9:0},a=[];function o(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var s=window.wpJsonpIntercept=window.wpJsonpIntercept||[],u=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var l=u;a.push([866,0]),n()}({0:function(e,t){e.exports=React},115:function(e,t){e.exports=interceptTheme},144:function(e,t,n){"use strict";var r=n(0),i=n.n(r),a=n(1),o=n.n(a),s=n(18),u=n(6),c=n.n(u),l=n(387),f=c.a.select,d=c.a.utils.getUserUuid();function p(e){var t=e.onClick,n=e.mustRegister,r=e.registerUrl,a=e.text,o=e.registrationAllowed;return n?i.a.createElement(l.a,{href:t?null:r,variant:"register"===a?"contained":"outlined",size:"small",color:"primary",className:"action-button__button",disabled:!o,onClick:t},"Cancel"===a&&r?"View Registration":a):null}p.propTypes={eventId:o.a.string.isRequired,userId:o.a.string,onClick:o.a.func,mustRegister:o.a.bool,registrationAllowed:o.a.bool,registerUrl:o.a.string,text:o.a.string},p.defaultProps={onClick:null,userId:d,mustRegister:!1,registrationAllowed:!1,registerUrl:null,text:""};t.a=Object(s.b)((function(e,t){var n=t.eventId,r=f.mustRegisterForEvent(n)(e),i=f.registerUrl(n)(e),a=t.userId||d;return{mustRegister:r,registerUrl:i,text:f.registrationButtonText(n,a)(e),registrationAllowed:f.registrationAllowed(n,a)(e)}}))(p)},145:function(e,t,n){"use strict";var r=n(0),i=n.n(r),a=n(1),o=n.n(a),s=n(18),u=n(6),c=n.n(u),l=c.a.select,f=c.a.utils.getUserUuid();function d(e){var t=e.text;return t?i.a.createElement("p",{className:"action-button__message"},t):null}d.propTypes={eventId:o.a.string.isRequired,userId:o.a.string,text:o.a.string},d.defaultProps={text:null,userId:f};t.a=Object(s.b)((function(e,t){var n=t.eventId,r=t.userId;return{text:l.registrationStatusText(n,r||f)(e)}}))(d)},16:function(e,t){e.exports=moment},216:function(e,t,n){var r=n(49),i=n(217),a=n(62),o=Math.ceil,s=function(e){return function(t,n,s){var u,c,l=String(a(t)),f=l.length,d=void 0===s?" ":String(s),p=r(n);return p<=f||""==d?l:(u=p-f,(c=i.call(d,o(u/d.length))).length>u&&(c=c.slice(0,u)),e?l+c:c+l)}};e.exports={start:s(!1),end:s(!0)}},217:function(e,t,n){"use strict";var r=n(104),i=n(62);e.exports="".repeat||function(e){var t=String(i(this)),n="",a=r(e);if(a<0||a==1/0)throw RangeError("Wrong number of repetitions");for(;a>0;(a>>>=1)&&(t+=t))1&a&&(n+=t);return n}},25:function(e,t){e.exports=ReactDOM},251:function(e,t,n){"use strict";var r=n(14),i=n(214).includes,a=n(120);r({target:"Array",proto:!0,forced:!n(73)("indexOf",{ACCESSORS:!0,1:0})},{includes:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),a("includes")},252:function(e,t,n){"use strict";var r=n(14),i=n(183),a=n(62);r({target:"String",proto:!0,forced:!n(184)("includes")},{includes:function(e){return!!~String(a(this)).indexOf(i(e),arguments.length>1?arguments[1]:void 0)}})},256:function(e,t,n){"use strict";n(33),n(251),n(32),n(19),n(21),n(91),n(20),n(252),n(141);var r=n(10),i=n.n(r),a=n(9),o=n.n(a),s=n(11),u=n.n(s),c=n(12),l=n.n(c),f=n(5),d=n.n(f),p=n(0),v=n.n(p),g=n(1),h=n.n(g),m=n(18),y=n(16),b=n.n(y),E=n(7),_=n.n(E),R=n(6),w=n.n(R),O=n(28),S=n.n(O),P=n(58),T=n(116),C=n(144),U=n(145);function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d()(e);if(t){var i=d()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return l()(this,n)}}var j=w.a.select,I=w.a.constants,D=w.a.utils,k=I,A=D.getUserUuid(),N=function(e){u()(n,e);var t=x(n);function n(){return i()(this,n),t.apply(this,arguments)}return o()(n,[{key:"render",value:function(){var e=this.props,t=e.id,n=e.event,r=e.registrations,i=b()(D.dateFromDrupal(n.attributes.field_date_time.value)),a=Array.isArray(n.relationships.field_event_audience)?n.relationships.field_event_audience.map((function(e){return{id:e.id,name:_()(e,"attributes.name")}})).filter((function(e){return e.id})):[],o=a.length>0?v.a.createElement(P.a,{label:"Audience",key:"audience",values:a}):null,s=_()(n,"attributes.event_thumbnail"),u=_()(S.a,"intercept.events.recommended"),c=Array.isArray(u)&&u.includes(_()(n,"attributes.drupal_internal__nid").toString())?"Recommended For You":null;return v.a.createElement(T.a,{key:t,modifiers:[s?"with-image":"without-image"],image:s,highlight:c,supertitle:_()(n,"relationships.field_location.0.attributes.title"),title:n.attributes.title,titleUrl:n.attributes.path?n.attributes.path.alias:"/node/".concat(n.attributes.nid),date:{month:i.utcOffset(D.getUserUtcOffset()).format("MMM"),date:i.utcOffset(D.getUserUtcOffset()).format("D"),time:D.getTimeDisplay(i).replace(":00","")},description:_()(n,"attributes.field_text_teaser.value"),tags:[o],registrations:r,footer:function(e){return v.a.createElement(v.a.Fragment,null,v.a.createElement(C.a,{eventId:e.event.id}),v.a.createElement(U.a,{eventId:e.event.id}))},event:n})}}]),n}(p.PureComponent);N.propTypes={id:h.a.string.isRequired,event:h.a.object.isRequired,registrations:h.a.array},N.defaultProps={registrations:[]};t.a=Object(m.b)((function(e,t){var n=j.getIdentifier(k.TYPE_EVENT,t.id),r=j.eventRegistrationsByEventByUser(t.id,A)(e);return{event:j.bundle(n)(e),registrations:r}}))(N)},257:function(e,t,n){"use strict";n(32),n(19),n(21),n(20);var r=n(10),i=n.n(r),a=n(9),o=n.n(a),s=n(11),u=n.n(s),c=n(12),l=n.n(c),f=n(5),d=n.n(f),p=n(0),v=n.n(p),g=n(1),h=n.n(g),m=n(15);function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d()(e);if(t){var i=d()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return l()(this,n)}}var b=function(e){u()(n,e);var t=y(n);function n(){return i()(this,n),t.apply(this,arguments)}return o()(n,[{key:"render",value:function(){var e=this.props,t=e.value,n=e.handleChange,r=e.options;return v.a.createElement("div",{className:"view-switcher"},r.map((function(e){return v.a.createElement("button",{key:e.key,className:(r=t===e.key,"view-switcher__button ".concat(r&&"view-switcher__button--active")),disabled:t===e.key,onClick:function(){return n(e.key)}},e.value);var r})))}}]),n}(v.a.PureComponent);b.propTypes={handleChange:h.a.func.isRequired,value:h.a.string,options:h.a.arrayOf(h.a.shape({key:h.a.string,value:h.a.string})).isRequired},b.defaultProps={value:"list"},t.a=Object(m.a)((function(e){return{checked:{fontWeight:"bold"},unChecked:{fontWeight:"bold",color:e.palette.secondary.main}}}))(b)},274:function(e,t,n){var r=n(14),i=n(275);r({target:"Date",proto:!0,forced:Date.prototype.toISOString!==i},{toISOString:i})},275:function(e,t,n){"use strict";var r=n(31),i=n(216).start,a=Math.abs,o=Date.prototype,s=o.getTime,u=o.toISOString;e.exports=r((function(){return"0385-07-25T07:06:39.999Z"!=u.call(new Date(-50000000000001))}))||!r((function(){u.call(new Date(NaN))}))?function(){if(!isFinite(s.call(this)))throw RangeError("Invalid time value");var e=this.getUTCFullYear(),t=this.getUTCMilliseconds(),n=e<0?"-":e>9999?"+":"";return n+i(a(e),n?6:4,0)+"-"+i(this.getUTCMonth()+1,2,0)+"-"+i(this.getUTCDate(),2,0)+"T"+i(this.getUTCHours(),2,0)+":"+i(this.getUTCMinutes(),2,0)+":"+i(this.getUTCSeconds(),2,0)+"."+i(t,3,0)+"Z"}:u},28:function(e,t){e.exports=drupalSettings},6:function(e,t){e.exports=interceptClient},866:function(e,t,n){"use strict";n.r(t);var r=n(0),i=n.n(r),a=n(25),o=n(66),s=n(30),u=n(6),c=n.n(u),l=n(206),f={view:{type:s.UrlQueryParamTypes.string},showSaves:{type:s.UrlQueryParamTypes.boolean},showRegistrations:{type:s.UrlQueryParamTypes.boolean}},d=function(e){return Object(l.a)(Object(s.addUrlProps)({urlPropsQueryConfig:f})(e))},p=(n(38),n(33),n(40),n(32),n(274),n(41),n(42),n(37),n(19),n(21),n(20),n(43),n(10)),v=n.n(p),g=n(9),h=n.n(g),m=n(3),y=n.n(m),b=n(11),E=n.n(b),_=n(12),R=n.n(_),w=n(5),O=n.n(w),S=n(2),P=n.n(S),T=n(1),C=n.n(T),U=n(18),x=n(16),j=n.n(x),I=n(28),D=n.n(I),k=n(46),A=n.n(k),N=n(146),F=n(256),M=n(69),V=n(257);function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(Object(n),!0).forEach((function(t){P()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function B(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O()(e);if(t){var i=O()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R()(this,n)}}var L=c.a.constants,Q=c.a.api,W=c.a.select,G=L,J=D.a.intercept.parameters.user.uuid,X=[{key:"past",value:"Past"},{key:"upcoming",value:"Upcoming"}];function Z(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"upcoming",t=arguments.length>1?arguments[1]:void 0,n="past"===e?"<":">",r=j()(new Date).toISOString();return{date:{path:t,value:r,operator:n}}}var z=function(e){E()(n,e);var t=B(n);function n(e){var r;return v()(this,n),r=t.call(this,e),P()(y()(r),"handleViewChange",(function(e){r.props.onChangeView(e),r.doFetch(e)})),r.state={open:!1},r.handleViewChange=r.handleViewChange.bind(y()(r)),r.doFetch=A()(r.doFetch,300).bind(y()(r)),r.doFetchRegistrations=r.doFetchRegistrations.bind(y()(r)),r.doFetchSavedEvents=r.doFetchSavedEvents.bind(y()(r)),r}return h()(n,[{key:"componentDidMount",value:function(){this.props.fetchAudiences({fields:P()({},G.TYPE_AUDIENCE,["name"])}),this.doFetch(this.props.view)}},{key:"doFetchRegistrations",value:function(e){this.props.fetchRegistrations({filters:Y({user:{path:"field_user.id",value:J}},Z(e,"field_event.field_date_time.end_value")),include:["field_event","field_event.image_primary","field_event.image_primary.field_media_image","field_event.field_location"],headers:{"X-Consumer-ID":c.a.consumer}})}},{key:"doFetchSavedEvents",value:function(e){this.props.fetchSavedEvents({filters:{user:{path:"uid.uid",value:J}},include:["flagged_entity","flagged_entity.image_primary","flagged_entity.image_primary.field_media_image","flagged_entity.field_location"],headers:{"X-Consumer-ID":c.a.consumer}})}},{key:"doFetch",value:function(e){this.props.showSaves&&this.doFetchSavedEvents(e),this.props.showRegistrations&&this.doFetchRegistrations(e)}},{key:"doConfirmAction",value:function(){this.setState({open:!0,text:"Confirm cancel"})}},{key:"render",value:function(){var e,t=this.props,n=this.handleViewChange,r=t.events,a=t.view,o=t.isLoading,s=r.length>0?i.a.createElement(N.a,{heading:null,items:(e=r,e.map((function(e){return{key:e.data.id,node:i.a.createElement(F.a,{id:e.data.id,className:"event-teaser"})}})))}):o?i.a.createElement(M.a,{loading:o}):i.a.createElement("p",null,"No events available.");return i.a.createElement("div",{className:"l--main"},i.a.createElement("div",{className:"l--subsection"},i.a.createElement(V.a,{options:X,value:a,handleChange:n})),i.a.createElement("div",{className:"l--subsection"},s))}}]),n}(r.Component);z.propTypes={events:C.a.array,onChangeView:C.a.func.isRequired,fetchAudiences:C.a.func.isRequired,fetchRegistrations:C.a.func.isRequired,fetchSavedEvents:C.a.func.isRequired,view:C.a.string,showSaves:C.a.bool,showRegistrations:C.a.bool},z.defaultProps={events:[],view:"upcoming",showSaves:!0,showRegistrations:!0};var H=d(Object(U.b)((function(e,t){var n="past"===t.view?"usersPastEvents":"usersUpcomingEvents";return!1===t.showSaves&&(n="past"===t.view?"usersPastRegisteredEvents":"usersUpcomingRegisteredEvents"),!1===t.showRegistrations&&(n="past"===t.view?"usersPastSavedEvents":"usersUpcomingSavedEvents"),{events:W[n](J)(e),registrations:W.eventRegistrations(e),isLoading:W.recordsAreLoading(G.TYPE_EVENT_REGISTRATION)(e)||W.recordsAreLoading(G.TYPE_SAVED_EVENT)(e)}}),(function(e,t){return{fetchAudiences:function(t){e(Q[G.TYPE_AUDIENCE].fetchAll(t))},fetchRegistrations:function(t){e(Q[G.TYPE_EVENT_REGISTRATION].fetchAll(t))},fetchSavedEvents:function(t){e(Q[G.TYPE_SAVED_EVENT].fetchAll(t))}}}))(z)),K=Object(o.a)(H);Object(a.render)(i.a.createElement(K,null),document.getElementById("eventRegistrationRoot"))}});