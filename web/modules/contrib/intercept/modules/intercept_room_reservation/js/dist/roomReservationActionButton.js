wpJsonpIntercept([9],{0:function(a,b){a.exports=React},11:function(a,b){a.exports=interceptClient},1219:function(a,b,c){"use strict";function d(a){var b=a.getAttribute("data-reservation-uuid"),c=a.getAttribute("data-status");Object(i.render)(h.a.createElement(q,{entityId:b,isStaff:o.a.utils.userIsStaff(),status:c,type:o.a.constants.TYPE_ROOM_RESERVATION}),a)}Object.defineProperty(b,"__esModule",{value:!0});var e=c(105),f=c.n(e),g=c(0),h=c.n(g),i=c(18),j=c.n(i),k=c(73),l=c(33),m=c.n(l),n=c(11),o=c.n(n),p=c(1220),q=Object(k.a)(p.a),r=f()(document.getElementsByClassName("js--room-reservation-action"));r.map(d)},1220:function(a,b,d){"use strict";function e(a,b,c){return g()({},c,a,b,{setStatusTo:function c(d){return b.setStatusTo(d,a.record)}})}var f=d(19),g=d.n(f),h=d(26),i=d.n(h),j=d(6),k=d.n(j),l=d(7),m=d.n(l),n=d(8),o=d.n(n),p=d(9),q=d.n(p),r=d(10),s=d.n(r),t=d(13),u=d.n(t),v=d(17),w=d.n(v),x=d(0),y=d.n(x),z=d(1),A=d.n(z),B=d(15),C=d(20),D=d.n(C),E=d(11),F=d.n(E),G=d(1221),H=d(107),I=d(103),J=d(1222),K=F.a.actions,L=F.a.api,M=F.a.select,N=F.a.session,O=F.a.utils,P=F.a.constants,c=function(a){function b(a){var c;return k()(this,b),c=o()(this,q()(b).call(this,a)),w()(u()(u()(c)),"getActions",function(a){var b=u()(u()(c)),d=b.cancel,e=b.deny,f=b.approve,g=b.request,h=O.userIsManager();return"requested"===a?h?[f(),e()]:[d()]:"denied"===a?h?[f(),d()]:null:"approved"===a?h?[e(),d()]:[d()]:"canceled"===a?[g()]:null}),w()(u()(u()(c)),"getDialogProps",function(a){return"requested"===a?{status:"requested",heading:"Are you sure you want to rerequest this reservation?"}:"denied"===a?{status:"denied",heading:"Are you sure you want to deny this reservation?"}:"approved"===a?{status:"approved",heading:"Are you sure you want to approve this reservation?"}:"canceled"===a?{status:"canceled",heading:"Are you sure you want to cancel this reservation?"}:null}),w()(u()(u()(c)),"openDialog",function(a){c.setState({open:!0,dialogProps:c.getDialogProps(a)})}),w()(u()(u()(c)),"closeDialog",function(){c.setState({open:!1})}),w()(u()(u()(c)),"confirmDialog",function(a){c.props.setStatusTo(a),c.closeDialog()}),w()(u()(u()(c)),"cancel",function(){return c.actionButton({status:"canceled",label:"Cancel"})}),w()(u()(u()(c)),"deny",function(){return c.actionButton({status:"denied",label:"Deny"})}),w()(u()(u()(c)),"request",function(){return c.actionButton({status:"requested",label:"Rerequest"})}),w()(u()(u()(c)),"approve",function(){return c.actionButton({status:"approved",label:"Approve",variant:"contained"})}),w()(u()(u()(c)),"dialog",function(){var a=c.state.dialogProps;return y.a.createElement(H.a,i()({},a,{open:c.state.open,onClose:c.onDialogClose,onCancel:c.closeDialog,onBackdropClick:null,disableEscapeKeyDown:c.state.disableEscapeKeyDown,disableBackdropClick:c.state.disableBackdropClick,onConfirm:function b(){return c.confirmDialog(a.status)},confirmText:"Yes",cancelText:"No"}))}),c.state={open:!1,disableBackdropClick:!0,disableEscapeKeyDown:!0,dialogProps:{}},c.actionButton=c.actionButton.bind(u()(u()(c))),c}return s()(b,a),m()(b,[{key:"componentDidMount",value:function a(){this.props.fetchReservation(this.props.entityId)}},{key:"actionButton",value:function a(b){var c=this,d=b.status,e=b.label,f=b.variant,g=this.props,h=g.record,i=g.entityId;return h?y.a.createElement(G.a,{entityId:i,type:P.TYPE_ROOM_RESERVATION,record:h,text:e,onClick:function a(){return c.openDialog(d)},key:d,variant:f}):null}},{key:"render",value:function a(){var b=this.props,c=b.record,d=b.isLoading,e=D()(c,"data.attributes.field_status")||this.props.status,f=d?y.a.createElement(I.a,{loading:d,size:20}):this.getActions(e);return y.a.createElement("div",{className:"reservation-register-button__inner"},y.a.createElement(J.a,{status:e,syncing:D()(c,"state.syncing")}),f,this.dialog())}}]),b}(y.a.Component);c.propTypes={entityId:A.a.string.isRequired,type:A.a.string.isRequired,status:A.a.string.isRequired,fetchReservation:A.a.func.isRequired,isLoading:A.a.bool,setStatusTo:A.a.func.isRequired,record:A.a.object},c.defaultProps={record:null,isLoading:!1};var Q=function a(b,c){return{record:M.record(M.getIdentifier(P.TYPE_ROOM_RESERVATION,c.entityId))(b),isLoading:M.recordsAreLoading(P.TYPE_ROOM_RESERVATION)(b)||M.recordIsLoading(P.TYPE_ROOM_RESERVATION,c.entityId)(b)}},R=function a(b,c){var d=c.entityId,e=c.type,f=function a(){N.getToken().then(function(a){b(L[e].sync(d,{headers:{"X-CSRF-Token":a}}))}).catch(function(a){console.log("Unable to save Reservation",a)})},g=function a(c,f){var g=f.data;g.attributes.field_status=c,b(K.edit(g,e,d))};return{setStatusTo:function a(b,c){g(b,c),f(e)},fetchReservation:function a(c){b(L[P.TYPE_ROOM_RESERVATION].fetchResource(c))}}};b.a=Object(B.b)(Q,R,e)(c)},1221:function(a,b,c){"use strict";var d=c(6),e=c.n(d),f=c(7),g=c.n(f),h=c(8),i=c.n(h),j=c(9),k=c.n(j),l=c(10),m=c.n(l),n=c(0),o=c.n(n),p=c(1),q=c.n(p),r=c(11),s=c.n(r),t=c(14),u=s.a.utils,v=u.getUserUuid(),w=function(a){function b(){return e()(this,b),i()(this,k()(b).apply(this,arguments))}return m()(b,a),g()(b,[{key:"render",value:function a(){var b=this.props,c=b.onClick,d=b.text,e=b.variant;return o.a.createElement(t.b,{variant:e,size:"small",color:"primary",className:"action-button__button",onClick:c},d)}}]),b}(o.a.PureComponent);w.propTypes={entityId:q.a.string.isRequired,onClick:q.a.func,text:q.a.string,variant:q.a.string},w.defaultProps={onClick:null,userId:v,mustRegister:!1,registrationAllowed:!1,registerUrl:null,text:"",variant:"outlined"},b.a=w},1222:function(a,b,c){"use strict";var d=c(6),e=c.n(d),f=c(7),g=c.n(f),h=c(8),i=c.n(h),j=c(9),k=c.n(j),l=c(10),m=c.n(l),n=c(13),o=c.n(n),p=c(17),q=c.n(p),r=c(0),s=c.n(r),t=c(1),u=c.n(t),v=c(15),w=c(11),x=c.n(w),y=c(33),z=c.n(y),A=function(a){function b(){var a,c;e()(this,b);for(var d=arguments.length,f=Array(d),g=0;g<d;g++)f[g]=arguments[g];return c=i()(this,(a=k()(b)).call.apply(a,[this].concat(f))),q()(o()(o()(c)),"getText",function(a,b){return"denied"===a?b?"Denying":"Denied":"approved"===a?b?"Approving":"Approved":"canceled"===a?b?"Cancelling":"Canceled":"requested"===a?b?"Rerequesting":"Awaiting Approval":null}),c}return m()(b,a),g()(b,[{key:"render",value:function a(){var b=this.getText(this.props.status,this.props.syncing);return b?s.a.createElement("p",{className:"action-button__message"},b):null}}]),b}(s.a.PureComponent);A.propTypes={status:u.a.string.isRequired,syncing:u.a.bool},A.defaultProps={syncing:!1},b.a=A},18:function(a,b){a.exports=ReactDOM},33:function(a,b){a.exports=drupalSettings},74:function(a,b){a.exports=interceptTheme}},[1219]);