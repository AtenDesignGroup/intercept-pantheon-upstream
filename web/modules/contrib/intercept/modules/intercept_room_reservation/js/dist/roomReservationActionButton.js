!function(e){function t(t){for(var a,i,l=t[0],s=t[1],c=t[2],d=0,p=[];d<l.length;d++)i=l[d],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&p.push(r[i][0]),r[i]=0;for(a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a]);for(u&&u(t);p.length;)p.shift()();return o.push.apply(o,c||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],a=!0,l=1;l<n.length;l++){var s=n[l];0!==r[s]&&(a=!1)}a&&(o.splice(t--,1),e=i(i.s=n[0]))}return e}var a={},r={12:0},o=[];function i(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=a,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var l=window.wpJsonpIntercept=window.wpJsonpIntercept||[],s=l.push.bind(l);l.push=t,l=l.slice();for(var c=0;c<l.length;c++)t(l[c]);var u=s;o.push([863,0]),n()}({0:function(e,t){e.exports=React},108:function(e,t,n){"use strict";n(29),n(19),n(21),n(20);var a=n(10),r=n.n(a),o=n(9),i=n.n(o),l=n(3),s=n.n(l),c=n(11),u=n.n(c),d=n(12),p=n.n(d),f=n(5),m=n.n(f),h=n(2),v=n.n(h),b=n(0),g=n.n(b),y=n(1),O=n.n(y),E=n(15),R=n(16),C=n.n(R),_=n(205),D=n(84),T=n(446),P=n(17),x=n(6);function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=m()(e);if(t){var r=m()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return p()(this,n)}}var w=n.n(x).a.utils,N=function(e){return{shrink:null!==e,className:"date-filter__label"}},I=function(e){u()(n,e);var t=k(n);function n(){var e;r()(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),v()(s()(e),"onChange",(function(t){var n=e.constructor.normalize(t);e.props.setValue(n),e.props.handleChange(n)})),v()(s()(e),"onClear",(function(){return e.onChange(null)})),e}return i()(n,[{key:"render",value:function(){var e=this.props,t=e.clearable,n=e.disabled,a=e.errorMessage,r=e.isValid,o=e.required,i=e.label,l=e.helperText,s=e.maxDate,c=e.maxDateMessage,u=e.minDate,d=e.minDateMessage,p=e.value,f=this.constructor.denormalize(p);return g.a.createElement(D.a,{utils:_.a,moment:C.a},g.a.createElement(T.a,{onChange:this.onChange,onClear:this.onClear,clearable:t,disabled:n,label:i,required:o,InputLabelProps:N(f),value:f,className:"date-filter input input--date",error:!r,helperText:a||l,maxDate:s&&this.constructor.denormalize(s),maxDateMessage:c,minDate:u&&this.constructor.denormalize(u),minDateMessage:d}))}}],[{key:"normalize",value:function(e){var t=null;null!==e&&(t=(e._z?e.clone():C.a.tz(e.format("YYYY-MM-DD"),"YYYY-MM-DD",w.getUserTimezone())).startOf("day").toDate());return t}},{key:"denormalize",value:function(e){return e&&""!==e?C.a.tz(e,w.getUserTimezone()):null}}]),n}(g.a.Component);I.propTypes=j(j({},P.propTypes),{},{value:O.a.instanceOf(Date),handleChange:O.a.func.isRequired,clearable:O.a.bool,disabled:O.a.bool,label:O.a.string}),I.defaultProps=j(j({},P.defaultProps),{},{value:null,label:"Date",clearable:!0,disabled:!1}),t.a=Object(E.a)((function(e){return{container:{display:"flex",flexWrap:"wrap"},textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),width:200}}}))(Object(P.withFormsy)(I))},115:function(e,t){e.exports=interceptTheme},117:function(e,t,n){"use strict";n(29),n(32),n(19),n(21),n(20);var a=n(10),r=n.n(a),o=n(9),i=n.n(o),l=n(3),s=n.n(l),c=n(11),u=n.n(c),d=n(12),p=n.n(d),f=n(5),m=n.n(f),h=n(2),v=n.n(h),b=n(0),g=n.n(b),y=n(1),O=n.n(y),E=n(15),R=n(17),C=n(232),_=n(233),D=n(389),T=n(234),P=n(331),x=n(328);function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=m()(e);if(t){var r=m()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return p()(this,n)}}var w={MenuListProps:{className:"select-filter__menu-list"},PaperProps:{style:{maxHeight:200,width:250}},getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"left"},className:"select-filter__menu"},N=function(e){u()(n,e);var t=k(n);function n(){var e;r()(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),v()(s()(e),"handleChange",(function(t){e.props.setValue(t.target.value),e.props.handleChange(t)})),e}return i()(n,[{key:"render",value:function(){var e=this.props,t=e.options,n=e.label,a=e.disabled,r=e.isValid,o=e.value,i=function(e,t){return g.a.createElement("label",{className:"select-filter__checkbox-label",htmlFor:t},e)};return g.a.createElement("div",{className:"select-filter input input--select"},g.a.createElement(C.a,{className:"select-filter__control",disabled:a},g.a.createElement(_.a,{className:"select-filter__label",htmlFor:"select-multiple-chip",required:this.props.required,shrink:!!o},n),g.a.createElement(D.a,{value:null!==o&&o?o:"",onChange:this.handleChange,input:g.a.createElement(T.a,{id:"select-multiple-chip"}),MenuProps:w,error:!r,required:this.props.required},t.map((function(e){return g.a.createElement(P.a,{key:e.key,value:e.key,className:"select-filter__menu-item"},g.a.createElement(x.a,{disableTypography:!0,primary:i(e.value,(t=e.key,"select-filter--".concat(t)))}));var t})))))}}]),n}(g.a.Component);N.propTypes=j(j({},R.propTypes),{},{label:O.a.string.isRequired,value:O.a.oneOfType([O.a.arrayOf(String),O.a.string]),options:O.a.arrayOf(Object).isRequired,handleChange:O.a.func.isRequired,multiple:O.a.bool,disabled:O.a.bool}),N.defaultProps=j(j({},R.defaultProps),{},{value:null,multiple:!1,disabled:!1}),t.a=Object(E.a)((function(e){return{root:{display:"flex",flexWrap:"wrap"},formControl:{margin:e.spacing(1),minWidth:120,maxWidth:300,width:"100%"},inputLabel:{margin:0}}}),{withTheme:!0})(Object(R.withFormsy)(N))},127:function(e,t,n){"use strict";n(29),n(32),n(83),n(19),n(21),n(20);var a=n(2),r=n.n(a),o=n(10),i=n.n(o),l=n(9),s=n.n(l),c=n(11),u=n.n(c),d=n(12),p=n.n(d),f=n(5),m=n.n(f),h=n(0),v=n.n(h),b=n(1),g=n.n(b),y=n(17),O=n(232),E=n(875),R=n(4),C=n(54),_=n(13),D=n(904),T=n(34),P=n(156),x=n(197),S=n(192),j=h.forwardRef((function(e,t){var n=e.actions,a=e.children,r=e.name,o=e.value,i=e.onChange,l=Object(_.a)(e,["actions","children","name","value","onChange"]),s=h.useRef(null),c=Object(P.a)({controlled:o,default:e.defaultValue,name:"RadioGroup"}),u=Object(C.a)(c,2),d=u[0],p=u[1];h.useImperativeHandle(n,(function(){return{focus:function(){var e=s.current.querySelector("input:not(:disabled):checked");e||(e=s.current.querySelector("input:not(:disabled)")),e&&e.focus()}}}),[]);var f=Object(T.a)(t,s),m=Object(S.a)(r);return h.createElement(x.a.Provider,{value:{name:m,onChange:function(e){p(e.target.value),i&&i(e,e.target.value)},value:d}},h.createElement(D.a,Object(R.a)({role:"radiogroup",ref:f},l),a))})),k=n(528),w=n(913),N=n(877);function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function V(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=m()(e);if(t){var r=m()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return p()(this,n)}}var L=function(e){u()(n,e);var t=V(n);function n(){return i()(this,n),t.apply(this,arguments)}return s()(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.label,a=t.ariaLabel,r=t.isValid,o=t.onChange,i=t.errorMessage,l=t.required,s=(t.disabled,t.options),c=t.name,u=t.value,d=i||"";return this.props.helperText&&(d="".concat(this.props.helperText," ").concat(d)),v.a.createElement(O.a,{component:"fieldset",className:"radios",required:l,error:!r},n&&v.a.createElement(E.a,{component:"legend"},n),v.a.createElement(j,{"aria-label":a,name:c,value:u,className:"radios__group",onChange:function(t){o(t.target.value),e.props.setValue(t.target.value)}},s.map((function(e){return v.a.createElement(k.a,{key:e.key,value:e.key,control:v.a.createElement(w.a,null),label:e.value,className:"radios__radio-label"})}))),d&&v.a.createElement(N.a,{error:!r},d))}}]),n}(v.a.Component);L.propTypes=A(A({},y.propTypes),{},{onChange:g.a.func.isRequired,options:g.a.arrayOf(Object).isRequired,value:g.a.string,label:g.a.string,ariaLabel:g.a.string,validators:g.a.arrayOf(String),disabled:g.a.bool}),L.defaultProps=A(A({},y.defaultProps),{},{value:"",label:"",ariaLabel:"",validators:[],disabled:!1});t.a=Object(y.withFormsy)(L)},147:function(e,t,n){"use strict";n(19),n(21),n(20);var a=n(23),r=n.n(a),o=n(10),i=n.n(o),l=n(9),s=n.n(l),c=n(11),u=n.n(c),d=n(12),p=n.n(d),f=n(5),m=n.n(f),h=n(0),v=n.n(h),b=n(330);function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=m()(e);if(t){var r=m()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return p()(this,n)}}var y=function(e){u()(n,e);var t=g(n);function n(){return i()(this,n),t.apply(this,arguments)}return s()(n,[{key:"render",value:function(){var e=v.a.createElement("svg",{width:"8",height:"8",xmlns:"http://www.w3.org/2000/svg"},v.a.createElement("g",{fill:"#4C4D4F",fillRule:"evenodd"},v.a.createElement("path",{d:"M.053 7l7-7 .893.894-7 7z"}),v.a.createElement("path",{d:"M7.054 7.893l-7-7L.947.002l7 7z"})));return v.a.createElement(b.a,r()({},this.props,{className:"option-chip",deleteIcon:e}))}}]),n}(v.a.PureComponent);t.a=y},148:function(e,t,n){"use strict";n(19),n(254),n(114),n(21),n(20);var a=n(2),r=n.n(a),o=n(10),i=n.n(o),l=n(9),s=n.n(l),c=n(11),u=n.n(c),d=n(12),p=n.n(d),f=n(5),m=n.n(f),h=n(0),v=n.n(h),b=n(1),g=n.n(b),y=n(17),O=n(334);function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=m()(e);if(t){var r=m()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return p()(this,n)}}var _=function(e){u()(n,e);var t=C(n);function n(){return i()(this,n),t.apply(this,arguments)}return s()(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.errorMessage,a=t.isValid,r=t.step,o=t.label,i=t.onChange,l=t.min,s=t.max,c=t.int,u=t.required,d=t.value;return v.a.createElement(O.a,{label:o,required:u,type:"number",onChange:function(t){var n=c?parseInt:parseFloat,a=t.target.value?n(t.target.value):null;e.props.setValue(a),i(a)},value:d||"",error:!a,helperText:n||this.props.helperText,className:"input input--number",InputLabelProps:{className:"input__label"},inputProps:{step:r,min:l,max:s}})}}]),n}(v.a.PureComponent);_.propTypes=R(R({},y.propTypes),{},{onChange:g.a.func.isRequired,value:g.a.number,label:g.a.string,step:g.a.number,int:g.a.bool}),_.defaultProps=R(R({},y.defaultProps),{},{value:null,label:"Number",step:1}),t.a=Object(y.withFormsy)(_)},154:function(e,t,n){"use strict";var a=n(0),r=n.n(a),o=n(1),i=n.n(o),l=n(18),s=n(6),c=n.n(s),u=n(147),d=c.a.select,p=function(e){var t=e.identifier,n=e.onDelete,a=e.label,o=t.id;return r.a.createElement(u.a,{key:o,label:a,onDelete:function(){return n(o)},onClick:function(){return n(o)}})};p.propTypes={identifier:i.a.shape({id:i.a.string,type:i.a.string}).isRequired,label:i.a.string,onDelete:i.a.func},p.defaultProps={onDelete:null,label:""};t.a=Object(l.b)((function(e,t){return{label:d.recordLabel(t.identifier)(e)}}))(p)},155:function(e,t,n){"use strict";n(121),n(32),n(19),n(21),n(91),n(20),n(141);var a=n(10),r=n.n(a),o=n(9),i=n.n(o),l=n(3),s=n.n(l),c=n(11),u=n.n(c),d=n(12),p=n.n(d),f=n(5),m=n.n(f),h=n(0),v=n.n(h),b=n(1),g=n.n(b),y=n(6),O=n.n(y),E=n(18),R=n(7),C=n.n(R),_=n(388);function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=m()(e);if(t){var r=m()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return p()(this,n)}}var T=O.a.select,P=function(e){u()(n,e);var t=D(n);function n(e){var a;return r()(this,n),(a=t.call(this,e)).getMessage=a.getMessage.bind(s()(a)),a}return i()(n,[{key:"getMessage",value:function(e,t){var n=this.props.messages,a=n.default;if(!t)return a;if(e.syncing)return a=n.syncing[t];if(e.error){var r=n.error[t];return Array.isArray(e.error)&&(r=e.error.map((function(e){return e.detail.replace("Entity is not valid: ","")})).join(", ")),a=r}return e.dirty?a=n.dirty[t]:e.saved?a=n.saved[t]:a}},{key:"render",value:function(){var e=this.props,t=e.entity,n=e.statusPath,a=this.getMessage(t.state,C()(t,n));return v.a.createElement("div",{className:"entity-status"},v.a.createElement("p",{className:"entity-status__message"},a),t.state.syncing&&v.a.createElement(_.a,{size:50}))}}]),n}(v.a.PureComponent);P.propTypes={type:g.a.string.isRequired,id:g.a.string.isRequired,statusPath:g.a.string.isRequired,entity:g.a.instanceOf(Object).isRequired,messages:g.a.shape({default:g.a.string,syncing:g.a.object,error:g.a.object,saved:g.a.object}).isRequired};t.a=Object(E.b)((function(e,t){var n=T.getIdentifier(t.type,t.id);return{entity:T.record(n)(e)}}))(P)},158:function(e,t,n){"use strict";n(33),n(96),n(122),n(19),n(21),n(20);var a=n(23),r=n.n(a),o=n(10),i=n.n(o),l=n(3),s=n.n(l),c=n(9),u=n.n(c),d=n(11),p=n.n(d),f=n(12),m=n.n(f),h=n(5),v=n.n(h),b=n(2),g=n.n(b),y=n(0),O=n.n(y),E=n(1),R=n.n(E),C=n(196),_=n.n(C),D=n(15),T=n(13),P=n(39),x=n(4),S=n(8),j=n(199),k=n(874),w=n(905),N=n(128),I=n(135),A=n(34);function V(e){return"function"==typeof e?e():e}var L="undefined"!=typeof window?y.useLayoutEffect:y.useEffect,q={},M=y.forwardRef((function(e,t){var n=e.anchorEl,a=e.children,r=e.container,o=e.disablePortal,i=void 0!==o&&o,l=e.keepMounted,s=void 0!==l&&l,c=e.modifiers,u=e.open,d=e.placement,p=void 0===d?"bottom":d,f=e.popperOptions,m=void 0===f?q:f,h=e.popperRef,v=e.style,b=e.transition,g=void 0!==b&&b,O=Object(T.a)(e,["anchorEl","children","container","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","style","transition"]),E=y.useRef(null),R=Object(A.a)(E,t),C=y.useRef(null),_=Object(A.a)(C,h),D=y.useRef(_);L((function(){D.current=_}),[_]),y.useImperativeHandle(h,(function(){return C.current}),[]);var P=y.useState(!0),S=P[0],M=P[1],z=function(e,t){if("ltr"===(t&&t.direction||"ltr"))return e;switch(e){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return e}}(p,Object(k.a)()),F=y.useState(z),Y=F[0],U=F[1];y.useEffect((function(){C.current&&C.current.update()}));var B=y.useCallback((function(){if(E.current&&n&&u){C.current&&(C.current.destroy(),D.current(null));var e=function(e){U(e.placement)},t=(V(n),new j.a(V(n),E.current,Object(x.a)({placement:z},m,{modifiers:Object(x.a)({},i?{}:{preventOverflow:{boundariesElement:"window"}},c,m.modifiers),onCreate:Object(N.a)(e,m.onCreate),onUpdate:Object(N.a)(e,m.onUpdate)})));D.current(t)}}),[n,i,c,u,z,m]),H=y.useCallback((function(e){Object(I.a)(R,e),B()}),[R,B]),$=function(){C.current&&(C.current.destroy(),D.current(null))};if(y.useEffect((function(){return function(){$()}}),[]),y.useEffect((function(){u||g||$()}),[u,g]),!s&&!u&&(!g||S))return null;var W={placement:Y};return g&&(W.TransitionProps={in:u,onEnter:function(){M(!1)},onExited:function(){M(!0),$()}}),y.createElement(w.a,{disablePortal:i,container:r},y.createElement("div",Object(x.a)({ref:H,role:"tooltip"},O,{style:Object(x.a)({position:"fixed",top:0,left:0,display:u||!s||g?null:"none"},v)}),"function"==typeof a?a(W):a))})),z=n(24),F=y.forwardRef((function(e,t){var n=e.classes,a=e.className,r=e.color,o=void 0===r?"default":r,i=e.component,l=void 0===i?"li":i,s=e.disableGutters,c=void 0!==s&&s,u=e.disableSticky,d=void 0!==u&&u,p=e.inset,f=void 0!==p&&p,m=Object(T.a)(e,["classes","className","color","component","disableGutters","disableSticky","inset"]);return y.createElement(l,Object(x.a)({className:Object(S.default)(n.root,a,"default"!==o&&n["color".concat(Object(z.a)(o))],f&&n.inset,!d&&n.sticky,!c&&n.gutters),ref:t},m))})),Y=Object(D.a)((function(e){return{root:{boxSizing:"border-box",lineHeight:"48px",listStyle:"none",color:e.palette.text.secondary,fontFamily:e.typography.fontFamily,fontWeight:e.typography.fontWeightMedium,fontSize:e.typography.pxToRem(14)},colorPrimary:{color:e.palette.primary.main},colorInherit:{color:"inherit"},gutters:{paddingLeft:16,paddingRight:16},inset:{paddingLeft:72},sticky:{position:"sticky",top:0,zIndex:1,backgroundColor:"inherit"}}}),{name:"MuiListSubheader"})(F),U=n(529),B=n(876),H=n(330),$=n(65),W=Object($.a)(y.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),G=Object($.a)(y.createElement("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown"),K=n(54),Q=(n(143),n(192)),X=n(156),J=n(159);function Z(e){return void 0!==e.normalize?e.normalize("NFD").replace(/[\u0300-\u036f]/g,""):e}function ee(e,t){for(var n=0;n<e.length;n+=1)if(t(e[n]))return n;return-1}var te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.ignoreAccents,n=void 0===t||t,a=e.ignoreCase,r=void 0===a||a,o=e.limit,i=e.matchFrom,l=void 0===i?"any":i,s=e.stringify,c=e.trim,u=void 0!==c&&c;return function(e,t){var a=t.inputValue,i=t.getOptionLabel,c=u?a.trim():a;r&&(c=c.toLowerCase()),n&&(c=Z(c));var d=e.filter((function(e){var t=(s||i)(e);return r&&(t=t.toLowerCase()),n&&(t=Z(t)),"start"===l?0===t.indexOf(c):t.indexOf(c)>-1}));return"number"==typeof o?d.slice(0,o):d}}();function ne(e){var t=e.autoComplete,n=void 0!==t&&t,a=e.autoHighlight,r=void 0!==a&&a,o=e.autoSelect,i=void 0!==o&&o,l=e.blurOnSelect,s=void 0!==l&&l,c=e.clearOnBlur,u=void 0===c?!e.freeSolo:c,d=e.clearOnEscape,p=void 0!==d&&d,f=e.componentName,m=void 0===f?"useAutocomplete":f,h=e.debug,v=void 0!==h&&h,b=e.defaultValue,g=void 0===b?e.multiple?[]:null:b,O=e.disableClearable,E=void 0!==O&&O,R=e.disableCloseOnSelect,C=void 0!==R&&R,_=e.disabledItemsFocusable,D=void 0!==_&&_,T=e.disableListWrap,P=void 0!==T&&T,S=e.filterOptions,j=void 0===S?te:S,k=e.filterSelectedOptions,w=void 0!==k&&k,N=e.freeSolo,A=void 0!==N&&N,V=e.getOptionDisabled,L=e.getOptionLabel,q=void 0===L?function(e){return e}:L,M=e.getOptionSelected,z=void 0===M?function(e,t){return e===t}:M,F=e.groupBy,Y=e.handleHomeEndKeys,U=void 0===Y?!e.freeSolo:Y,B=e.id,H=e.includeInputInList,$=void 0!==H&&H,W=e.inputValue,G=e.multiple,Z=void 0!==G&&G,ne=e.onChange,ae=e.onClose,re=e.onHighlightChange,oe=e.onInputChange,ie=e.onOpen,le=e.open,se=e.openOnFocus,ce=void 0!==se&&se,ue=e.options,de=e.selectOnFocus,pe=void 0===de?!e.freeSolo:de,fe=e.value,me=Object(Q.a)(B),he=q;var ve=y.useRef(!1),be=y.useRef(!0),ge=y.useRef(null),ye=y.useRef(null),Oe=y.useState(null),Ee=Oe[0],Re=Oe[1],Ce=y.useState(-1),_e=Ce[0],De=Ce[1],Te=r?0:-1,Pe=y.useRef(Te),xe=Object(X.a)({controlled:fe,default:g,name:m}),Se=Object(K.a)(xe,2),je=Se[0],ke=Se[1],we=Object(X.a)({controlled:W,default:"",name:m,state:"inputValue"}),Ne=Object(K.a)(we,2),Ie=Ne[0],Ae=Ne[1],Ve=y.useState(!1),Le=Ve[0],qe=Ve[1],Me=Object(J.a)((function(e,t){var n;if(Z)n="";else if(null==t)n="";else{var a=he(t);n="string"==typeof a?a:""}Ie!==n&&(Ae(n),oe&&oe(e,n,"reset"))}));y.useEffect((function(){Me(null,je)}),[je,Me]);var ze=Object(X.a)({controlled:le,default:!1,name:m,state:"open"}),Fe=Object(K.a)(ze,2),Ye=Fe[0],Ue=Fe[1],Be=!Z&&null!=je&&Ie===he(je),He=Ye,$e=He?j(ue.filter((function(e){return!w||!(Z?je:[je]).some((function(t){return null!==t&&z(e,t)}))})),{inputValue:Be?"":Ie,getOptionLabel:he}):[],We=Object(J.a)((function(e){-1===e?ge.current.focus():Ee.querySelector('[data-tag-index="'.concat(e,'"]')).focus()}));y.useEffect((function(){Z&&_e>je.length-1&&(De(-1),We(-1))}),[je,Z,_e,We]);var Ge=Object(J.a)((function(e){var t=e.event,n=e.index,a=e.reason,r=void 0===a?"auto":a;if(Pe.current=n,-1===n?ge.current.removeAttribute("aria-activedescendant"):ge.current.setAttribute("aria-activedescendant","".concat(me,"-option-").concat(n)),re&&re(t,-1===n?null:$e[n],r),ye.current){var o=ye.current.querySelector("[data-focus]");o&&o.removeAttribute("data-focus");var i=ye.current.parentElement.querySelector('[role="listbox"]');if(i)if(-1!==n){var l=ye.current.querySelector('[data-option-index="'.concat(n,'"]'));if(l&&(l.setAttribute("data-focus","true"),i.scrollHeight>i.clientHeight&&"mouse"!==r)){var s=l,c=i.clientHeight+i.scrollTop,u=s.offsetTop+s.offsetHeight;u>c?i.scrollTop=u-i.clientHeight:s.offsetTop-s.offsetHeight*(F?1.3:0)<i.scrollTop&&(i.scrollTop=s.offsetTop-s.offsetHeight*(F?1.3:0))}}else i.scrollTop=0}})),Ke=Object(J.a)((function(e){var t=e.event,a=e.diff,r=e.direction,o=void 0===r?"next":r,i=e.reason,l=void 0===i?"auto":i;if(He){var s=function(e,t){if(!ye.current||-1===e)return-1;for(var n=e;;){if("next"===t&&n===$e.length||"previous"===t&&-1===n)return-1;var a=ye.current.querySelector('[data-option-index="'.concat(n,'"]')),r=!D&&(a&&(a.disabled||"true"===a.getAttribute("aria-disabled")));if(!(a&&!a.hasAttribute("tabindex")||r))return n;n+="next"===t?1:-1}}(function(){var e=$e.length-1;if("reset"===a)return Te;if("start"===a)return 0;if("end"===a)return e;var t=Pe.current+a;return t<0?-1===t&&$?-1:P&&-1!==Pe.current||Math.abs(a)>1?0:e:t>e?t===e+1&&$?-1:P||Math.abs(a)>1?e:0:t}(),o);if(Ge({index:s,reason:l,event:t}),n&&"reset"!==a)if(-1===s)ge.current.value=Ie;else{var c=he($e[s]);ge.current.value=c,0===c.toLowerCase().indexOf(Ie.toLowerCase())&&Ie.length>0&&ge.current.setSelectionRange(Ie.length,c.length)}}})),Qe=y.useCallback((function(){if(He){var e=Z?je[0]:je;if(0!==$e.length&&null!=e){if(ye.current)if(w||null==e)Pe.current>=$e.length-1?Ge({index:$e.length-1}):Ge({index:Pe.current});else{var t=$e[Pe.current];if(Z&&t&&-1!==ee(je,(function(e){return z(t,e)})))return;var n=ee($e,(function(t){return z(t,e)}));-1===n?Ke({diff:"reset"}):Ge({index:n})}}else Ke({diff:"reset"})}}),[0===$e.length,!Z&&je,w,Ke,Ge,He,Ie,Z]),Xe=Object(J.a)((function(e){Object(I.a)(ye,e),e&&Qe()}));y.useEffect((function(){Qe()}),[Qe]);var Je=function(e){Ye||(Ue(!0),ie&&ie(e))},Ze=function(e,t){Ye&&(Ue(!1),ae&&ae(e,t))},et=function(e,t,n,a){je!==t&&(ne&&ne(e,t,n,a),ke(t))},tt=y.useRef(!1),nt=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"select-option",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"options",r=n,o=t;if(Z){var i=ee(o=Array.isArray(je)?je.slice():[],(function(e){return z(t,e)}));-1===i?o.push(t):"freeSolo"!==a&&(o.splice(i,1),r="remove-option")}Me(e,o),et(e,o,r,{option:t}),C||Ze(e,r),(!0===s||"touch"===s&&tt.current||"mouse"===s&&!tt.current)&&ge.current.blur()};var at=function(e,t){if(Z){Ze(e,"toggleInput");var n=_e;-1===_e?""===Ie&&"previous"===t&&(n=je.length-1):((n+="next"===t?1:-1)<0&&(n=0),n===je.length&&(n=-1)),n=function(e,t){if(-1===e)return-1;for(var n=e;;){if("next"===t&&n===je.length||"previous"===t&&-1===n)return-1;var a=Ee.querySelector('[data-tag-index="'.concat(n,'"]'));if(!a||a.hasAttribute("tabindex")&&!a.disabled&&"true"!==a.getAttribute("aria-disabled"))return n;n+="next"===t?1:-1}}(n,t),De(n),We(n)}},rt=function(e){ve.current=!0,Ae(""),oe&&oe(e,"","clear"),et(e,Z?[]:null,"clear")},ot=function(e){return function(t){switch(-1!==_e&&-1===["ArrowLeft","ArrowRight"].indexOf(t.key)&&(De(-1),We(-1)),t.key){case"Home":He&&U&&(t.preventDefault(),Ke({diff:"start",direction:"next",reason:"keyboard",event:t}));break;case"End":He&&U&&(t.preventDefault(),Ke({diff:"end",direction:"previous",reason:"keyboard",event:t}));break;case"PageUp":t.preventDefault(),Ke({diff:-5,direction:"previous",reason:"keyboard",event:t}),Je(t);break;case"PageDown":t.preventDefault(),Ke({diff:5,direction:"next",reason:"keyboard",event:t}),Je(t);break;case"ArrowDown":t.preventDefault(),Ke({diff:1,direction:"next",reason:"keyboard",event:t}),Je(t);break;case"ArrowUp":t.preventDefault(),Ke({diff:-1,direction:"previous",reason:"keyboard",event:t}),Je(t);break;case"ArrowLeft":at(t,"previous");break;case"ArrowRight":at(t,"next");break;case"Enter":if(229===t.which)break;if(-1!==Pe.current&&He){var a=$e[Pe.current],r=!!V&&V(a);if(t.preventDefault(),r)return;nt(t,a,"select-option"),n&&ge.current.setSelectionRange(ge.current.value.length,ge.current.value.length)}else A&&""!==Ie&&!1===Be&&(Z&&t.preventDefault(),nt(t,Ie,"create-option","freeSolo"));break;case"Escape":He?(t.preventDefault(),t.stopPropagation(),Ze(t,"escape")):p&&(""!==Ie||Z&&je.length>0)&&(t.preventDefault(),t.stopPropagation(),rt(t));break;case"Backspace":if(Z&&""===Ie&&je.length>0){var o=-1===_e?je.length-1:_e,i=je.slice();i.splice(o,1),et(t,i,"remove-option",{option:je[o]})}}e.onKeyDown&&e.onKeyDown(t)}},it=function(e){qe(!0),ce&&!ve.current&&Je(e)},lt=function(e){null===ye.current||document.activeElement!==ye.current.parentElement?(qe(!1),be.current=!0,ve.current=!1,v&&""!==Ie||(i&&-1!==Pe.current&&He?nt(e,$e[Pe.current],"blur"):i&&A&&""!==Ie?nt(e,Ie,"blur","freeSolo"):u&&Me(e,je),Ze(e,"blur"))):ge.current.focus()},st=function(e){var t=e.target.value;Ie!==t&&(Ae(t),oe&&oe(e,t,"input")),""===t?E||Z||et(e,null,"clear"):Je(e)},ct=function(e){Ge({event:e,index:Number(e.currentTarget.getAttribute("data-option-index")),reason:"mouse"})},ut=function(){tt.current=!0},dt=function(e){var t=Number(e.currentTarget.getAttribute("data-option-index"));nt(e,$e[t],"select-option"),tt.current=!1},pt=function(e){return function(t){var n=je.slice();n.splice(e,1),et(t,n,"remove-option",{option:je[e]})}},ft=function(e){Ye?Ze(e,"toggleInput"):Je(e)},mt=function(e){e.target.getAttribute("id")!==me&&e.preventDefault()},ht=function(){ge.current.focus(),pe&&be.current&&ge.current.selectionEnd-ge.current.selectionStart==0&&ge.current.select(),be.current=!1},vt=function(e){""!==Ie&&Ye||ft(e)},bt=A&&Ie.length>0;bt=bt||(Z?je.length>0:null!==je);var gt=$e;if(F){new Map;gt=$e.reduce((function(e,t,n){var a=F(t);return e.length>0&&e[e.length-1].group===a?e[e.length-1].options.push(t):e.push({key:n,index:n,group:a,options:[t]}),e}),[])}return{getRootProps:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(x.a)({"aria-owns":He?"".concat(me,"-popup"):null,role:"combobox","aria-expanded":He},e,{onKeyDown:ot(e),onMouseDown:mt,onClick:ht})},getInputLabelProps:function(){return{id:"".concat(me,"-label"),htmlFor:me}},getInputProps:function(){return{id:me,value:Ie,onBlur:lt,onFocus:it,onChange:st,onMouseDown:vt,"aria-activedescendant":He?"":null,"aria-autocomplete":n?"both":"list","aria-controls":He?"".concat(me,"-popup"):null,autoComplete:"off",ref:ge,autoCapitalize:"none",spellCheck:"false"}},getClearProps:function(){return{tabIndex:-1,onClick:rt}},getPopupIndicatorProps:function(){return{tabIndex:-1,onClick:ft}},getTagProps:function(e){var t=e.index;return{key:t,"data-tag-index":t,tabIndex:-1,onDelete:pt(t)}},getListboxProps:function(){return{role:"listbox",id:"".concat(me,"-popup"),"aria-labelledby":"".concat(me,"-label"),ref:Xe,onMouseDown:function(e){e.preventDefault()}}},getOptionProps:function(e){var t=e.index,n=e.option,a=(Z?je:[je]).some((function(e){return null!=e&&z(n,e)})),r=!!V&&V(n);return{key:t,tabIndex:-1,role:"option",id:"".concat(me,"-option-").concat(t),onMouseOver:ct,onClick:dt,onTouchStart:ut,"data-option-index":t,"aria-disabled":r,"aria-selected":a}},id:me,inputValue:Ie,value:je,dirty:bt,popupOpen:He,focused:Le||-1!==_e,anchorEl:Ee,setAnchorEl:Re,focusedTag:_e,groupedOptions:gt}}function ae(e){e.anchorEl,e.open;var t=Object(T.a)(e,["anchorEl","open"]);return y.createElement("div",t)}var re=y.createElement(W,{fontSize:"small"}),oe=y.createElement(G,null),ie=y.forwardRef((function(e,t){e.autoComplete,e.autoHighlight,e.autoSelect,e.blurOnSelect;var n,a=e.ChipProps,r=e.classes,o=e.className,i=e.clearOnBlur,l=(void 0===i&&e.freeSolo,e.clearOnEscape,e.clearText),s=void 0===l?"Clear":l,c=e.closeIcon,u=void 0===c?re:c,d=e.closeText,p=void 0===d?"Close":d,f=(e.debug,e.defaultValue),m=(void 0===f&&e.multiple,e.disableClearable),h=void 0!==m&&m,v=(e.disableCloseOnSelect,e.disabled),b=void 0!==v&&v,g=(e.disabledItemsFocusable,e.disableListWrap,e.disablePortal),O=void 0!==g&&g,E=(e.filterOptions,e.filterSelectedOptions,e.forcePopupIcon),R=void 0===E?"auto":E,C=e.freeSolo,_=void 0!==C&&C,D=e.fullWidth,P=void 0!==D&&D,j=e.getLimitTagsText,k=void 0===j?function(e){return"+".concat(e)}:j,w=(e.getOptionDisabled,e.getOptionLabel),N=void 0===w?function(e){return e}:w,I=(e.getOptionSelected,e.groupBy),A=e.handleHomeEndKeys,V=(void 0===A&&e.freeSolo,e.id,e.includeInputInList,e.inputValue,e.limitTags),L=void 0===V?-1:V,q=e.ListboxComponent,z=void 0===q?"ul":q,F=e.ListboxProps,$=e.loading,W=void 0!==$&&$,G=e.loadingText,K=void 0===G?"Loading…":G,Q=e.multiple,X=void 0!==Q&&Q,J=e.noOptionsText,Z=void 0===J?"No options":J,ee=(e.onChange,e.onClose,e.onHighlightChange,e.onInputChange,e.onOpen,e.open,e.openOnFocus,e.openText),te=void 0===ee?"Open":ee,ie=(e.options,e.PaperComponent),le=void 0===ie?U.a:ie,se=e.PopperComponent,ce=void 0===se?M:se,ue=e.popupIcon,de=void 0===ue?oe:ue,pe=e.renderGroup,fe=e.renderInput,me=e.renderOption,he=e.renderTags,ve=e.selectOnFocus,be=(void 0===ve&&e.freeSolo,e.size),ge=void 0===be?"medium":be,ye=(e.value,Object(T.a)(e,["autoComplete","autoHighlight","autoSelect","blurOnSelect","ChipProps","classes","className","clearOnBlur","clearOnEscape","clearText","closeIcon","closeText","debug","defaultValue","disableClearable","disableCloseOnSelect","disabled","disabledItemsFocusable","disableListWrap","disablePortal","filterOptions","filterSelectedOptions","forcePopupIcon","freeSolo","fullWidth","getLimitTagsText","getOptionDisabled","getOptionLabel","getOptionSelected","groupBy","handleHomeEndKeys","id","includeInputInList","inputValue","limitTags","ListboxComponent","ListboxProps","loading","loadingText","multiple","noOptionsText","onChange","onClose","onHighlightChange","onInputChange","onOpen","open","openOnFocus","openText","options","PaperComponent","PopperComponent","popupIcon","renderGroup","renderInput","renderOption","renderTags","selectOnFocus","size","value"])),Oe=O?ae:ce,Ee=ne(Object(x.a)({},e,{componentName:"Autocomplete"})),Re=Ee.getRootProps,Ce=Ee.getInputProps,_e=Ee.getInputLabelProps,De=Ee.getPopupIndicatorProps,Te=Ee.getClearProps,Pe=Ee.getTagProps,xe=Ee.getListboxProps,Se=Ee.getOptionProps,je=Ee.value,ke=Ee.dirty,we=Ee.id,Ne=Ee.popupOpen,Ie=Ee.focused,Ae=Ee.focusedTag,Ve=Ee.anchorEl,Le=Ee.setAnchorEl,qe=Ee.inputValue,Me=Ee.groupedOptions;if(X&&je.length>0){var ze=function(e){return Object(x.a)({className:Object(S.default)(r.tag,"small"===ge&&r.tagSizeSmall),disabled:b},Pe(e))};n=he?he(je,ze):je.map((function(e,t){return y.createElement(H.a,Object(x.a)({label:N(e),size:ge},ze({index:t}),a))}))}if(L>-1&&Array.isArray(n)){var Fe=n.length-L;!Ie&&Fe>0&&(n=n.splice(0,L)).push(y.createElement("span",{className:r.tag,key:n.length},k(Fe)))}var Ye=pe||function(e){return y.createElement("li",{key:e.key},y.createElement(Y,{className:r.groupLabel,component:"div"},e.group),y.createElement("ul",{className:r.groupUl},e.children))},Ue=me||N,Be=function(e,t){var n=Se({option:e,index:t});return y.createElement("li",Object(x.a)({},n,{className:r.option}),Ue(e,{selected:n["aria-selected"],inputValue:qe}))},He=!h&&!b,$e=(!_||!0===R)&&!1!==R;return y.createElement(y.Fragment,null,y.createElement("div",Object(x.a)({ref:t,className:Object(S.default)(r.root,o,Ie&&r.focused,P&&r.fullWidth,He&&r.hasClearIcon,$e&&r.hasPopupIcon)},Re(ye)),fe({id:we,disabled:b,fullWidth:!0,size:"small"===ge?"small":void 0,InputLabelProps:_e(),InputProps:{ref:Le,className:r.inputRoot,startAdornment:n,endAdornment:y.createElement("div",{className:r.endAdornment},He?y.createElement(B.a,Object(x.a)({},Te(),{"aria-label":s,title:s,className:Object(S.default)(r.clearIndicator,ke&&r.clearIndicatorDirty)}),u):null,$e?y.createElement(B.a,Object(x.a)({},De(),{disabled:b,"aria-label":Ne?p:te,title:Ne?p:te,className:Object(S.default)(r.popupIndicator,Ne&&r.popupIndicatorOpen)}),de):null)},inputProps:Object(x.a)({className:Object(S.default)(r.input,-1===Ae&&r.inputFocused),disabled:b},Ce())})),Ne&&Ve?y.createElement(Oe,{className:Object(S.default)(r.popper,O&&r.popperDisablePortal),style:{width:Ve?Ve.clientWidth:null},role:"presentation",anchorEl:Ve,open:!0},y.createElement(le,{className:r.paper},W&&0===Me.length?y.createElement("div",{className:r.loading},K):null,0!==Me.length||_||W?null:y.createElement("div",{className:r.noOptions},Z),Me.length>0?y.createElement(z,Object(x.a)({className:r.listbox},xe(),F),Me.map((function(e,t){return I?Ye({key:e.key,group:e.group,children:e.options.map((function(t,n){return Be(t,e.index+n)}))}):Be(e,t)}))):null)):null)})),le=Object(D.a)((function(e){var t;return{root:{"&$focused $clearIndicatorDirty":{visibility:"visible"},"@media (pointer: fine)":{"&:hover $clearIndicatorDirty":{visibility:"visible"}}},fullWidth:{width:"100%"},focused:{},tag:{margin:3,maxWidth:"calc(100% - 6px)"},tagSizeSmall:{margin:2,maxWidth:"calc(100% - 4px)"},hasPopupIcon:{},hasClearIcon:{},inputRoot:{flexWrap:"wrap","$hasPopupIcon &, $hasClearIcon &":{paddingRight:30},"$hasPopupIcon$hasClearIcon &":{paddingRight:56},"& $input":{width:0,minWidth:30},'&[class*="MuiInput-root"]':{paddingBottom:1,"& $input":{padding:4},"& $input:first-child":{padding:"6px 0"}},'&[class*="MuiInput-root"][class*="MuiInput-marginDense"]':{"& $input":{padding:"4px 4px 5px"},"& $input:first-child":{padding:"3px 0 6px"}},'&[class*="MuiOutlinedInput-root"]':{padding:9,"$hasPopupIcon &, $hasClearIcon &":{paddingRight:39},"$hasPopupIcon$hasClearIcon &":{paddingRight:65},"& $input":{padding:"9.5px 4px"},"& $input:first-child":{paddingLeft:6},"& $endAdornment":{right:9}},'&[class*="MuiOutlinedInput-root"][class*="MuiOutlinedInput-marginDense"]':{padding:6,"& $input":{padding:"4.5px 4px"}},'&[class*="MuiFilledInput-root"]':{paddingTop:19,paddingLeft:8,"$hasPopupIcon &, $hasClearIcon &":{paddingRight:39},"$hasPopupIcon$hasClearIcon &":{paddingRight:65},"& $input":{padding:"9px 4px"},"& $endAdornment":{right:9}},'&[class*="MuiFilledInput-root"][class*="MuiFilledInput-marginDense"]':{paddingBottom:1,"& $input":{padding:"4.5px 4px"}}},input:{flexGrow:1,textOverflow:"ellipsis",opacity:0},inputFocused:{opacity:1},endAdornment:{position:"absolute",right:0,top:"calc(50% - 14px)"},clearIndicator:{marginRight:-2,padding:4,visibility:"hidden"},clearIndicatorDirty:{},popupIndicator:{padding:2,marginRight:-2},popupIndicatorOpen:{transform:"rotate(180deg)"},popper:{zIndex:e.zIndex.modal},popperDisablePortal:{position:"absolute"},paper:Object(x.a)({},e.typography.body1,{overflow:"hidden",margin:"4px 0"}),listbox:{listStyle:"none",margin:0,padding:"8px 0",maxHeight:"40vh",overflow:"auto"},loading:{color:e.palette.text.secondary,padding:"14px 16px"},noOptions:{color:e.palette.text.secondary,padding:"14px 16px"},option:(t={minHeight:48,display:"flex",justifyContent:"flex-start",alignItems:"center",cursor:"pointer",paddingTop:6,boxSizing:"border-box",outline:"0",WebkitTapHighlightColor:"transparent",paddingBottom:6,paddingLeft:16,paddingRight:16},Object(P.a)(t,e.breakpoints.up("sm"),{minHeight:"auto"}),Object(P.a)(t,'&[aria-selected="true"]',{backgroundColor:e.palette.action.selected}),Object(P.a)(t,'&[data-focus="true"]',{backgroundColor:e.palette.action.hover}),Object(P.a)(t,"&:active",{backgroundColor:e.palette.action.selected}),Object(P.a)(t,'&[aria-disabled="true"]',{opacity:e.palette.action.disabledOpacity,pointerEvents:"none"}),t),groupLabel:{backgroundColor:e.palette.background.paper,top:-8},groupUl:{padding:0,"& $option":{paddingLeft:24}}}}),{name:"MuiAutocomplete"})(ie),se=n(17),ce=n(6),ue=n.n(ce),de=n(232),pe=n(233),fe=n(331),me=n(328),he=n(334),ve=n(877);function be(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ge(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?be(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):be(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ye(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=v()(e);if(t){var r=v()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return m()(this,n)}}var Oe=ue.a.utils,Ee=function(e){p()(n,e);var t=ye(n);function n(e){var a;return i()(this,n),a=t.call(this,e),g()(s()(a),"handleChange",(function(e,t){var n=null===t?t:t.key;a.props.setValue(n),a.props.onChange(n)})),a.options=_()(a.constructor.getOptions,(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return JSON.stringify(t)})),a.state={autocompleteIsOpen:!1},a}return u()(n,null,[{key:"getOptions",value:function(e,t,n,a,r){var o=[],i=this.constructor.getDisabledOptions(a,n,r);if(!e||!t)return o;var l=Oe.getDateFromTime(e),s=Oe.getDateFromTime(t),c=Oe.roundTo(l,n).clone();if(e>=t)return o;do{var u=c.tz(Oe.getUserTimezone()).format("HHmm"),d=Oe.getTimeDisplay(c);"0000"===u&&c>l?o.push({key:"2400",value:"Midnight",disabled:i.indexOf("2400")>=0}):o.push({key:u,value:d,disabled:i.indexOf(u)>=0}),c.add(n,"minutes")}while(c.toDate()<=s);switch(r){case"trailing":o.pop();break;case"leading":o.shift()}return o}},{key:"getDisabledOptions",value:function(e,t,n){return e.reduce((function(e,a){var r=a.start,o=a.end;if(!r||!o)return e;var i=Oe.getDateFromTime(r),l=Oe.getDateFromTime(o),s=Oe.roundTo(i,t).clone();if(r>=o)return e;"leading"===n&&s.add(t,"minutes");do{var c=s.tz(Oe.getUserTimezone()).format("HHmm");"0000"===c&&s>i?e.push("2400"):e.push(c),s.add(t,"minutes")}while("trailing"===n?s.toDate()<l:s.toDate()<=l);return e}),[])}}]),u()(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.errorMessage,a=t.isValid,o=t.min,i=t.max,l=t.step,s=t.label,c=t.disabled,u=t.disabledSpans,d=t.disabledExclude,p=t.value,f=this.state.autocompleteIsOpen,m=this.options(o,i,l,u,d),h=function(e,t){return O.a.createElement("label",{className:"select-filter__checkbox-label",htmlFor:t},e)};return O.a.createElement("div",{className:"select-filter input input--select"},O.a.createElement(de.a,{className:"select-filter__control"},O.a.createElement(pe.a,{className:"select-filter__label",htmlFor:"select-filter__menu",required:this.props.required,shrink:f||!!p},s),O.a.createElement(le,{className:"select-filter__menu",defaultValue:null!==p&&p?m.filter((function(e){return e.key===p})).shift():"",getOptionLabel:function(e){return e.value||""},options:m,onChange:this.handleChange,onClose:function(){return e.setState({autocompleteIsOpen:!1})},onOpen:function(){return e.setState({autocompleteIsOpen:!0})},getOptionSelected:function(e,t){return e.key===t},renderOption:function(e){return O.a.createElement(fe.a,{component:"div",key:e.key,disabled:e.disabled,value:e.key,className:"select-filter__menu-item"},O.a.createElement(me.a,{disableTypography:!0,primary:h(e.value,(t=e.key,"select-filter--".concat(t)))}));var t},renderInput:function(t){return O.a.createElement(he.a,r()({},t,{"aria-describedby":"select-time-helper-text",disabled:c,error:!a,fullWidth:!0,required:e.props.required}))}}),O.a.createElement(ve.a,{id:"select-time-helper-text",error:!a},n)))}}]),n}(O.a.Component);Ee.propTypes=ge(ge({},se.propTypes),{},{label:R.a.string.isRequired,value:R.a.string,min:R.a.string,max:R.a.string,step:R.a.number,onChange:R.a.func.isRequired,disabledSpans:R.a.array,disabled:R.a.bool,disabledExclude:R.a.string}),Ee.defaultProps=ge(ge({},se.defaultProps),{},{value:null,multiple:!1,min:"0000",max:"1159",step:15,disabled:!1,disabledSpans:[],disabledExclude:null});t.a=Object(D.a)((function(e){return{root:{display:"flex",flexWrap:"wrap"},formControl:{margin:e.spacing(1),minWidth:120,maxWidth:300,width:"100%"},inputLabel:{margin:0}}}),{withTheme:!0})(Object(se.withFormsy)(Ee))},16:function(e,t){e.exports=moment},171:function(e,t,n){"use strict";var a=n(0),r=n.n(a),o=n(1),i=n.n(o),l=n(15),s=n(4),c=n(13),u=n(8),d=n(24),p=n(26),f=n(76),m=a.forwardRef((function(e,t){var n=e.classes,r=e.className,o=e.color,i=void 0===o?"primary":o,l=e.value,p=e.valueBuffer,m=e.variant,h=void 0===m?"indeterminate":m,v=Object(c.a)(e,["classes","className","color","value","valueBuffer","variant"]),b=Object(f.a)(),g={},y={bar1:{},bar2:{}};if("determinate"===h||"buffer"===h)if(void 0!==l){g["aria-valuenow"]=Math.round(l),g["aria-valuemin"]=0,g["aria-valuemax"]=100;var O=l-100;"rtl"===b.direction&&(O=-O),y.bar1.transform="translateX(".concat(O,"%)")}else 0;if("buffer"===h)if(void 0!==p){var E=(p||0)-100;"rtl"===b.direction&&(E=-E),y.bar2.transform="translateX(".concat(E,"%)")}else 0;return a.createElement("div",Object(s.a)({className:Object(u.default)(n.root,n["color".concat(Object(d.a)(i))],r,{determinate:n.determinate,indeterminate:n.indeterminate,buffer:n.buffer,query:n.query}[h]),role:"progressbar"},g,{ref:t},v),"buffer"===h?a.createElement("div",{className:Object(u.default)(n.dashed,n["dashedColor".concat(Object(d.a)(i))])}):null,a.createElement("div",{className:Object(u.default)(n.bar,n["barColor".concat(Object(d.a)(i))],("indeterminate"===h||"query"===h)&&n.bar1Indeterminate,{determinate:n.bar1Determinate,buffer:n.bar1Buffer}[h]),style:y.bar1}),"determinate"===h?null:a.createElement("div",{className:Object(u.default)(n.bar,("indeterminate"===h||"query"===h)&&n.bar2Indeterminate,"buffer"===h?[n["color".concat(Object(d.a)(i))],n.bar2Buffer]:n["barColor".concat(Object(d.a)(i))]),style:y.bar2}))})),h=Object(l.a)((function(e){var t=function(t){return"light"===e.palette.type?Object(p.e)(t,.62):Object(p.a)(t,.5)},n=t(e.palette.primary.main),a=t(e.palette.secondary.main);return{root:{position:"relative",overflow:"hidden",height:4,"@media print":{colorAdjust:"exact"}},colorPrimary:{backgroundColor:n},colorSecondary:{backgroundColor:a},determinate:{},indeterminate:{},buffer:{backgroundColor:"transparent"},query:{transform:"rotate(180deg)"},dashed:{position:"absolute",marginTop:0,height:"100%",width:"100%",animation:"$buffer 3s infinite linear"},dashedColorPrimary:{backgroundImage:"radial-gradient(".concat(n," 0%, ").concat(n," 16%, transparent 42%)"),backgroundSize:"10px 10px",backgroundPosition:"0 -23px"},dashedColorSecondary:{backgroundImage:"radial-gradient(".concat(a," 0%, ").concat(a," 16%, transparent 42%)"),backgroundSize:"10px 10px",backgroundPosition:"0 -23px"},bar:{width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left"},barColorPrimary:{backgroundColor:e.palette.primary.main},barColorSecondary:{backgroundColor:e.palette.secondary.main},bar1Indeterminate:{width:"auto",animation:"$indeterminate1 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite"},bar1Determinate:{transition:"transform .".concat(4,"s linear")},bar1Buffer:{zIndex:1,transition:"transform .".concat(4,"s linear")},bar2Indeterminate:{width:"auto",animation:"$indeterminate2 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite"},bar2Buffer:{transition:"transform .".concat(4,"s linear")},"@keyframes indeterminate1":{"0%":{left:"-35%",right:"100%"},"60%":{left:"100%",right:"-90%"},"100%":{left:"100%",right:"-90%"}},"@keyframes indeterminate2":{"0%":{left:"-200%",right:"100%"},"60%":{left:"107%",right:"-8%"},"100%":{left:"107%",right:"-8%"}},"@keyframes buffer":{"0%":{opacity:1,backgroundPosition:"0 -23px"},"50%":{opacity:0,backgroundPosition:"0 -23px"},"100%":{opacity:1,backgroundPosition:"-200px -23px"}}}}),{name:"MuiLinearProgress"})(m);function v(e){var t=e.classes;return e.loading?r.a.createElement("div",{className:"".concat(t.root," page-spinner")},r.a.createElement(h,null)):null}v.propTypes={loading:i.a.bool,classes:i.a.object.isRequired},v.defaultProps={loading:!1};t.a=Object(l.a)({root:{flexGrow:1,position:"fixed",top:0,left:0,right:0,zIndex:1e3}})(v)},174:function(e,t,n){var a=n(349);e.exports=function(e,t){return a(e,t)}},175:function(e,t,n){"use strict";var a=n(55);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(0)),o=(0,a(n(107)).default)(r.default.createElement("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 00-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}),"Edit");t.default=o},190:function(e,t,n){"use strict";n(121),n(32);var a=n(0),r=n.n(a),o=n(1),i=n.n(o),l=function(e){var t=r.a.createElement("img",{src:e.image,alt:e.alt});return r.a.createElement("div",{className:"summary__image"},e.url&&e.image?r.a.createElement("a",{href:e.url,className:"summary__image-link","aria-hidden":"true"},t):t)};l.propTypes={image:i.a.string.isRequired,alt:i.a.string.isRequired,url:i.a.string},l.defaultProps={url:null};var s=function(e){return r.a.createElement("div",{className:"summary__dateline"},r.a.createElement("p",{className:"summary__dateline-date"},e.date.date),r.a.createElement("p",{className:"summary__dateline-time"},e.date.time))};s.propTypes={date:i.a.object.isRequired};var c=function(e){var t,n=e.date,a=e.body,o=e.footer,i=e.image,c=e.label,u=e.modifiers,d=e.supertitle,p=e.subtitle,f=e.title,m=e.titleUrl,h=e.uuid,v="summary ".concat(u.map((function(e){return"summary--".concat(e)})).join(" "));return r.a.createElement("article",{uuid:h,className:v},i&&r.a.createElement(l,{image:i,url:m,alt:f}),r.a.createElement("div",{className:"summary__content"},r.a.createElement("header",{className:"summary__header"},d&&r.a.createElement("p",{className:"summary__supertitle"},d),r.a.createElement("h3",{className:"summary__title"},m?r.a.createElement("a",{href:m,className:"summary__title-link"},f):f),n&&r.a.createElement(s,{date:n}),p&&r.a.createElement("p",{className:"summary__subtitle"},p)),a&&r.a.createElement("div",{className:"summary__body",dangerouslySetInnerHTML:(t=a,{__html:t})}),c&&r.a.createElement("p",{className:"summary__label"},c),e.children),o&&r.a.createElement("div",{className:"summary__footer"},o(e)))};c.propTypes={uuid:i.a.string,date:i.a.object,body:i.a.string,footer:i.a.func,image:i.a.string,label:i.a.string,modifiers:i.a.arrayOf(i.a.string),supertitle:i.a.string,subtitle:i.a.string,title:i.a.string.isRequired,titleUrl:i.a.string},c.defaultProps={date:null,body:null,modifiers:[],footer:null,image:null,label:null,subtitle:null,supertitle:null,titleUrl:null,uuid:null},t.a=c},191:function(e,t,n){"use strict";n(29),n(19),n(21),n(20);var a=n(10),r=n.n(a),o=n(9),i=n.n(o),l=n(3),s=n.n(l),c=n(11),u=n.n(c),d=n(12),p=n.n(d),f=n(5),m=n.n(f),h=n(2),v=n.n(h),b=n(0),g=n.n(b),y=n(1),O=n.n(y),E=n(15),R=n(232),C=n(233),_=n(234);function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=m()(e);if(t){var r=m()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return p()(this,n)}}var T=function(e){u()(n,e);var t=D(n);function n(){var e;r()(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),v()(s()(e),"state",{name:"Composed TextField"}),e}return i()(n,[{key:"render",value:function(){var e=this.props,t=e.label,n=e.value,a=e.id,r=e.handleChange,o="keyword-input--".concat(a);return g.a.createElement("div",{className:"keyword-filter input input--text"},g.a.createElement(R.a,{className:"keyword-filter__control"},g.a.createElement(C.a,{htmlFor:o,className:"keyword-filter__label"},t),g.a.createElement(_.a,{id:o,value:n,onChange:r})))}}]),n}(g.a.Component);T.propTypes={handleChange:O.a.func.isRequired,label:O.a.string.isRequired,value:O.a.string,id:O.a.string},T.defaultProps={value:"",id:"keyword"},t.a=Object(E.a)((function(e){return{root:{display:"flex",flexWrap:"wrap"},formControl:{margin:e.spacing(1),minWidth:120,maxWidth:300,width:"100%"},inputLabel:{margin:0}}}),{withTheme:!0})(T)},192:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(0);function r(e){var t=a.useState(e),n=t[0],r=t[1],o=e||n;return a.useEffect((function(){null==n&&r("mui-".concat(Math.round(1e5*Math.random())))}),[n]),o}},194:function(e,t,n){"use strict";n(19),n(21),n(20);var a=n(10),r=n.n(a),o=n(9),i=n.n(o),l=n(11),s=n.n(l),c=n(12),u=n.n(c),d=n(5),p=n.n(d),f=n(0),m=n.n(f),h=n(1),v=n.n(h),b=n(18),g=n(7),y=n.n(g),O=n(6),E=n.n(O),R=n(58),C=n(116);function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=p()(e);if(t){var r=p()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return u()(this,n)}}var D=E.a.select,T=E.a.constants,P=function(e){s()(n,e);var t=_(n);function n(){return r()(this,n),t.apply(this,arguments)}return i()(n,[{key:"render",value:function(){var e=this.props,t=e.id,n=e.reservation,a=e.actions;if(null===n)return null;var r=y()(n,"attributes.field_attendee_count"),o=r?m.a.createElement(R.a,{label:"Attendees",key:"attendee",values:{id:"attendee",name:r}}):null,i=y()(n,"attributes.field_status"),l=i?m.a.createElement(R.a,{label:"Status",key:"status",values:{id:"status",name:i}}):null,s=y()(n,"relationships.field_room"),c=y()(s,"attributes.room_thumbnail");return m.a.createElement(C.a,{key:t,title:y()(n,"attributes.title")||"",modifiers:[c?"with-image":"without-image"],image:c,supertitle:y()(n,"attributes.location"),footer:function(e){return a},tags:[o,l],description:y()(n,"attributes.field_group_name")})}}]),n}(f.PureComponent);P.propTypes={id:v.a.string.isRequired,reservation:v.a.object,actions:v.a.array},P.defaultProps={image:null,actions:null,reservation:null};t.a=Object(b.b)((function(e,t){var n=D.getIdentifier(T.TYPE_ROOM_RESERVATION,t.id);return{reservation:D.bundle(n)(e)}}))(P)},227:function(e,t,n){var a=n(352),r=n(439),o=n(153),i=n(113);e.exports=function(e,t){return(i(e)?a:r)(e,o(t,3))}},228:function(e,t,n){"use strict";var a=n(55);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(0)),o=(0,a(n(107)).default)(r.default.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");t.default=o},229:function(e,t,n){"use strict";n(83),n(19),n(21),n(20);var a=n(10),r=n.n(a),o=n(9),i=n.n(o),l=n(3),s=n.n(l),c=n(11),u=n.n(c),d=n(12),p=n.n(d),f=n(5),m=n.n(f),h=n(2),v=n.n(h),b=n(0),g=n.n(b),y=n(1),O=n.n(y),E=n(6),R=n.n(E);function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=m()(e);if(t){var r=m()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return p()(this,n)}}var _=function(e){u()(n,e);var t=C(n);function n(){return r()(this,n),t.apply(this,arguments)}return i()(n,[{key:"render",value:function(){return g.a.createElement("span",{className:"user-name"},g.a.createElement("strong",null,this.props.label,": "),this.props.name)}}]),n}(g.a.PureComponent);_.defaultProps={name:null,label:"Reserved for"},_.propTypes={name:O.a.string,label:O.a.string};var D=_,T=(n(87),n(7),n(46)),P=n.n(T),x=n(325),S=n.n(x),j=n(323),k=n.n(j),w=n(324),N=n.n(w),I=n(916),A=n(388),V=n(909),L=n(334);function q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=m()(e);if(t){var r=m()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return p()(this,n)}}var M=function(e){u()(n,e);var t=q(n);function n(e){var a;return r()(this,n),a=t.call(this,e),v()(s()(a),"setStatus",(function(e){a.setState({status:e})})),v()(s()(a),"getAdornment",(function(){var e=null;switch(a.state.status){case"error":e=g.a.createElement(k.a,{color:"error"});break;case"invalid":e=g.a.createElement(N.a,{color:"action"});break;case"valid":e=g.a.createElement(S.a,{color:"primary"});break;case"loading":e=g.a.createElement(A.a,{color:"primary",size:20});break;default:e=null}return e?g.a.createElement(V.a,null,e):null})),v()(s()(a),"getHelperText",(function(){switch(a.state.status){case"error":return"Error: Try Again";case"invalid":return"No account found";case"valid":return"Success!";case"loading":return"Loading...";case"empty":return"Enter username or card number";default:return null}})),v()(s()(a),"fetchRegistration",(function(e){var t=Object(I.a)(),n=s()(a).setStatus;return a.setState({currentFetch:t,status:"loading"}),fetch("/api/customer/register",{credentials:"same-origin",method:"POST",body:JSON.stringify({barcode:e})}).then((function(e){return e.text()})).then(a.handleResponse(t)).catch((function(e){n("error")}))})),v()(s()(a),"handleResponse",(function(e){return function(t){if(e===a.state.currentFetch){var n=JSON.parse(t),r=null,o="empty";n?n.uuid&&n.name?(o="valid",r=n,a.props.onSuccess(n)):(o="invalid",a.props.onFailure()):o="error",a.setState({status:o,value:r,currentFetch:null})}}})),a.state={status:"empty",value:null,currentFetch:null},a.handleChange=P()(a.handleChange,300),a}return i()(n,[{key:"handleChange",value:function(e){e?this.fetchRegistration(e):this.setState({currentFetch:null,status:"empty"})}},{key:"componentDidUpdate",value:function(e){e.value!==this.props.value&&""===this.props.value&&this.setStatus("empty")}},{key:"render",value:function(){var e=this,t="registration-lookup--".concat(this.props.name),n=this.props,a=n.disabled,r=n.required,o=n.value;return g.a.createElement(L.a,{label:"Username or Card Number",type:"text",disabled:a,onChange:function(t){e.props.onChange(t.target.value),e.handleChange(t.target.value)},className:"input input--text input--user",InputLabelProps:{className:"input__label",htmlFor:t},inputProps:{id:t,className:"input"},InputProps:{endAdornment:this.getAdornment()},error:"error"===status,helperText:this.getHelperText(),required:r,fullWidth:!0,value:o})}}]),n}(g.a.Component);M.defaultProps={disabled:!1,required:!1},M.propTypes={name:O.a.string.isRequired,onSuccess:O.a.func.isRequired,onFailure:O.a.func.isRequired,disabled:O.a.bool,required:O.a.bool,value:O.a.string};var z=M,F=n(387);function Y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=m()(e);if(t){var r=m()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return p()(this,n)}}var U=R.a.utils,B=function(e){u()(n,e);var t=Y(n);function n(e){var a;return r()(this,n),a=t.call(this,e),v()(s()(a),"getUserName",(function(){return a.state.myAccount?U.getUserName():"look up username"})),v()(s()(a),"handleChange",(function(e){a.setState({value:e}),a.props.onChange(e)})),v()(s()(a),"resetValues",(function(){a.handleChange({uuid:U.getUserUuid(),name:U.getUserName()}),a.setState({formValue:""})})),v()(s()(a),"isMyAccount",(function(){return a.state.value.uuid===U.getUserUuid()})),v()(s()(a),"resetLink",(function(){return g.a.createElement(F.a,{variant:"outlined",size:"small",onClick:a.resetValues,disabled:a.isMyAccount()},"Reset to My Account")})),a.state={myAccount:!0,value:{uuid:U.getUserUuid(),name:U.getUserName()},formValue:""},a}return i()(n,[{key:"render",value:function(){var e=this,t=this.props,n=(t.onChange,t.name),a=t.label,r=(U.userIsStaff(),U.userIsStaff());return g.a.createElement("div",{className:"select-user"},g.a.createElement(D,{label:a,name:this.state.value.name}),r&&g.a.createElement("div",null,g.a.createElement(z,{name:n,onSuccess:this.handleChange,onFailure:this.resetValues,onChange:function(t){return e.setState({formValue:t})},value:this.state.formValue}),this.resetLink()))}}]),n}(g.a.Component);B.defaultProps={label:"Account"},B.propTypes={onChange:O.a.func.isRequired,name:O.a.string.isRequired,label:O.a.string};t.a=B},25:function(e,t){e.exports=ReactDOM},253:function(e,t,n){"use strict";var a,r=n(14),o=n(81).f,i=n(49),l=n(183),s=n(62),c=n(184),u=n(86),d="".endsWith,p=Math.min,f=c("endsWith");r({target:"String",proto:!0,forced:!!(u||f||(a=o(String.prototype,"endsWith"),!a||a.writable))&&!f},{endsWith:function(e){var t=String(s(this));l(e);var n=arguments.length>1?arguments[1]:void 0,a=i(t.length),r=void 0===n?a:p(i(n),a),o=String(e);return d?d.call(t,o,r):t.slice(r-o.length,r)===o}})},254:function(e,t,n){var a=n(14),r=n(255);a({global:!0,forced:parseFloat!=r},{parseFloat:r})},255:function(e,t,n){var a=n(36),r=n(165).trim,o=n(218),i=a.parseFloat,l=1/i(o+"-0")!=-1/0;e.exports=l?function(e){var t=r(String(e)),n=i(t);return 0===n&&"-"==t.charAt(0)?-0:n}:i},28:function(e,t){e.exports=drupalSettings},307:function(e,t,n){var a=n(250),r=n(354);e.exports=function(e,t){return a(e,t,(function(t,n){return r(e,n)}))}},308:function(e,t,n){var a=n(309),r=n(246),o=n(247);e.exports=function(e){return o(r(e,void 0,a),e+"")}},309:function(e,t,n){var a=n(187);e.exports=function(e){return(null==e?0:e.length)?a(e,1):[]}},317:function(e,t,n){"use strict";var a=n(14),r=n(72).findIndex,o=n(120),i=n(73),l=!0,s=i("findIndex");"findIndex"in[]&&Array(1).findIndex((function(){l=!1})),a({target:"Array",proto:!0,forced:l||!s},{findIndex:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),o("findIndex")},323:function(e,t,n){"use strict";var a=n(55);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(0)),o=(0,a(n(107)).default)(r.default.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"}),"Error");t.default=o},324:function(e,t,n){"use strict";var a=n(55);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(0)),o=(0,a(n(107)).default)(r.default.createElement("path",{d:"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"}),"Warning");t.default=o},325:function(e,t,n){"use strict";var a=n(55);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(0)),o=(0,a(n(107)).default)(r.default.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckCircle");t.default=o},326:function(e,t,n){"use strict";n.d(t,"b",(function(){return Ja})),n.d(t,"c",(function(){return Za}));n(38),n(29),n(33),n(40),n(41),n(42),n(37),n(19),n(21),n(20),n(43);var a=n(23),r=n.n(a),o=n(10),i=n.n(o),l=n(9),s=n.n(l),c=n(3),u=n.n(c),d=n(11),p=n.n(d),f=n(12),m=n.n(f),h=n(5),v=n.n(h),b=n(2),g=n.n(b),y=n(0),O=n.n(y),E=n(1),R=n.n(E),C=n(18),_=n(16),D=n.n(_),T=n(7),P=n.n(T),x=n(88),S=n.n(x),j=n(6),k=n.n(j),w=n(28),N=n.n(w),I=n(17),A=n.n(I),V=(n(317),n(68),n(32),n(82),n(15)),L=n(920),q=n(4),M=n(13),z=n(8),F=n(529),Y=y.forwardRef((function(e,t){var n=e.active,a=e.alternativeLabel,r=void 0!==a&&a,o=e.classes,i=e.className,l=e.completed,s=e.disabled,c=(e.index,e.orientation),u=void 0===c?"horizontal":c,d=Object(M.a)(e,["active","alternativeLabel","classes","className","completed","disabled","index","orientation"]);return y.createElement("div",Object(q.a)({className:Object(z.default)(o.root,o[u],i,r&&o.alternativeLabel,n&&o.active,l&&o.completed,s&&o.disabled),ref:t},d),y.createElement("span",{className:Object(z.default)(o.line,{horizontal:o.lineHorizontal,vertical:o.lineVertical}[u])}))})),U=Object(V.a)((function(e){return{root:{flex:"1 1 auto"},horizontal:{},vertical:{marginLeft:12,padding:"0 0 8px"},alternativeLabel:{position:"absolute",top:12,left:"calc(-50% + 20px)",right:"calc(50% + 20px)"},active:{},completed:{},disabled:{},line:{display:"block",borderColor:"light"===e.palette.type?e.palette.grey[400]:e.palette.grey[600]},lineHorizontal:{borderTopStyle:"solid",borderTopWidth:1},lineVertical:{borderLeftStyle:"solid",borderLeftWidth:1,minHeight:24}}}),{name:"MuiStepConnector"})(Y),B=y.createElement(U,null),H=y.forwardRef((function(e,t){var n=e.activeStep,a=void 0===n?0:n,r=e.alternativeLabel,o=void 0!==r&&r,i=e.children,l=e.classes,s=e.className,c=e.connector,u=void 0===c?B:c,d=e.nonLinear,p=void 0!==d&&d,f=e.orientation,m=void 0===f?"horizontal":f,h=Object(M.a)(e,["activeStep","alternativeLabel","children","classes","className","connector","nonLinear","orientation"]),v=y.isValidElement(u)?y.cloneElement(u,{orientation:m}):null,b=y.Children.toArray(i),g=b.map((function(e,t){var n={index:t,active:!1,completed:!1,disabled:!1};return a===t?n.active=!0:!p&&a>t?n.completed=!0:!p&&a<t&&(n.disabled=!0),y.cloneElement(e,Object(q.a)({alternativeLabel:o,connector:v,last:t+1===b.length,orientation:m},n,e.props))}));return y.createElement(F.a,Object(q.a)({square:!0,elevation:0,className:Object(z.default)(l.root,l[m],s,o&&l.alternativeLabel),ref:t},h),g)})),$=Object(V.a)({root:{display:"flex",padding:24},horizontal:{flexDirection:"row",alignItems:"center"},vertical:{flexDirection:"column"},alternativeLabel:{alignItems:"flex-start"}},{name:"MuiStepper"})(H),W=(n(189),y.forwardRef((function(e,t){var n=e.active,a=void 0!==n&&n,r=e.alternativeLabel,o=e.children,i=e.classes,l=e.className,s=e.completed,c=void 0!==s&&s,u=e.connector,d=e.disabled,p=void 0!==d&&d,f=e.expanded,m=void 0!==f&&f,h=e.index,v=e.last,b=e.orientation,g=Object(M.a)(e,["active","alternativeLabel","children","classes","className","completed","connector","disabled","expanded","index","last","orientation"]),O=u?y.cloneElement(u,{orientation:b,alternativeLabel:r,index:h,active:a,completed:c,disabled:p}):null,E=y.createElement("div",Object(q.a)({className:Object(z.default)(i.root,i[b],l,r&&i.alternativeLabel,c&&i.completed),ref:t},g),O&&r&&0!==h?O:null,y.Children.map(o,(function(e){return y.isValidElement(e)?y.cloneElement(e,Object(q.a)({active:a,alternativeLabel:r,completed:c,disabled:p,expanded:m,last:v,icon:h+1,orientation:b},e.props)):null})));return O&&!r&&0!==h?y.createElement(y.Fragment,null,O,E):E}))),G=Object(V.a)({root:{},horizontal:{paddingLeft:8,paddingRight:8},vertical:{},alternativeLabel:{flex:1,position:"relative"},completed:{}},{name:"MuiStep"})(W),K=n(530),Q=n(102),X=n(65),J=Object(X.a)(y.createElement("path",{d:"M12 0a12 12 0 1 0 0 24 12 12 0 0 0 0-24zm-2 17l-5-5 1.4-1.4 3.6 3.6 7.6-7.6L19 8l-9 9z"}),"CheckCircle"),Z=Object(X.a)(y.createElement("path",{d:"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"}),"Warning"),ee=n(375),te=y.createElement("circle",{cx:"12",cy:"12",r:"12"}),ne=y.forwardRef((function(e,t){var n=e.completed,a=void 0!==n&&n,r=e.icon,o=e.active,i=void 0!==o&&o,l=e.error,s=void 0!==l&&l,c=e.classes;if("number"==typeof r||"string"==typeof r){var u=Object(z.default)(c.root,i&&c.active,s&&c.error,a&&c.completed);return s?y.createElement(Z,{className:u,ref:t}):a?y.createElement(J,{className:u,ref:t}):y.createElement(ee.a,{className:u,ref:t},te,y.createElement("text",{className:c.text,x:"12",y:"16",textAnchor:"middle"},r))}return r})),ae=Object(V.a)((function(e){return{root:{display:"block",color:e.palette.text.disabled,"&$completed":{color:e.palette.primary.main},"&$active":{color:e.palette.primary.main},"&$error":{color:e.palette.error.main}},text:{fill:e.palette.primary.contrastText,fontSize:e.typography.caption.fontSize,fontFamily:e.typography.fontFamily},active:{},completed:{},error:{}}}),{name:"MuiStepIcon"})(ne),re=y.forwardRef((function(e,t){var n=e.active,a=void 0!==n&&n,r=e.alternativeLabel,o=void 0!==r&&r,i=e.children,l=e.classes,s=e.className,c=e.completed,u=void 0!==c&&c,d=e.disabled,p=void 0!==d&&d,f=e.error,m=void 0!==f&&f,h=(e.expanded,e.icon),v=(e.last,e.optional),b=e.orientation,g=void 0===b?"horizontal":b,O=e.StepIconComponent,E=e.StepIconProps,R=Object(M.a)(e,["active","alternativeLabel","children","classes","className","completed","disabled","error","expanded","icon","last","optional","orientation","StepIconComponent","StepIconProps"]),C=O;return h&&!C&&(C=ae),y.createElement("span",Object(q.a)({className:Object(z.default)(l.root,l[g],s,p&&l.disabled,o&&l.alternativeLabel,m&&l.error),ref:t},R),h||C?y.createElement("span",{className:Object(z.default)(l.iconContainer,o&&l.alternativeLabel)},y.createElement(C,Object(q.a)({completed:u,active:a,error:m,icon:h},E))):null,y.createElement("span",{className:l.labelContainer},i?y.createElement(Q.a,{variant:"body2",component:"span",display:"block",className:Object(z.default)(l.label,o&&l.alternativeLabel,u&&l.completed,a&&l.active,m&&l.error)},i):null,v))}));re.muiName="StepLabel";var oe=Object(V.a)((function(e){return{root:{display:"flex",alignItems:"center","&$alternativeLabel":{flexDirection:"column"},"&$disabled":{cursor:"default"}},horizontal:{},vertical:{},label:{color:e.palette.text.secondary,"&$active":{color:e.palette.text.primary,fontWeight:500},"&$completed":{color:e.palette.text.primary,fontWeight:500},"&$alternativeLabel":{textAlign:"center",marginTop:16},"&$error":{color:e.palette.error.main}},active:{},completed:{},error:{},disabled:{},iconContainer:{flexShrink:0,display:"flex",paddingRight:8,"&$alternativeLabel":{paddingRight:0}},alternativeLabel:{},labelContainer:{width:"100%"}}}),{name:"MuiStepLabel"})(re),ie=n(118),le=y.forwardRef((function(e,t){var n=e.active,a=e.alternativeLabel,r=e.children,o=e.classes,i=e.className,l=e.completed,s=e.disabled,c=(e.expanded,e.icon),u=(e.last,e.optional),d=e.orientation,p=Object(M.a)(e,["active","alternativeLabel","children","classes","className","completed","disabled","expanded","icon","last","optional","orientation"]),f={active:n,alternativeLabel:a,completed:l,disabled:s,icon:c,optional:u,orientation:d},m=Object(ie.a)(r,["StepLabel"])?y.cloneElement(r,f):y.createElement(oe,f,r);return y.createElement(K.a,Object(q.a)({focusRipple:!0,disabled:s,TouchRippleProps:{className:o.touchRipple},className:Object(z.default)(o.root,o[d],i),ref:t},p),m)})),se=Object(V.a)({root:{width:"100%",padding:"24px 16px",margin:"-24px -16px",boxSizing:"content-box"},horizontal:{},vertical:{justifyContent:"flex-start",padding:"8px",margin:"-8px"},touchRipple:{color:"rgba(0, 0, 0, 0.3)"}},{name:"MuiStepButton"})(le),ce=n(387);function ue(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=v()(e);if(t){var r=v()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return m()(this,n)}}var de=k.a.select,pe=k.a.utils;var fe=function(e){p()(n,e);var t=ue(n);function n(){var e;i()(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r)),g()(u()(e),"state",{activeStep:0,completed:{}}),g()(u()(e),"getStepCaption",(function(t){switch(t){case 0:return e.props.roomLabel;case 1:return e.getDateLabel();case 2:return"";default:return"Unknown step"}})),g()(u()(e),"getStepDisabledState",(function(t){var n=e.props.values,a=n.date,r=n.start;switch(t){case 0:case 1:return!1;case 2:return!(a&&r&&Ja(r,a));default:return!1}})),g()(u()(e),"getDateLabel",(function(){var t=e.props.values,n=t.date,a=t.start,r=t.end;return n&&a&&r?pe.getDateTimespanDisplay({date:n,start:a,end:r}):""})),g()(u()(e),"totalSteps",(function(){return["Choose a Room","Choose a Time","Confirm Reservation"].length})),g()(u()(e),"handleNext",(function(){var t;e.isLastStep()&&!e.allStepsCompleted()?t=["Choose a Room","Choose a Time","Confirm Reservation"].findIndex((function(t,n){return!(n in e.state.completed)})):t=e.state.activeStep+1;e.setState({activeStep:t})})),g()(u()(e),"handleBack",(function(){var t=e.state.activeStep;e.setState({activeStep:t-1})})),g()(u()(e),"handleStep",(function(t){return function(){e.props.onChangeStep(t)}})),g()(u()(e),"handleComplete",(function(){var t=e.state.completed;t[e.state.activeStep]=!0,e.setState({completed:t}),e.handleNext()})),g()(u()(e),"handleReset",(function(){e.setState({activeStep:0,completed:{}})})),e}return s()(n,[{key:"completedSteps",value:function(){return Object.keys(this.state.completed).length}},{key:"isLastStep",value:function(){return this.state.activeStep===this.totalSteps()-1}},{key:"allStepsCompleted",value:function(){return this.completedSteps()===this.totalSteps()}},{key:"render",value:function(){var e=this,t=this.props,n=t.classes,a=t.step,r=t.width,o=["Choose a Room","Choose a Time","Confirm Reservation"];return O.a.createElement("div",{className:n.root},O.a.createElement($,{nonLinear:!0,activeStep:a,orientation:Object(L.c)("md",r)?"horizontal":"vertical"},o.map((function(t,a){return O.a.createElement(G,{key:t},O.a.createElement(se,{className:n.labelButton,onClick:e.handleStep(a),completed:e.state.completed[a],disabled:e.getStepDisabledState(a)},t,O.a.createElement(Q.a,{variant:"caption"},e.getStepCaption(a,e.props))))}))),O.a.createElement("div",null,this.allStepsCompleted()?O.a.createElement("div",null,O.a.createElement(Q.a,{className:n.instructions},'All steps completed - you"re finished'),O.a.createElement(ce.a,{onClick:this.handleReset},"Reset")):O.a.createElement("div",null)))}}]),n}(O.a.Component);fe.propTypes={step:R.a.number,classes:R.a.object.isRequired,onChangeStep:R.a.func.isRequired,values:R.a.object.isRequired},fe.defaultProps={step:0};var me=Object(L.a)()(Object(C.b)((function(e,t){if(!t.room)return{};var n=de.roomLabel(t.room)(e),a=de.roomLocationLabel(t.room)(e);return n||a?{roomLabel:a?"".concat(a,": ").concat(n):n}:{}}))(Object(V.a)((function(e){return{root:{width:"90%"},button:{marginRight:e.spacing(1)},completed:{display:"inline-block"},instructions:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},labelButton:{textTransform:"none",textAlign:"left",letterSpacing:0,paddingBottom:e.spacing(1),paddingTop:e.spacing(1),"&:disabled":{opacity:".5",backgroundColor:"transparent"},"& .MuiTypography-caption":{display:"block"}}}}))(fe))),he=(n(96),n(122),n(91),n(141),n(46)),ve=n.n(he),be=n(174),ge=n.n(be),ye=n(69),Oe=n(171),Ee=n(58),Re=n(116);function Ce(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=v()(e);if(t){var r=v()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return m()(this,n)}}var _e=k.a.select,De=k.a.constants,Te=function(e){p()(n,e);var t=Ce(n);function n(){return i()(this,n),t.apply(this,arguments)}return s()(n,[{key:"render",value:function(){var e,t=this.props,n=t.id,a=t.room,r=t.footer,o=P()(a,"relationships.field_room_type"),i=o.id?O.a.createElement(Ee.a,{label:"Room Type",key:"roomType",values:(e=o,{id:e.id,name:P()(e,"attributes.name")})}):null,l=P()(a,"attributes.field_capacity_max"),s=l?O.a.createElement(Ee.a,{label:"Capacity",key:"capacity",values:{id:"capacity",name:l}}):null,c=P()(a,"attributes.field_staff_use_only")?O.a.createElement(Ee.a,{label:"Staff Use Only",key:"staffUse"}):null,u=P()(a,"attributes.room_thumbnail");return O.a.createElement(Re.a,{key:n,uuid:n,modifiers:["narrow",u?"with-image":"without-image"],footer:r,image:u,supertitle:P()(a,"relationships.field_location.0.attributes.title"),title:a.attributes.title,description:P()(a,"attributes.field_text_teaser.value"),tags:[i,s,c],room:a})}}]),n}(y.PureComponent);Te.propTypes={id:R.a.string.isRequired,room:R.a.object.isRequired,footer:R.a.func},Te.defaultProps={footer:null};var Pe,xe=Object(C.b)((function(e,t){var n=_e.getIdentifier(De.TYPE_ROOM,t.id);return{room:_e.bundle(n)(e)}}))(Te),Se=(n(114),n(57)),je=n.n(Se),ke=n(191),we=n(89),Ne=n(117),Ie=n(108),Ae=n(148),Ve=n(97);function Le(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function qe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Le(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Le(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Me(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=v()(e);if(t){var r=v()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return m()(this,n)}}var ze=k.a.constants,Fe=k.a.utils,Ye=ze,Ue="now",Be=(Pe={},g()(Pe,Ye.TYPE_LOCATION,"Location"),g()(Pe,Ye.TYPE_ROOM_TYPE,"Room Type"),g()(Pe,"attendees","Number of Attendees"),g()(Pe,"duration","Duration"),g()(Pe,"time","Time of Day"),g()(Pe,Ye.KEYWORD,"Keyword"),Pe),He=[{key:"null",value:"Any"},{key:"15",value:"15 min."},{key:"30",value:"30 min."},{key:"60",value:"1 hr."},{key:"120",value:"2 hrs."},{key:"240",value:"4 hrs."}],$e=[{key:null,value:"Any"},{key:"morning",value:"Morning"},{key:"afternoon",value:"Afternoon"},{key:"evening",value:"Evening"}],We=function(e){p()(n,e);var t=Me(n);function n(e){var a;return i()(this,n),a=t.call(this,e),g()(u()(a),"onFilterChange",(function(e,t){var n=qe(qe({},a.props.filters),{},g()({},e,t));a.props.onChange(n)})),g()(u()(a),"onFilterNow",(function(e){var t=a.props.filters,n=e,r=t.duration||30,o=Fe.getUserStartOfDay(),i=parseInt(D()().tz(Fe.getUserTimezone()).format("HHmm"),10),l="afternoon";i<1200?l="morning":i>1700&&(l="evening");var s=qe(qe({},t),{},{duration:r,date:o,time:l,now:n});a.props.onChange(s)})),g()(u()(a),"onInputChange",(function(e){return function(t){a.onFilterChange(e,t.target.value)}})),g()(u()(a),"onDateChange",(function(e){a.onFilterChange(Ye.DATE,e)})),g()(u()(a),"onAttendeesChange",(function(e){a.onFilterChange("attendees",e)})),g()(u()(a),"onNowChange",(function(){a.onFilterNow(!a.props.filters.now)})),a.state={default_applied:!1},a}return s()(n,[{key:"componentDidUpdate",value:function(){if(!this.state.default_applied&&!this.props.loading){var e=this.props.filters,t=P()(N.a,"intercept.room_reservations.default_locations",[]);t.length>0&&0===e[Ye.TYPE_LOCATION].length&&this.onFilterChange(Ye.TYPE_LOCATION,t),this.setState({default_applied:!0})}}},{key:"render",value:function(){var e=this,t=this.props,n=t.dateLimits,a=t.showDate,r=t.filters,o=function(e){return je()(e,(function(e,t){return{key:t,value:e,label:Be[t],type:t}}))}(r);a||(o=o.filter((function(e){return e.key!==Ye.DATE})));var i=n.maxDate,l=n.minDate;n.maxDateDescription;return O.a.createElement("div",{className:""},O.a.createElement(A.a,{className:""},O.a.createElement("div",{className:"l--subsection"},O.a.createElement("h4",{className:"section-title--secondary"},"Filter Rooms By"),O.a.createElement("div",{className:"form-item"},O.a.createElement(ke.a,{handleChange:this.onInputChange(Ye.KEYWORD),value:r[Ye.KEYWORD],name:Ye.KEYWORD,label:Be[Ye.KEYWORD]})),O.a.createElement("div",{className:"form-item"},O.a.createElement(Ie.a,{handleChange:this.onDateChange,defaultValue:null,value:r[Ye.DATE]||null,maxDate:i,minDate:l,name:Ye.DATE,clearable:!0,validations:"isFutureDate",validationError:"Date must be in the future",disabled:r.now})),O.a.createElement("div",{className:"form-item"},O.a.createElement(we.a,{multiple:!0,type:Ye.TYPE_LOCATION,name:Ye.TYPE_LOCATION,handleChange:this.onInputChange(Ye.TYPE_LOCATION),value:r[Ye.TYPE_LOCATION],label:Be[Ye.TYPE_LOCATION],chips:!0,shouldFetch:!1})),O.a.createElement("div",{className:"form-item"},O.a.createElement(Ne.a,{name:"time",handleChange:this.onInputChange("time"),value:r.time,label:Be.time,disabled:r.now||!r[Ye.DATE],options:$e,clearable:!0})),O.a.createElement("div",{className:"form-item"},O.a.createElement(Ne.a,{name:"duration",handleChange:this.onInputChange("duration"),value:r.duration,label:Be.duration,options:He,disabled:!r.now&&!r[Ye.DATE],clearable:!0})),O.a.createElement("div",{className:"form-item"},O.a.createElement(we.a,{multiple:!0,type:Ye.TYPE_ROOM_TYPE,name:Ye.TYPE_ROOM_TYPE,handleChange:this.onInputChange(Ye.TYPE_ROOM_TYPE),value:r[Ye.TYPE_ROOM_TYPE],label:Be[Ye.TYPE_ROOM_TYPE],chips:!0})),O.a.createElement("div",{className:"form-item"},O.a.createElement(Ae.a,{label:Be.attendees,value:r.attendees,onChange:this.onAttendeesChange,name:"attendees",min:0,int:!0}))),O.a.createElement("div",{className:"l--subsection"},O.a.createElement("h4",{className:"section-title--secondary"},"Show Available"),O.a.createElement(Ve.a,{label:"Available Now",checked:r.now,onChange:function(){return e.onNowChange()},value:Ue,name:Ue}))))}}]),n}(y.PureComponent);We.propTypes={loading:R.a.bool,onChange:R.a.func.isRequired,showDate:R.a.bool,filters:R.a.object},We.defaultProps={loading:!1,showDate:!0,filters:{}};var Ge=We,Ke=n(146);function Qe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=v()(e);if(t){var r=v()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return m()(this,n)}}var Xe=function(e){p()(n,e);var t=Qe(n);function n(){return i()(this,n),t.apply(this,arguments)}return s()(n,[{key:"render",value:function(){var e,t=this.props,n=t.rooms,a=t.teaserProps,o=t.TeaserComponent,i=t.loading,l=n.length>0?O.a.createElement(Ke.a,{items:(e=n,e.map((function(e){return{key:e.data.id,node:O.a.createElement(o,r()({uuid:e.data.id,id:e.data.id,className:"room-teaser"},a))}}))),key:0}):!i&&O.a.createElement("div",{key:0},O.a.createElement("p",null,"No rooms were found."),O.a.createElement("p",null,"Try:",O.a.createElement("ul",null,O.a.createElement("li",null,"Confirming the spelling of your search words."),O.a.createElement("li",null,"Using other words for the subject of your searches."))));return O.a.createElement("div",{className:"rooms-list"},l)}}]),n}(O.a.PureComponent);Xe.propTypes={rooms:R.a.arrayOf(Object).isRequired,TeaserComponent:R.a.func,teaserProps:R.a.object,loading:R.a.bool},Xe.defaultProps={TeaserComponent:xe,teaserProps:{},loading:!1};var Je=Xe,Ze=n(60),et=n(855);function tt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=v()(e);if(t){var r=v()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return m()(this,n)}}function nt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function at(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nt(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var rt=k.a.constants,ot=k.a.api,it=k.a.select,lt=k.a.utils,st=rt,ct=["image_primary","image_primary.field_media_image"];function ut(e){var t=at(at(at(at({},function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return{published:{path:"status",value:e?"1":"0"}}}(!0)),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.attendees?{capacity:{path:"field_capacity_max",value:e.attendees,operator:">="}}:{}}(e)),function(){var e={staffOnly:{path:"field_staff_use_only",value:!1}};return lt.userIsStaff()&&(e={}),e}()),{locations:{type:"group",conjunction:"AND"},withLocation:{path:"field_location.id",value:null,operator:"<>",memberOf:"locations"},onlyBranchLocation:{path:"field_location.field_branch_location",value:"1",memberOf:"locations"}});return e?([{id:st.TYPE_ROOM_TYPE,path:"field_room_type.id",conjunction:"OR"},{id:st.TYPE_LOCATION,path:"field_location.id",conjunction:"OR"}].forEach((function(n){if(e[n.id]&&e[n.id].length>0)if("AND"===n.conjunction){var a="".concat(n.id,"-group");t[a]={type:"group",conjunction:n.conjunction},e[n.id].forEach((function(e,r){var o="".concat(n.id,"-").concat(r);t[o]={path:n.path,value:e,memberOf:a}}))}else t[n.id]={path:n.path,value:e[n.id],operator:"IN"}})),t):t}var dt=function(e){p()(n,e);var t=tt(n);function n(e){var a,r;return i()(this,n),r=t.call(this,e),g()(u()(r),"onlyAvailable",(function(e){var t=e.rooms,n=lt.userIsStaff(),a=lt.userIsManager();return function(e){var r=P()(e,"data.id");return!(!a&&!P()(e,"data.attributes.field_reservable_online"))&&(!t[r]||(n?!t[r].has_reservation_conflict:!t[r].has_reservation_conflict&&!t[r].has_open_hours_conflict))}})),g()(u()(r),"getRoomAvailabilityQuery",(function(){var e={rooms:r.props.rooms.map((function(e){return e.data.id})),duration:30};r.props.filters.duration&&(e.duration=r.props.filters.duration);var t=lt.getUserTimezone();if(r.props.filters.now){var n=lt.roundTo(new Date,15,"minutes","ceil").tz(t);e.start=n.clone(),e.end=n.clone().add(e.duration,"minute")}else if(r.props.filters[st.DATE]){var a=D.a.tz(r.props.filters[st.DATE],t);switch(e.start=a.clone().hour(0),e.end=a.clone().endOf("day"),r.props.filters.time){case"morning":e.end.hour(11);break;case"afternoon":e.start.hour(12),e.end.hour(16);break;case"evening":e.start.hour(17),e.end.hour(23)}}return e})),g()(u()(r),"handleRoomSelect",(function(e){r.props.onChangeRoom(e),r.props.onChangeStep(1)})),g()(u()(r),"handleFilterChange",(function(e){r.props.onChangeFilters(e),r.shouldFetchRooms(r.props.filters,e)&&r.doFetchRooms(e)})),g()(u()(r),"shouldFetchRooms",(function(e,t){return P()(e,"".concat(st.TYPE_LOCATION,".length"))!==P()(t,"".concat(st.TYPE_LOCATION,".length"))||P()(e,"".concat(st.TYPE_ROOM_TYPE,".length"))!==P()(t,"".concat(st.TYPE_ROOM_TYPE,".length"))||e.attendees!==t.attendees})),g()(u()(r),"showAvailable",(function(e){var t=r.props,n=t.availability,a=t.filters;return a.now||a[st.DATE]?0===n.rooms.length||n.loading?e:e.filter(r.onlyAvailable(n)):e})),g()(u()(r),"renderDetailButton",(function(e){var t=r.props.onViewRoomDetail;return O.a.createElement(ce.a,{variant:"outlined",size:"small",color:"primary",className:"action-button__button",onClick:function(){return t(e.uuid)}},"View Details")})),r.state={date:e.date,filters:e.filters,formValues:(a={},g()(a,st.TYPE_ROOM,null),g()(a,"date",null),g()(a,"start",D()().startOf("hour").add(1,"h").toDate()),g()(a,"end",D()().startOf("hour").add(2,"h").toDate()),g()(a,"attendees",1),g()(a,"groupName",""),g()(a,"meeting",!1),g()(a,st.TYPE_MEETING_PURPOSE,null),g()(a,"meetingDetails",""),g()(a,"refreshments",!1),g()(a,"refreshmentsDesc",""),g()(a,"user",lt.getUserUuid()),a),room:{current:null,previous:null,exiting:!1},availabilityShouldUpdate:!1},r.doFetchRooms=ve()(r.doFetchRooms,500).bind(u()(r)),r}return s()(n,[{key:"componentDidMount",value:function(){this.doFetchRooms(this.props.filters,this.props.view,this.props.calView,this.props.date),this.mounted=!0}},{key:"componentDidUpdate",value:function(e){var t=this,n=this.state.availabilityShouldUpdate,a=this.props,r=a.availability,o=a.fetchAvailability,i=a.filters,l=a.rooms,s=function(n){return!ge()(e[n],t.props[n])};!i[st.DATE]&&!0!==i.now||!s("rooms")&&!s("filters")||this.setState({availabilityShouldUpdate:!0}),l.length>0&&n&&!r.loading&&(this.setState({availabilityShouldUpdate:!1}),o(this.getRoomAvailabilityQuery()))}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"onExited",value:function(){this.setState({room:at(at({},this.state.room),{},{exiting:!1})})}},{key:"handleFormChange",value:function(e){var t=this.state.room;e[st.TYPE_ROOM]!==this.state.formValues[st.TYPE_ROOM]&&(t={current:e[st.TYPE_ROOM],previous:this.state.room.current,exiting:this.state.room.current!==this.state.room.previous}),this.setState({room:t,formValues:e})}},{key:"doFetchRooms",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.filters,t=this.props.fetchRooms;t({filters:ut(e),include:ct,sort:{title:{path:"title"}},replace:!0,headers:{"X-Consumer-ID":k.a.consumer}})}},{key:"render",value:function(){var e=this,t=this.handleFilterChange,n=this.handleRoomSelect,a=this.props,r=a.dateLimits,o=a.rooms,i=a.roomsLoading,l=a.filters,s=this.state.room[this.state.room.exiting?"previous":"current"];return O.a.createElement("div",{className:"l--sidebar-before"},O.a.createElement("div",{className:"l__main"},O.a.createElement("div",{className:"l__secondary"},O.a.createElement(Ge,{onChange:t,filters:l,dateLimits:r,loading:i})),O.a.createElement("div",{className:"l__primary"},O.a.createElement(Oe.a,{loading:i}),O.a.createElement(Je,{rooms:this.showAvailable(o),teaserProps:{footer:function(t){var a=P()(t,"room.attributes.field_reservable_online"),r=P()(t,"room.attributes.field_reservation_phone_number"),o=null;if(!a){if(!lt.userIsManager()){var i=r?O.a.createElement("a",{href:"tel:".concat(r),className:"call-prompt__link"},r):null;return O.a.createElement("p",{className:"call-prompt"},O.a.createElement("span",{className:"call-prompt__text"},"Call for information")," ",i)}o=null}return O.a.createElement("div",{className:"action-button"},O.a.createElement(ce.a,{variant:"contained",size:"small",color:"primary",className:"action-button__button",onClick:function(){return n(t.uuid)}},"Reserve"),e.renderDetailButton(t),o)}},loading:i}),(this.state.room.previous||this.state.room.current)&&O.a.createElement(et.a,{direction:"up",in:!this.state.room.exiting,onExited:this.onExited,mountOnEnter:!0},O.a.createElement(xe,{uuid:s,id:s,className:"room-teaser"})),O.a.createElement(ye.a,{loading:i}))))}}]),n}(O.a.Component);dt.propTypes={availability:R.a.object,filters:R.a.object,rooms:R.a.arrayOf(Object).isRequired,roomsLoading:R.a.bool.isRequired,fetchRooms:R.a.func.isRequired,onViewRoomDetail:R.a.func.isRequired,onChangeFilters:R.a.func.isRequired,onChangeRoom:R.a.func.isRequired,onChangeStep:R.a.func.isRequired},dt.defaultProps={availability:{},filters:{}};var pt=Object(C.b)((function(e,t){return{rooms:it.roomsAscending(e).filter((n=t.filters[st.KEYWORD],function(e){if(!n)return!0;var t=P()(e,"data.attributes.title").toLowerCase(),a=P()(e,"data.attributes.field_text_teaser.value"),r=P()(e,"data.attributes.field_room_standard_equipment"),o=[t,a,r.length>0?r.reduce((function(e,t){return e.concat(t)})):""].reduce((function(e,t){return e.concat(t.toLowerCase().replace(/<.*?>/g,"").replace(/[^a-zA-Z 0-9\-]/g,""))})),i=n.toLowerCase();return o.indexOf(i)>=0})),roomsLoading:it.recordsAreLoading(st.TYPE_ROOM)(e),calendarRooms:[]};var n}),(function(e){return{fetchRooms:function(t){e(ot[st.TYPE_ROOM].fetchAll(t))},fetchUser:function(t){e(ot[st.TYPE_USER].fetchAll(t))}}}))(Object(Ze.a)(dt)),ft=(n(253),n(227)),mt=n.n(ft),ht=n(158);function vt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function bt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vt(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function gt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=v()(e);if(t){var r=v()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return m()(this,n)}}var yt=k.a.constants,Ot=k.a.utils,Et=yt,Rt=function(e,t){if(t instanceof Date==!1||e instanceof Date==!1)return t;var n=new Date;return n.setTime(e.getTime()),n.setHours(t.getHours()),n.setMinutes(t.getMinutes()),n.setSeconds(t.getSeconds()),n.setMilliseconds(t.getMilliseconds()),n},Ct=function(e,t){return Rt(t,e)};Object(I.addValidationRule)("isRequired",(function(e,t){return""!==t})),Object(I.addValidationRule)("isPositive",(function(e,t){return t>0})),Object(I.addValidationRule)("isRequiredIfServingRefreshments",(function(e,t){return!e.refreshments||""!==t})),Object(I.addValidationRule)("isRequiredIfMeeting",(function(e,t){return!e.meeting||""!==t})),Object(I.addValidationRule)("isFutureTime",(function(e,t){return null===t||Ja(t,e[Et.DATE])})),Object(I.addValidationRule)("isLessThanMaxDate",(function(e,t){return null===t||Za(t,e[Et.DATE])})),Object(I.addValidationRule)("isAfterStart",(function(e,t){return null===t||t>e.start})),Object(I.addValidationRule)("isOnOrAfterStart",(function(e,t){return null===t||t>=e.start})),Object(I.addValidationRule)("isBeforeEnd",(function(e,t){return null===t||t<e.end})),Object(I.addValidationRule)("isOnOrBeforeEnd",(function(e,t){return null===t||t<=e.end}));var _t=function(e){p()(n,e);var t=gt(n);function n(e){var a;return i()(this,n),a=t.call(this,e),g()(u()(a),"resetForm",(function(){P()(u()(a),"form.current")&&a.form.current.reset(a.props.values)})),g()(u()(a),"getRoomAvailabilityQuery",(function(){var e=a.props,t=e.values,n=e.room,r=Ot.getDateFromTime(t.start,t[Et.DATE]),o=Ot.getDateFromTime(t.end,t[Et.DATE]),i={rooms:[n]};return i.duration=Ot.getDurationInMinutes(r,o),i.start=r,i.end=o,i})),g()(u()(a),"updateValue",(function(e,t){var n=bt(bt({},a.props.values),{},g()({},e,t));a.props.onChange(n)})),g()(u()(a),"updateValues",(function(e){var t=bt(bt({},a.props.values),e);a.props.onChange(t)})),a.state={expand:{meeting:!1},canSubmit:!1},a.form=O.a.createRef(),a.toggleState=a.toggleState.bind(u()(a)),a.onDateChange=a.onDateChange.bind(u()(a)),a.onInputChange=a.onInputChange.bind(u()(a)),a.onValueChange=a.onValueChange.bind(u()(a)),a.disableButton=a.disableButton.bind(u()(a)),a.enableButton=a.enableButton.bind(u()(a)),a}return s()(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.fetchAvailability,n=e.values,a=e.room,r=n.start,o=n.end,i=n.date,l=!!(a&&r&&o&&i);this.mounted=!0,l&&t(this.getRoomAvailabilityQuery())}},{key:"componentDidUpdate",value:function(e){var t=this,n=this.props,a=n.fetchAvailability,r=n.values,o=n.room,i=r.start,l=r.end,s=r.date,c=!!(o&&i&&l&&s),u=e.room!==o||e.values.end!==l||e.values.start!==i||e.values.date!==s;c&&u&&i<l&&a(this.getRoomAvailabilityQuery(),(function(){return t.resetForm()})),u&&this.resetForm()}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"onInputChange",value:function(e){var t=this;return function(n){t.updateValue(e,n.target.value)}}},{key:"onValueChange",value:function(e){var t=this;return function(n){t.updateValue(e,n)}}},{key:"onDateChange",value:function(e){var t,n=Ct(this.props.values.start,e),a=Ct(this.props.values.end,e);this.updateValues((t={},g()(t,Et.DATE,e),g()(t,"start",n),g()(t,"end",a),t))}},{key:"onStartChange",value:function(e){var t,n=Rt(e,this.props.values.start),a=Rt(e,this.props.values.end);this.updateValues((t={},g()(t,Et.DATE,e),g()(t,"start",n),g()(t,"end",a),t))}},{key:"onSwitchChange",value:function(e){var t=this;return function(n){t.updateValue(e,n.target.checked),t.setState({expand:bt(bt({},t.state.expand),{},g()({},e,n.target.checked))})}}},{key:"disableButton",value:function(){this.setState({canSubmit:!1})}},{key:"enableButton",value:function(){this.setState({canSubmit:!0})}},{key:"toggleState",value:function(e){var t=this;return function(){t.setState({expand:bt(bt({},t.state.expand),{},g()({},e,!t.state.expand[e]))})}}},{key:"expand",value:function(e){var t=this;return function(){t.setState({expand:bt(bt({},t.state.expand),{},g()({},e,!0))})}}},{key:"collapse",value:function(e){var t=this;return function(){t.setState({expand:bt(bt({},t.state.expand),{},g()({},e,!1))})}}},{key:"render",value:function(){var e=this,t=this.props,n=t.availability,a=t.disabledTimespans,r=t.values,o=t.min,i=t.max,l=t.dateLimits,s=t.step,c=t.onSubmit,u=t.room,d=null!==o&&o===i||P()(n,"rooms.".concat(u,".is_closed")),p=P()(n,"rooms.".concat(u,".has_max_duration_conflict")),f=!Ot.userIsStaff()&&d?g()({},Et.DATE,"Location is closed"):{},m=Ot.userIsStaff()?"has_reservation_conflict":"has_conflict",h="Room is not available at this time",v=l.maxDate,b=l.minDate,y=l.maxDateDescription;return!Ot.userIsStaff()&&d&&(h="Location is closed"),!Ot.userIsStaff()&&p&&(h="Reservation exceeds maximum duration"),(P()(n,"rooms.".concat(u,".").concat(m))||!Ot.userIsStaff()&&d||!Ot.userIsStaff()&&p)&&(f.start=h,f.end=h),O.a.createElement("div",{className:"form"},O.a.createElement(A.a,{className:"form__main",ref:this.form,onValidSubmit:this.onOpenDialog,onValid:this.enableButton,onInvalid:this.disableButton,validationErrors:f},O.a.createElement("div",{className:"l--subsection"},O.a.createElement("h4",{className:"section-title--secondary"},"Choose a Time"),O.a.createElement("div",{className:"form-item"},O.a.createElement(Ie.a,{handleChange:this.onDateChange,defaultValue:null,value:r[Et.DATE],name:Et.DATE,required:!0,clearable:!1,validations:"isFutureDate,isLessThanMaxDate",validationErrors:{isFutureDate:"Date must be in the future",isLessThanMaxDate:y},maxDate:v,minDate:b,helperText:y}),Ot.userIsStaff()&&O.a.createElement(Ve.a,{label:"Show Closed Hours",checked:r.showClosed,onChange:function(){return e.updateValue("showClosed",!r.showClosed)},value:"showClosed",name:"showClosed"})),O.a.createElement("div",{className:"form-item"},O.a.createElement(ht.a,{clearable:!0,label:"Start Time",value:r.start,onChange:this.onValueChange("start"),name:"start",required:!0,validations:"isFutureTime",validationError:"Must be in the future",min:o,max:i,step:s,disabled:!Ot.userIsStaff()&&d,disabledSpans:a,disabledExclude:"trailing"})),O.a.createElement("div",{className:"form-item"},O.a.createElement(ht.a,{clearable:!0,label:"End Time",value:r.end,onChange:this.onValueChange("end"),name:"end",required:!0,validations:{isFutureTime:!0,isAfterStart:!0},validationErrors:{isFutureTime:"Must be in the future",isAfterStart:"Must be after start time"},min:o,max:i,step:s,disabled:!Ot.userIsStaff()&&d,disabledSpans:a,disabledExclude:"leading"}))),O.a.createElement("div",{className:"form__actions"},O.a.createElement(ce.a,{variant:"contained",size:"small",color:"primary",type:"submit",className:"button button--primary",disabled:!this.state.canSubmit,onClick:function(e){e.preventDefault(),c()}},"Next"))))}}]),n}(y.PureComponent);_t.propTypes={values:R.a.shape({date:R.a.instanceOf(Date),start:R.a.string,end:R.a.string}),onChange:R.a.func.isRequired},_t.defaultProps={values:{date:Ot.roundTo(new Date).toDate(),start:null,end:null},step:15,min:null,max:null};var Dt=Object(C.b)((function(e,t){return{}}))(Object(Ze.a)(_t)),Tt=(n(363),n(202)),Pt=n(198),xt=n.n(Pt),St=n(67),jt=n(200),kt=n.n(jt),wt=n(201),Nt=n.n(wt),It=n(876);function At(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Vt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=v()(e);if(t){var r=v()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return m()(this,n)}}var Lt=k.a.utils,qt=function(e){var t=e.event;t.data;return O.a.createElement("div",{className:"calendar-event calendar-event--disabled"},O.a.createElement("p",{className:"calendar-event__title"},t.title))},Mt=function(e){p()(n,e);var t=Vt(n);function n(){return i()(this,n),t.apply(this,arguments)}return s()(n,[{key:"render",value:function(){var e=this.props,t=e.localizer.messages,n=e.label,a=e.maxDate,r=e.minDate,o=e.date,i=D()(o).format("YYYY-MM-DD");return O.a.createElement("div",{className:"rbc-toolbar"},O.a.createElement("span",{className:"rbc-btn-group"},O.a.createElement(ce.a,{variant:"contained",color:"primary",size:"small",className:"rbc-btn rbc-btn--today",onClick:this.navigate.bind(null,St.b.TODAY)},t.today)),O.a.createElement("div",{className:"rbc-toolbar__heading"},O.a.createElement(It.a,{className:"rbc-toolbar__pager-button rbc-toolbar__pager-button--prev",onClick:this.navigate.bind(null,St.b.PREVIOUS),color:"primary","aria-label":"Previous",variant:"flat",disabled:r&&r>=i},O.a.createElement(kt.a,null)),O.a.createElement("h2",{className:"rbc-toolbar__label"},n),O.a.createElement(It.a,{className:"rbc-toolbar__pager-button rbc-toolbar__pager-button--next",onClick:this.navigate.bind(null,St.b.NEXT),color:"primary","aria-label":"Next",disabled:a&&a<=i},O.a.createElement(Nt.a,null))),O.a.createElement("span",{className:"rbc-btn-group rbc-btn-group--views"},this.viewNamesGroup(t)))}}]),n}(xt.a),zt=function(e){p()(n,e);var t=Vt(n);function n(e){var a;return i()(this,n),a=t.call(this,e),g()(u()(a),"getDateFromTime",(function(e){var t=parseInt(e.slice(0,2),10),n=parseInt(e.slice(2),10),a=new Date("Jan 1, 2000 00:00:00");return a.setHours(t),a.setMinutes(n),a})),g()(u()(a),"startDateAccessor",(function(e){return function(t){var n=D()(Lt.dateFromDrupal(t[e])),r=D()(a.props.date).tz(Lt.getUserTimezone()).startOf("day");return D.a.max(n,r).toDate()}})),g()(u()(a),"endDateAccessor",(function(e){return function(t){var n=D()(Lt.dateFromDrupal(t[e])),r=D()(a.props.date).tz(Lt.getUserTimezone()).endOf("day").subtract(1,"seconds"),o=D.a.min(n,r);return 0===o.get("hour")&&o.subtract(1,"seconds"),o.toDate()}})),a.state={showEvent:!1,selectedEvent:null},a.onSelectEvent=a.onSelectEvent.bind(u()(a)),a.onHideEvent=a.onHideEvent.bind(u()(a)),a}return s()(n,[{key:"onSelectEvent",value:function(e){this.setState({showEvent:!0,selectedEvent:e.data.id})}},{key:"onHideEvent",value:function(){this.setState({showEvent:!1})}},{key:"render",value:function(){var e,t=this.props,n=t.availability,a=t.date,o=t.defaultDate,i=t.isClosed,l=t.closedMessage,s=t.min,c=t.max,u=t.room,d=this.startDateAccessor("start"),p=this.endDateAccessor("end"),f=[],m=P()(n,"rooms.".concat(u,".dates"));return m&&(f=je()(m,(function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?At(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):At(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({key:t,title:e.message||"Booked"},e)}))),i&&f.push({start:Lt.dateToDrupal(D()(a).tz(Lt.getUserTimezone()).startOf("day").toDate()),end:Lt.dateToDrupal(D()(a).tz(Lt.getUserTimezone()).endOf("day").subtract(1,"seconds").toDate()),allDay:!1,title:l}),O.a.createElement(O.a.Fragment,null,O.a.createElement(Tt.a,{className:"rbc-calendar--no-overlap",components:(e=this.props,{event:qt,toolbar:function(t){return O.a.createElement(Mt,r()({},e,t))}}),date:a,defaultDate:o,defaultView:this.props.defaultView,elementProps:{style:{height:"calc(100vh - 26rem)"}},eventPropGetter:function(){return{className:"rbc-event--disabled"}},endAccessor:p,events:f,max:this.getDateFromTime(c&&"2400"!==c&&"0000"!==c?c:"2359"),min:this.getDateFromTime(s||"0000"),onNavigate:this.props.onNavigate,onView:this.props.onView,step:15,startAccessor:d,timeslots:4,timeZoneName:Lt.getUserTimezone(),titleAccessor:function(){return"Booked"},views:["day"]}))}}]),n}(O.a.Component);zt.propTypes={onNavigate:R.a.func,onView:R.a.func,date:R.a.instanceOf(Date),defaultDate:R.a.instanceOf(Date),defaultView:R.a.string,min:R.a.string,max:R.a.string},zt.defaultProps={onNavigate:null,onView:null,date:Lt.getUserTimeNow(),defaultDate:Lt.getUserTimeNow(),defaultView:"day",min:"0000",max:"2359"};var Ft=zt;function Yt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Ut(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Yt(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Bt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=v()(e);if(t){var r=v()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return m()(this,n)}}var Ht=k.a.constants,$t=k.a.select,Wt=k.a.utils,Gt=Ht,Kt=P()(N.a,"intercept.room_reservations.last_reservation_before_closing","15"),Qt=function(e){p()(n,e);var t=Bt(n);function n(e){var a;return i()(this,n),a=t.call(this,e),g()(u()(a),"onlyTodaysReservations",(function(e){return Wt.dateFromDrupal(e.start)<D()(P()(u()(a),"props.formValues.date")).tz(Wt.getUserTimezone()).endOf("day")})),g()(u()(a),"getRoomAvailabilityQuery",(function(){var e={rooms:[a.props.room],duration:15},t=Wt.getUserTimezone(),n=D.a.tz(a.props.formValues[Gt.DATE],t);return e.start=n.clone().startOf("day"),e.end=n.clone().endOf("day"),e})),g()(u()(a),"getDefaultValues",(function(){var e=a.props,t=e.formValues,n=(e.room,e.event),r=e.eventRecord,o=(e.locationRecord,e.filters),i=S()(t,["date","start","end"]),l=t.showClosed;if(n&&!r)return i;var s=Wt.roundTo(new Date).tz(Wt.getUserTimezone()),c=o.duration;return i.date||(i.date=o.date||Wt.getUserTimeNow()),i.start&&i.end||!(Wt.userIsStaff()&&l||a.isWithinOpenHours(s))||(i.start||(i.start=s.format("HHmm")),i.end||(i.end=s.add(c||30,"minutes").format("HHmm"))),i})),g()(u()(a),"getDisabledTimespans",(function(){var e=P()(u()(a),"props.availability.rooms.".concat(a.props.room,".dates"));return e?je()(mt()(e,a.onlyTodaysReservations),(function(e){return{start:Wt.getTimeFromDate(Wt.dateFromDrupal(e.start)),end:Wt.getTimeFromDate(Wt.dateFromDrupal(e.end))}})):[]})),g()(u()(a),"getHours",(function(){var e=a.props.hours;return e?{min:e.min,max:e.max.endsWith("00")?String(e.max-40-Kt):String(e.max-Kt)}:{min:null,max:null}})),g()(u()(a),"isWithinOpenHours",(function(e){var t=a.props.hours;if(null==t)return!1;var n=function(e){return parseInt(e,10)/1e3},r=n(e.format("HHmm")),o=n(t.min),i=n(t.max);return o<i&&r>o&&r<i})),g()(u()(a),"handleCalendarNavigate",(function(e){a.props.onChange(Ut(Ut({},a.props.formValues),{},g()({},Gt.DATE,e)))})),a.state={availabilityShouldUpdate:!1,showClosedHours:!1},a}return s()(n,[{key:"componentDidMount",value:function(){this.props.onChange(this.getDefaultValues()),this.props.room&&(this.setState({availabilityShouldUpdate:!1}),this.props.fetchAvailability(this.getRoomAvailabilityQuery()))}},{key:"componentDidUpdate",value:function(e){var t=this.state.availabilityShouldUpdate,n=this.props,a=n.availability,r=n.fetchAvailability,o=n.room;ge()(e.formValues[Gt.DATE],this.props.formValues[Gt.DATE])||this.setState({availabilityShouldUpdate:!0}),o&&t&&!a.loading&&(this.setState({availabilityShouldUpdate:!1}),r(this.getRoomAvailabilityQuery()))}},{key:"render",value:function(){var e=this.props,t=e.availability,n=e.onChange,a=e.isLoading,r=e.formValues,o=e.onChangeStep,i=e.hours,l=e.room,s=e.userStatus,c=e.dateLimits,u=c.maxDate,d=c.minDate,p=!i||P()(t,"rooms.".concat(l,".is_closed")),f=p?P()(t,"rooms.".concat(l,".closed_message")):"Location Closed",m=Wt.userIsStaff()&&r.showClosed?{min:"0000",max:"2400"}:this.getHours();return!s.initialized||s.loading||s.exceededLimit||window.drupalSettings.intercept.user.barred?null:O.a.createElement("div",{className:"l--sidebar-before"},O.a.createElement("div",{className:"l__main"},O.a.createElement("div",{className:"l__secondary"},O.a.createElement(Dt,{room:l,values:r,onChange:n,onSubmit:function(){return o(2)},min:m.min,max:m.max,disabledTimespans:this.getDisabledTimespans(),dateLimits:c})),O.a.createElement("div",{className:"l__primary"},a?O.a.createElement(ye.a,{loading:a}):l?O.a.createElement(Ft,{room:l,min:m.min,max:m.max,maxDate:u,minDate:d,defaultDate:r.date,date:r.date,onNavigate:this.handleCalendarNavigate,availability:t,isClosed:p,closedMessage:f}):O.a.createElement("div",null,O.a.createElement("p",null,"Choose a room to see its availability"),O.a.createElement(ce.a,{className:"value-summary__button",variant:"contained",color:"primary",size:"small",onClick:function(){return o(0)}},"Choose a Room")))))}}]),n}(O.a.Component);Qt.propTypes={room:R.a.string,rooms:R.a.arrayOf(Object).isRequired,isLoading:R.a.bool.isRequired,onChange:R.a.func.isRequired,onChangeRoom:R.a.func.isRequired,onChangeStep:R.a.func.isRequired,hours:R.a.object},Qt.defaultProps={view:"list",calView:"month",date:new Date,filters:{},hours:null,room:null};var Xt=Object(C.b)((function(e,t){var n=t.formValues.date&&t.room?$t.roomLocationHours(t.room,Wt.getDayTimeStamp(t.formValues.date))(e):$t.locationsOpenHoursLimit(e);return{rooms:$t.roomsAscending(e),isLoading:$t.recordsAreLoading(Gt.TYPE_ROOM)(e)||$t.recordsAreLoading(Gt.TYPE_LOCATION)(e),locationRecord:t.room?$t.roomLocationRecord(t.room)(e):null,hours:n,calendarRooms:[]}}))(Object(Ze.a)(Qt)),Jt=n(916),Zt=n(228),en=n.n(Zt),tn=n(917),nn=n(910),an=n(906),rn=n(911),on=n(856),ln=n(908),sn=n(229),cn=n(79),un=n(127),dn=(n(87),n(77)),pn=n(155),fn=k.a.constants,mn={default:"The status of the reservation is unknown",dirty:{requested:"Requesting reservation",approved:"Approving reservation",denied:"Denying reservation",canceled:"Cancelling reservation"},syncing:{requested:"Requesting reservation",approved:"Approving reservation",denied:"Denying reservation",canceled:"Cancelling reservation"},saved:{requested:"This reservation has been requested",approved:"This reservation has been approved",denied:"This reservation has been denied",canceled:"This reservation has been canceled"},error:{requested:"An error occured while requesting this reservation",approved:"An error occured while approving this reservation",denied:"An error occured while denying this reservation",canceled:"An error occured while cancelling this reservation"}},hn=function(e){return O.a.createElement(pn.a,{type:fn.TYPE_ROOM_RESERVATION,id:e.uuid,messages:mn,statusPath:"data.attributes.field_status"})};hn.propTypes={uuid:R.a.string.isRequired};var vn=hn,bn=k.a.constants,gn=k.a.select,yn=k.a.utils,On=bn,En=yn.getDayDisplay,Rn=function(e,t){return yn.getTimeDisplay(yn.getDateFromTime(e,t))},Cn=function(e){return O.a.createElement("article",{className:"summary"},O.a.createElement("header",{className:"summary__header"},O.a.createElement("div",{className:"summary__supertitle"},e.location),O.a.createElement("h3",{className:"summary__title"},e.room)),O.a.createElement("p",{className:"summary__dateline"},O.a.createElement("span",{className:"summary__dateline-date"},En(e.date)," "),O.a.createElement("span",{className:"summary__dateline-time"},"".concat(Rn(e.start,e.date)," to ").concat(Rn(e.end,e.date)))))};Cn.propTypes={room:R.a.string.isRequired,location:R.a.string.isRequired,date:R.a.instanceOf(Date).isRequired,start:R.a.string.isRequired,end:R.a.string.isRequired};var _n=Object(C.b)((function(e,t){var n=t[On.TYPE_ROOM];return{room:gn.roomLabel(n)(e),location:gn.roomLocationLabel(n)(e)}}))(Cn);function Dn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Tn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Dn(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Pn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=v()(e);if(t){var r=v()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return m()(this,n)}}var xn=k.a.api,Sn=k.a.constants,jn=k.a.select,kn=k.a.session,wn=Sn,Nn=function(e){p()(n,e);var t=Pn(n);function n(e){var a;return i()(this,n),(a=t.call(this,e)).state={uuid:null,state:"idle",saved:!1,disableBackdropClick:!0,disableEscapeKeyDown:!0},a.checkAvailability=a.checkAvailability.bind(u()(a)),a.handleConfirm=a.handleConfirm.bind(u()(a)),a}return s()(n,[{key:"checkAvailability",value:function(){var e=this,t=this.props,n=t.fetchAvailability,a=t.availabilityQuery,r=a.rooms[0];return this.setState({state:"loading"}),new Promise((function(t,o){try{n(a,(function(n){JSON.parse(n)[r].has_reservation_conflict?(o(),e.setState({state:"conflict"})):t()}))}catch(t){o(t),e.setState({state:"error"})}}))}},{key:"handleConfirm",value:function(){var e=this,t=this.props,n=t.onConfirm,a=t.save;this.checkAvailability().then((function(){var t=n();a(t),e.setState({state:"saved",uuid:t})})).catch((function(){e.setState({state:"conflict"})}))}},{key:"render",value:function(){var e=this.props,t=e.open,n=e.onCancel,a=e.values,o=e.eventNid,i=this.state,l=i.uuid,s=i.state,c=i.disableBackdropClick,u=i.disableEscapeKeyDown,d=null,p={onCancel:n};switch(s){case"idle":d=O.a.createElement(_n,a),p=Tn(Tn({},p),{},{confirmText:"Submit",cancelText:"Cancel",heading:"Confirm reservation request?",onConfirm:this.handleConfirm});break;case"loading":d=O.a.createElement(_n,a),p=Tn(Tn({},p),{},{cancelText:"Cancel",heading:"Sending reservation request",onConfirm:null,onCancel:null});break;case"conflict":p=Tn(Tn({},p),{},{heading:"This reservation time is no longer available.",cancelText:"Close"});break;case"error":p=Tn(Tn({},p),{},{heading:"There was an unexpected error with your reservation.",cancelText:"Close",confirmText:"Try Again",onConfirm:this.handleConfirm});break;case"saved":d=O.a.createElement(vn,{uuid:l}),p=Tn(Tn({},p),{},{confirmText:"View Your Reservations",cancelText:"Close",heading:"",onConfirm:function(){window.location.href="/account/room-reservations"}}),o&&(p.confirmText="Back to Edit Event",p.onConfirm=function(){window.location.href="/node/".concat(o,"/edit")})}return O.a.createElement(dn.a,r()({},p,{open:t,onBackdropClick:null,disableEscapeKeyDown:u,disableBackdropClick:c}),d)}}]),n}(O.a.Component);Nn.propTypes={availabilityQuery:R.a.object.isRequired,fetchAvailability:R.a.func.isRequired,onConfirm:R.a.func,onCancel:R.a.func,open:R.a.bool,save:R.a.func.isRequired,values:R.a.object.isRequired,eventNid:R.a.number},Nn.defaultProps={onConfirm:null,onCancel:null,open:!1,eventNid:null,disableEscapeKeyDown:!0,disableBackdropClick:!0};var In,An=Object(C.b)((function(e,t){var n=t.values,a=null;return n[wn.TYPE_EVENT]&&(a=P()(jn.event(n[wn.TYPE_EVENT])(e),"data.attributes.nid")),{eventNid:a}}),(function(e){return{save:function(t){kn.getToken().then((function(n){e(xn[wn.TYPE_ROOM_RESERVATION].sync(t,{headers:{"X-CSRF-Token":n}}))})).catch((function(e){console.log("Unable to save Reservation",e)}))}}}))(Object(Ze.a)(Nn)),Vn=n(194);function Ln(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function qn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ln(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ln(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Mn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=v()(e);if(t){var r=v()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return m()(this,n)}}var zn=k.a.actions,Fn=k.a.constants,Yn=k.a.select,Un=k.a.utils,Bn=Fn,Hn=[{key:"1",value:"Yes"},{key:"0",value:"No"}],$n=P()(N.a,"intercept.room_reservations.field_publicize.description","I would like to publicize this meeting"),Wn=[{key:"1",value:"Yes"},{key:"0",value:"No"}];Object(I.addValidationRule)("isRequired",(function(e,t){return""!==t})),Object(I.addValidationRule)("isPositive",(function(e,t){return t>0})),Object(I.addValidationRule)("isRequiredIfServingRefreshments",(function(e,t){return!0})),Object(I.addValidationRule)("isRequiredIfMeeting",(function(e,t){return!e.meeting||""!==t})),Object(I.addValidationRule)("isGreaterOrEqualTo",(function(e,t,n){return null===n||t>=n})),Object(I.addValidationRule)("isLesserOrEqualTo",(function(e,t,n){return null===n||t<=n}));var Gn=O.a.forwardRef((function(e,t){return O.a.createElement(et.a,r()({direction:"up",ref:t},e))})),Kn=P()(N.a,"intercept.room_reservations.agreement_text",void 0),Qn=function(e){p()(n,e);var t=Mn(n);function n(e){var a;return i()(this,n),a=t.call(this,e),g()(u()(a),"onOpenDialog",(function(){a.setState({openDialog:!0})})),g()(u()(a),"onCloseDialog",(function(){a.setState({openDialog:!1})})),g()(u()(a),"onOpenAgreementDialog",(function(){a.setState({openAgreementDialog:!0})})),g()(u()(a),"onCloseAgreementDialog",(function(){a.setState({openAgreementDialog:!1})})),g()(u()(a),"saveEntitytoStore",(function(e){var t=a.props.save,n=function(e){var t=Object(Jt.a)();return{id:t,type:Bn.TYPE_ROOM_RESERVATION,attributes:{uuid:t,field_attendee_count:e.attendees,field_dates:{value:D.a.tz(Un.getDateFromTime(e.start,e.date),Un.getUserTimezone()).format(),end_value:D.a.tz(Un.getDateFromTime(e.end,e.date),Un.getUserTimezone()).format()},field_group_name:e.groupName,field_meeting_purpose_details:e.meetingDetails,field_refreshments:"1"===e.refreshments,field_refreshments_description:{value:e.refreshmentsDesc},field_publicize:"1"===e.publicize,field_status:"requested",field_agreement:e.agreement},relationships:{field_event:{data:e[Bn.TYPE_EVENT]?{type:Bn.TYPE_EVENT,id:e[Bn.TYPE_EVENT]}:null},field_room:{data:{type:Bn.TYPE_ROOM,id:e[Bn.TYPE_ROOM]}},field_meeting_purpose:{data:e[Bn.TYPE_MEETING_PURPOSE]?{type:Bn.TYPE_MEETING_PURPOSE,id:e[Bn.TYPE_MEETING_PURPOSE]}:null},field_user:{data:{type:Bn.TYPE_USER,id:e.user}}}}}(e);return a.setState({uuid:n.id}),t(n),n.id})),a.state={expand:{refreshments:!1,meeting:!1,confirm:!1,findRoom:!1,findTime:!1},openAgreementDialog:!1,openDialog:!1,canSubmit:!1,uuid:null},a.toggleState=a.toggleState.bind(u()(a)),a.updateValue=a.updateValue.bind(u()(a)),a.updateValues=a.updateValues.bind(u()(a)),a.toggleValue=a.toggleValue.bind(u()(a)),a.onCloseAgreementDialog=a.onCloseAgreementDialog.bind(u()(a)),a.onCloseDialog=a.onCloseDialog.bind(u()(a)),a.onInputChange=a.onInputChange.bind(u()(a)),a.onOpenAgreementDialog=a.onOpenAgreementDialog.bind(u()(a)),a.onOpenDialog=a.onOpenDialog.bind(u()(a)),a.onValueChange=a.onValueChange.bind(u()(a)),a.disableButton=a.disableButton.bind(u()(a)),a.enableButton=a.enableButton.bind(u()(a)),a}return s()(n,[{key:"componentDidUpdate",value:function(e){var t=this.props.values;e.values.attendees!==t.attendees&&this.forceUpdate()}},{key:"onInputChange",value:function(e){var t=this;return function(n){t.updateValue(e,n.target.value)}}},{key:"onValueChange",value:function(e){var t=this;return function(n){t.updateValue(e,n)}}},{key:"disableButton",value:function(){this.setState({canSubmit:!1})}},{key:"enableButton",value:function(){this.setState({canSubmit:!0})}},{key:"toggleState",value:function(e){var t=this;return function(){t.setState({expand:qn(qn({},t.state.expand),{},g()({},e,!t.state.expand[e]))})}}},{key:"expand",value:function(e){var t=this;return function(){t.setState({expand:qn(qn({},t.state.expand),{},g()({},e,!0))})}}},{key:"collapse",value:function(e){var t=this;return function(){t.setState({expand:qn(qn({},t.state.expand),{},g()({},e,!1))})}}},{key:"updateValue",value:function(e,t){var n=qn(qn({},this.props.values),{},g()({},e,t));this.props.onChange(n)}},{key:"updateValues",value:function(e){var t=qn(qn({},this.props.values),e);this.props.onChange(t)}},{key:"toggleValue",value:function(e){this.updateValue(e,!this.props.values[e])}},{key:"agreementLabel",value:function(){return O.a.createElement(O.a.Fragment,null,"I agree to the ",O.a.createElement("a",{onClick:this.onOpenAgreementDialog,role:"link",tabIndex:"0"},"terms of service"),".",O.a.createElement(tn.a,{open:this.state.openAgreementDialog,onCancel:this.onCloseAgreementDialog,onClose:this.onCloseAgreementDialog,TransitionComponent:Gn,className:"dialog dialog--fullscreen"},O.a.createElement(nn.a,{id:"responsive-dialog-title"},"Terms of service"),O.a.createElement(an.a,null,O.a.createElement(rn.a,null,O.a.createElement("span",{dangerouslySetInnerHTML:{__html:Kn}})))))}},{key:"render",value:function(){var e,t=this,n=this.props,a=n.availabilityQuery,r=n.combinedValues,o=n.event,i=n.hasConflict,l=n.meetingPurpose,s=n.room,c=n.roomCapacity,u=n.values,d=this.state.uuid,p=!!function(e){return e&&e.data.attributes.field_requires_explanation}(l),f=null,m=null;return this.form=O.a.createRef(),d&&!0===P()(this.props.getRoomReservation(d),"".concat(d,".state.saved"))?f=O.a.createElement(Vn.a,{id:d}):(N.a.intercept.user.telephone&&N.a.intercept.user.email&&(m=O.a.createElement("div",{className:"l--subsection"},O.a.createElement("h4",{className:"section-title section-title--secondary"},"Your Current Contact Information"),O.a.createElement("small",null,"Telephone: ",N.a.intercept.user.telephone,O.a.createElement("br",null),"Email: ",N.a.intercept.user.email,O.a.createElement("br",null),O.a.createElement("em",null,"Need to update your info? After finishing your reservation visit My Account > Profile.")))),f=O.a.createElement(A.a,{className:"form__main",ref:this.form,onValidSubmit:this.onOpenDialog,onValid:this.enableButton,onInvalid:this.disableButton},O.a.createElement("div",{className:"l--2-col"},O.a.createElement("div",{className:"l__main"},O.a.createElement("div",{className:"l__primary"},O.a.createElement("div",{className:"l--subsection"},O.a.createElement("h4",{className:"section-title section-title--secondary"},"Reservation Details"),O.a.createElement("div",{className:"form-item"},O.a.createElement(Ae.a,{label:"Number of Attendees",value:u.attendees,onChange:this.onValueChange("attendees"),min:c.min,name:"attendees",int:!0,required:!0,validations:{isPositive:!0,isLesserOrEqualTo:c.max,isGreaterOrEqualTo:c.min},validationErrors:{isPositive:"Attendees must be a positive number",isLesserOrEqualTo:"The maximum capacity of this room is ".concat(c.max),isGreaterOrEqualTo:"The minimum capacity of this room is ".concat(c.min)},helperText:c.max&&"This room holds ".concat(c.min," to ").concat(c.max," people")})),O.a.createElement("div",{className:"form-item"},O.a.createElement(cn.a,{label:"Group Name",onChange:this.onValueChange("groupName"),value:u.groupName,name:"groupName",helperText:"Help others find you by name.",required:!Un.userIsStaff()})),O.a.createElement("div",{className:"form-item"},O.a.createElement(we.a,{type:Bn.TYPE_MEETING_PURPOSE,name:Bn.TYPE_MEETING_PURPOSE,handleChange:this.onInputChange(Bn.TYPE_MEETING_PURPOSE),value:u.meetingPurpose,label:"Purpose for using this room",required:!0})),O.a.createElement("div",{className:"form-item"},O.a.createElement(cn.a,{label:"Description",onChange:this.onValueChange("meetingDetails"),value:u.meetingDetails,name:"meetingDetails",required:p})),m)),O.a.createElement("div",{className:"l__secondary"},O.a.createElement("div",{className:"l--subsection"},O.a.createElement("h4",{className:"section-title section-title--secondary"},"Account"),O.a.createElement(sn.a,{label:"Reserved For",value:u.user,onChange:function(e){return t.onValueChange("user")(e.uuid)},name:"user"})),O.a.createElement("div",{className:"l--subsection"},O.a.createElement("h4",{className:"section-title section-title--secondary"},"Refreshments"),O.a.createElement(un.a,{label:"I would like to serve refreshments and agree to the $25 charge that will be added to my library card. (Note: Some spaces may not allow refreshments. We will contact you if we are unable to fulfill this request.)",value:u.refreshments,onChange:this.onValueChange("refreshments"),name:"refreshments",required:!0,options:Hn}),O.a.createElement("div",{className:"form-item"},O.a.createElement(cn.a,{label:"Please describe your light refreshments.",value:u.refreshmentsDesc,onChange:this.onValueChange("refreshmentsDesc"),name:"refreshmentDesc",required:"1"===u.refreshments,disabled:"1"!==u.refreshments}))),O.a.createElement("div",{className:"l--subsection"},O.a.createElement("h4",{className:"section-title section-title--secondary"},"Publicize"),O.a.createElement(un.a,{label:$n,value:u.publicize,onChange:this.onValueChange("publicize"),name:"publicize",required:!0,options:Wn})),Kn&&O.a.createElement("div",{className:"l--subsection"},O.a.createElement("h4",{className:"section-title section-title--secondary"},"Terms of Service"),O.a.createElement(Ve.a,{label:this.agreementLabel(),checked:u.agreement,onChange:function(){return t.toggleValue("agreement")},required:!0,value:u.agreement,name:"agreement"})),O.a.createElement(ce.a,{variant:"contained",size:"large",color:"primary",type:"submit",className:"button button--primary",disabled:!this.state.canSubmit||i||!s||!u.agreement},"Next")))))),O.a.createElement("div",{className:"form"},f,O.a.createElement(An,{open:this.state.openDialog,onCancel:this.onCloseDialog,onConfirm:function(){var e;return t.saveEntitytoStore(qn(qn({},r),{},(e={},g()(e,Bn.TYPE_ROOM,s),g()(e,Bn.TYPE_EVENT,o),e)))},values:qn(qn({},r),{},(e={},g()(e,Bn.TYPE_ROOM,s),g()(e,Bn.TYPE_EVENT,o),e)),availabilityQuery:a}),O.a.createElement(tn.a,{fullScreen:!0,open:this.state.expand.findRoom,onClose:function(){},TransitionComponent:Gn,className:"dialog dialog--fullscreen"},O.a.createElement(on.a,{className:"dialog__app-bar app-bar"},O.a.createElement(ln.a,null,O.a.createElement(It.a,{color:"inherit",onClick:this.collapse("findRoom"),"aria-label":"Close"},O.a.createElement(en.a,null)),O.a.createElement(Q.a,{variant:"title",color:"inherit",className:"app-bar_heading"},"Find a Room")))))}}]),n}(y.PureComponent);Qn.propTypes={availabilityQuery:R.a.object.isRequired,values:R.a.shape((In={agreement:R.a.bool,attendees:R.a.number,groupName:R.a.string,meetingDetails:R.a.string},g()(In,Bn.TYPE_MEETING_PURPOSE,R.a.string),g()(In,"refreshments",R.a.string),g()(In,"refreshmentsDesc",R.a.string),g()(In,"publicize",R.a.string),g()(In,"user",R.a.string),In)),onChange:R.a.func.isRequired,save:R.a.func.isRequired,meetingPurpose:R.a.object,combinedValues:R.a.object,room:R.a.string,roomCapacity:R.a.shape({min:R.a.number,max:R.a.number}).isRequired,event:R.a.string,hasConflict:R.a.bool},Qn.defaultProps={combinedValues:{},values:{agreement:!0,attendees:null,groupName:"",meetingPurpose:"",meetingDetails:"",refreshments:"",refreshmentsDesc:"",publicize:"",user:N.a.intercept.user.uuid},meetingPurpose:null,room:null,event:null,hasConflict:!1};var Xn=Object(C.b)((function(e,t){return{meetingPurpose:t.values[Bn.TYPE_MEETING_PURPOSE]?Yn.record(Yn.getIdentifier(Bn.TYPE_MEETING_PURPOSE,t.values[Bn.TYPE_MEETING_PURPOSE]))(e):null,roomCapacity:t.room?Yn.roomCapacity(t.room)(e):{min:0,max:null},getRoomReservation:function(t){return Yn.roomReservation(t)(e)}}}),(function(e){return{save:function(t){e(zn.add(t,Bn.TYPE_ROOM_RESERVATION,t.id))}}}))(Qn),Jn=n(175),Zn=n.n(Jn);function ea(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=v()(e);if(t){var r=v()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return m()(this,n)}}var ta=k.a.utils,na=function(e){p()(n,e);var t=ea(n);function n(){return i()(this,n),t.apply(this,arguments)}return s()(n,[{key:"render",value:function(){var e=this.props,t=e.value,n=e.onClickChange;if(!!(t&&t.date&&t.start&&t.end)){var a=ta.getDateTimespanDisplay(t);return O.a.createElement("div",{className:"value-summary"},O.a.createElement("h4",{className:"value-summary__label"},"Date & Time",O.a.createElement(It.a,{className:"value-summary__icon-button","aria-label":"Edit",color:"primary",onClick:n},O.a.createElement(Zn.a,null))),O.a.createElement("p",{className:"value-summary__value"},a))}return O.a.createElement("div",{className:"value-summary"},O.a.createElement("h4",{className:"value-summary__label"},"Date & Time"),O.a.createElement(ce.a,{className:"value-summary__button",variant:"contained",color:"primary",size:"small",onClick:n},"Choose a Time"))}}]),n}(O.a.PureComponent);na.propTypes={value:R.a.shape({date:R.a.object,start:R.a.string,end:R.a.string}),onClickChange:R.a.func.isRequired},na.defaultProps={value:null};var aa=na;function ra(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=v()(e);if(t){var r=v()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return m()(this,n)}}var oa=k.a.select,ia=function(e){p()(n,e);var t=ra(n);function n(){return i()(this,n),t.apply(this,arguments)}return s()(n,[{key:"render",value:function(){var e=this.props,t=e.value,n=e.label,a=e.onClickChange;return!!t?O.a.createElement("div",{className:"value-summary"},O.a.createElement("h4",{className:"value-summary__label"},"Room",O.a.createElement(It.a,{className:"value-summary__icon-button","aria-label":"Edit",color:"primary",onClick:a},O.a.createElement(Zn.a,null))),O.a.createElement("p",{className:"value-summary__value"},n)):O.a.createElement("div",{className:"value-summary"},O.a.createElement("h4",{className:"value-summary__label"},"Room"),O.a.createElement(ce.a,{className:"value-summary__button",variant:"contained",color:"primary",size:"small",onClick:a},"Choose a Room"))}}]),n}(O.a.PureComponent);ia.propTypes={value:R.a.string,label:R.a.string,onClickChange:R.a.func.isRequired},ia.defaultProps={value:"",label:null};var la=Object(C.b)((function(e,t){if(!t.value)return{};var n=oa.roomLabel(t.value)(e),a=oa.roomLocationLabel(t.value)(e);return n||a?{label:a?"".concat(a,": ").concat(n):n}:{}}))(ia);function sa(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=v()(e);if(t){var r=v()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return m()(this,n)}}var ca=function(e){p()(n,e);var t=sa(n);function n(){return i()(this,n),t.apply(this,arguments)}return s()(n,[{key:"render",value:function(){return O.a.createElement("div",{className:"value-summary__footer value-summary__footer--".concat(this.props.level)},O.a.createElement("p",null,this.props.message))}}]),n}(O.a.PureComponent);ca.propTypes={message:R.a.string.isRequired,level:R.a.string},ca.defaultProps={level:"error"};var ua=ca;function da(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=v()(e);if(t){var r=v()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return m()(this,n)}}function pa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function fa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pa(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ma=k.a.constants,ha=k.a.select,va=k.a.utils,ba=ma,ga=["image_primary","image_primary.field_media_image"];function ya(e){var t=fa({},function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return{published:{path:"status",value:e?"1":"0"}}}(!0));return e?([{id:ba.TYPE_ROOM_TYPE,path:"field_room_type.id",conjunction:"OR"},{id:ba.TYPE_LOCATION,path:"field_location.id",conjunction:"OR"}].forEach((function(n){if(e[n.id]&&e[n.id].length>0)if("AND"===n.conjunction){var a="".concat(n.id,"-group");t[a]={type:"group",conjunction:n.conjunction},e[n.id].forEach((function(e,r){var o="".concat(n.id,"-").concat(r);t[o]={path:n.path,value:e,memberOf:a}}))}else t[n.id]={path:n.path,value:e[n.id],operator:"IN"}})),t):t}var Oa=function(e){p()(n,e);var t=da(n);function n(e){var a;return i()(this,n),a=t.call(this,e),g()(u()(a),"getRoomAvailabilityQuery",(function(){var e=a.props.formValues;if(!e.start||!e.start||!a.props.room)return{};var t=va.getDateFromTime(e.start,e[ba.DATE]),n=va.getDateFromTime(e.end,e[ba.DATE]),r={rooms:[a.props.room]};return r.duration=va.getDurationInMinutes(t,n),r.start=t,r.end=n,r})),g()(u()(a),"handleViewChange",(function(e){})),g()(u()(a),"handleCalendarNavigate",(function(e,t){a.props.onChangeDate(e),a.doFetchRooms(a.props.filters,"calendar",t,e)})),g()(u()(a),"handleCalendarView",(function(e){a.props.onChangeCalView(e),a.doFetchRooms(a.props.filters,"calendar",e,a.props.date)})),g()(u()(a),"handleFilterChange",(function(e){a.props.onChangeFilters(e),a.doFetchRooms(e)})),g()(u()(a),"hasConflict",(function(){var e=P()(u()(a),"props.availability.rooms.".concat(a.props.room))||null;return!!e&&e[va.userIsStaff()?"has_reservation_conflict":"has_conflict"]})),a.state={date:e.date,room:{current:null,previous:null,exiting:!1},availability:{loading:!1,shouldUpdate:!1,rooms:{}}},a.handleCalendarNavigate=a.handleCalendarNavigate.bind(u()(a)),a.handleCalendarView=a.handleCalendarView.bind(u()(a)),a.handleViewChange=a.handleViewChange.bind(u()(a)),a.handleFormChange=a.handleFormChange.bind(u()(a)),a.doFetchRooms=ve()(a.doFetchRooms,500).bind(u()(a)),a}return s()(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.fetchAvailability,n=e.formValues,a=e.room,r=n.start,o=n.end,i=n.date,l=!!(a&&r&&o&&i);this.mounted=!0,l&&t(this.getRoomAvailabilityQuery())}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.fetchAvailability,a=t.formValues,r=t.room,o=a.start,i=a.end,l=a.date,s=!!(r&&o&&i&&l),c=e.room!==r||e.formValues.end!==i||e.formValues.start!==o||e.formValues.date!==l;s&&c&&n(this.getRoomAvailabilityQuery())}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"handleFormChange",value:function(e){this.setState({formValues:fa(fa({},this.state.formValues),e)})}},{key:"doFetchRooms",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.filters,t=(arguments.length>1&&void 0!==arguments[1]||this.props.view,arguments.length>2&&void 0!==arguments[2]||this.props.calView,arguments.length>3&&void 0!==arguments[3]||this.props.date,this.props.fetchRooms);t({filters:ya(e),include:ga,replace:!0,headers:{"X-Consumer-ID":k.a.consumer}})}},{key:"render",value:function(){var e=this,t=this.props,n=t.event,a=t.room,r=t.formValues,o=t.onChange,i=t.onChangeStep,l=t.userStatus,s=S()(r,["date","start","end"]),c=S()(r,["attendees","meetingDetails","refreshments","refreshmentsDesc","publicize","groupName","agreement",ba.TYPE_MEETING_PURPOSE]),u=this.hasConflict();return!l.initialized||l.loading||l.exceededLimit||window.drupalSettings.intercept.user.barred?null:O.a.createElement("div",{className:"l--default"},O.a.createElement("div",{className:"l__header"},O.a.createElement("div",{className:"value-summary__wrapper"},O.a.createElement(la,{value:a,onClickChange:function(){e.props.fetchUserStatus(),i(0)}}),O.a.createElement(aa,{value:s,onClickChange:function(){e.props.fetchUserStatus(),i(1)}})),u&&O.a.createElement(ua,{level:"error",message:"This room is not available during this time."})),O.a.createElement("div",{className:"l__main"},O.a.createElement("div",{className:"l__primary"},O.a.createElement("div",{className:"l--subsection--tight"},O.a.createElement(Xn,{values:c,combinedValues:r,onChange:o,room:a,event:n,hasConflict:u,availabilityQuery:this.getRoomAvailabilityQuery()})))))}}]),n}(O.a.Component);Oa.propTypes={fetchRooms:R.a.func.isRequired},Oa.defaultProps={};var Ea=Object(C.b)((function(e){return{rooms:ha.roomsAscending(e),roomsLoading:ha.recordsAreLoading(ba.TYPE_ROOM)(e),calendarRooms:[]}}))(Object(Ze.a)(Oa));n(359);function Ra(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=v()(e);if(t){var r=v()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return m()(this,n)}}var Ca=function(e){p()(n,e);var t=Ra(n);function n(){return i()(this,n),t.apply(this,arguments)}return s()(n,[{key:"render",value:function(){var e=this.props.userStatus,t="";if(!(e.exceededLimit&&e.initialized||!1!==window.drupalSettings.intercept.user.barred))return null;if(0===window.drupalSettings.user.uid)t=O.a.createElement("p",{className:"value-summary__footer-text"},"You must be logged in to reserve rooms."," ",O.a.createElement("a",{className:"value-summary__footer-link",href:"/user/login?destination=".concat(encodeURIComponent(window.location.pathname+window.location.search))},"Log in now"));else if(!0===window.drupalSettings.intercept.user.barred){var n=window.drupalSettings.intercept.room_reservations.reservation_barred_text;t=O.a.createElement("p",{className:"value-summary__footer-text",dangerouslySetInnerHTML:{__html:n}})}else t=O.a.createElement("p",{className:"value-summary__footer-text"},"You are only allowed to reserve a maximum of ",e.limit," room",1===parseInt(e.limit,10)?"":"s"," at a time."," ",O.a.createElement("a",{className:"value-summary__footer-link",href:"/account/room-reservations"},"View your current reservations."));return O.a.createElement("div",{className:"value-summary__footer value-summary__footer--".concat(this.props.level)},t)}}]),n}(O.a.PureComponent);Ca.propTypes={userStatus:R.a.object.isRequired,level:R.a.string},Ca.defaultProps={level:"error"};var _a=Ca,Da=n(190),Ta=k.a.constants,Pa=k.a.select,xa=(k.a.utils,Ta);function Sa(e){var t=e.id,n=e.resource;if(!n.attributes)return null;var a=P()(n,"attributes.field_capacity_min"),r=a?O.a.createElement(Ee.a,{label:"Min Capacity",key:"capacityMin",values:{id:"capacityMin",name:a}}):null,o=P()(n,"attributes.field_capacity_max"),i=o?O.a.createElement(Ee.a,{label:"Max Capacity",key:"capacityMax",values:{id:"capacityMax",name:o}}):null,l=P()(n,"attributes.field_room_fees.processed"),s=l?O.a.createElement("div",{className:"field field--inline"},O.a.createElement("strong",{className:"field__label"},"Fees"),O.a.createElement("div",{className:"field__items",dangerouslySetInnerHTML:{__html:l}})):null,c=P()(n,"attributes.field_text_content.processed"),u=c?O.a.createElement("div",{className:"field field--inline"},O.a.createElement("strong",{className:"field__label"},"More about this room"),O.a.createElement("div",{className:"field__items",dangerouslySetInnerHTML:{__html:c}})):null,d=P()(n,"attributes.field_room_standard_equipment"),p=d&&d.length>0?O.a.createElement(Ee.a,{label:"Equipment in Room",key:"equipment",values:d.map((function(e,t){return{id:t,name:e}}))}):null,f=P()(n,"attributes.room_thumbnail");return O.a.createElement("div",null,O.a.createElement(Da.a,{key:t,modifiers:[f?"with-image":"without-image","constrained","card"],image:f,supertitle:P()(n,"relationships.field_location.0.attributes.title"),subtitle:P()(n,"relationships.field_room_type.attributes.name"),title:n.attributes.title,label:n.attributes.field_must_register?"Registration Required":null,body:P()(n,"attributes.field_text_intro.value")},r,i,p,s,u))}Sa.propTypes={classes:R.a.object.isRequired,id:R.a.string.isRequired,resource:R.a.object.isRequired};var ja=Object(C.b)((function(e,t){var n=Pa.getIdentifier(xa.TYPE_ROOM,t.id);return{resource:Pa.bundle(n)(e)}}))(Object(V.a)({card:{maxWidth:345},media:{height:0,paddingTop:"56.25%"}})(Sa));function ka(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=v()(e);if(t){var r=v()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return m()(this,n)}}var wa=function(e){p()(n,e);var t=ka(n);function n(){return i()(this,n),t.apply(this,arguments)}return s()(n,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.close,a=e.onClose,r=e.open,o=e.id;return O.a.createElement(tn.a,{close:n,onClose:a,open:r,keepMounted:!0},O.a.createElement("div",{className:t.main},o?O.a.createElement(ja,{id:o}):O.a.createElement("div",null)),O.a.createElement("div",{className:t.footer}))}}]),n}(O.a.Component);wa.propTypes={classes:R.a.object.isRequired,onClose:R.a.func,open:R.a.bool,id:R.a.string},wa.defaultProps={open:!1,onClose:null,id:null};var Na=Object(V.a)((function(e){return{root:{display:"flex",flexDirection:"column"},main:{overflowY:"auto"},footer:{margin:0}}}))(wa);function Ia(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Aa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ia(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ia(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Va(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=v()(e);if(t){var r=v()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return m()(this,n)}}var La=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;return function(n){p()(o,n);var a=Va(o);function o(e){var n;return i()(this,o),n=a.call(this,e),g()(u()(n),"handleResponse",(function(e){return n.mounted&&n.setState({userStatus:Aa(Aa({},n.state.userStatus),{},{loading:!1},JSON.parse(e))}),e})),n.handleResponse=n.handleResponse.bind(u()(n)),n.fetchUserStatus=ve()(n.fetchUserStatus,t).bind(u()(n)),n.state={userStatus:{loading:!1,initialized:!1}},n}return s()(o,[{key:"componentDidMount",value:function(){this.mounted=!0}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"fetchUserStatus",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){return e};return 0===window.drupalSettings.user.uid?(this.setState({userStatus:Aa(Aa({},this.state.userStatus),{},{loading:!1,initialized:!0,exceededLimit:!0})}),Promise.resolve({exceededLimit:!0,limit:0})):(this.setState({userStatus:Aa(Aa({},this.state.userStatus),{},{loading:!0,initialized:!0})}),fetch("/api/rooms/user/status",{method:"GET",credentials:"same-origin",headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((function(e){return e.text()})).then((function(n){return t(e.handleResponse(n))})).catch((function(t){e.mounted&&(console.log(t),e.setState({userStatus:Aa(Aa({},e.state.userStatus),{},{loading:!1})}))})))}},{key:"render",value:function(){return O.a.createElement(e,r()({userStatus:this.state.userStatus,fetchUserStatus:this.fetchUserStatus},this.props))}}]),o}(O.a.Component)};function qa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Ma(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qa(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function za(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=v()(e);if(t){var r=v()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return m()(this,n)}}var Fa=k.a.constants,Ya=k.a.api,Ua=k.a.select,Ba=k.a.utils,Ha=Fa,$a=["image_primary","image_primary.field_media_image"],Wa=P()(N.a,"intercept.room_reservations.customer_advanced_limit","10"),Ga=P()(N.a,"intercept.room_reservations.customer_advanced_text"),Ka=function(){if(!Ba.userIsStaff())return Wa&&"0"!==Wa?D()().tz(Ba.getUserTimezone()).add(Wa,"days").format("YYYY-MM-DD"):void 0}(),Qa=function(){if(!Ba.userIsStaff())return Ga}(),Xa=function(){if(!Ba.userIsStaff())return D()().tz(Ba.getUserTimezone()).format("YYYY-MM-DD")}(),Ja=function(e,t){if(null===e)return!0;var n=new Date;return Ba.getDateFromTime(e,t)>=n},Za=function(e,t){return!Ka||(null===e||Ba.getDateFromTime(e,t)<=Ba.getDateFromTime(e,Ka))};Object(I.addValidationRule)("isFutureDate",(function(e,t){return!t||t>=Ba.getUserStartOfDay()})),Object(I.addValidationRule)("isLessThanMaxDate",(function(e,t){return!t||(n=t,!Ka||Ba.getDayTimeStamp(n)<=Ka);var n}));var er=function(e){p()(n,e);var t=za(n);function n(e){var a,r;return i()(this,n),r=t.call(this,e),g()(u()(r),"getEventValues",(function(){var e=r.props,t=e.formValues,n=(e.room,e.event),a=e.eventRecord,o=(e.locationRecord,e.filters,S()(t,["date","start","end","attendees","groupName"]));if(n&&!a)return o;var i=a.data,l=Ba.getUserTimezone(),s=Ba.dateFromDrupal(P()(i,"attributes.field_date_time.value")),c=Ba.dateFromDrupal(P()(i,"attributes.field_date_time.end_value"));return o.date||(o.date=D()(s).tz(l).startOf("day").toDate()),o.start||(o.start=D()(s).tz(l).subtract(30,"minutes").format("HHmm")),o.end||(o.end=D()(c).tz(l).add(30,"minutes").format("HHmm")),o.attendees||(o.attendees=P()(i,"attributes.field_capacity_max")||10),o.groupName||(o.groupName=P()(i,"attributes.title")),o})),g()(u()(r),"handleFormChange",(function(e){var t=r.state.room;e[Ha.TYPE_ROOM]!==r.state.formValues[Ha.TYPE_ROOM]&&(t={current:e[Ha.TYPE_ROOM],previous:r.state.room.current,exiting:r.state.room.current!==r.state.room.previous}),r.setState({room:t,formValues:Ma(Ma(Ma({},r.state.formValues),e),{},g()({},Ha.TYPE_ROOM,t))})})),r.state={date:null,filters:e.filters,formValues:(a={},g()(a,Ha.TYPE_ROOM,e.room||null),g()(a,"date",null),g()(a,"start",null),g()(a,"end",null),g()(a,"agreement",Ba.userIsStaff()),g()(a,"attendees",null),g()(a,"groupName",""),g()(a,"meeting",!1),g()(a,Ha.TYPE_MEETING_PURPOSE,null),g()(a,"meetingDetails",""),g()(a,"refreshmentsDesc",""),g()(a,"user",Ba.getUserUuid()),g()(a,"showClosed",!1),a),room:{current:null,previous:null,exiting:!1}},r.onExited=r.onExited.bind(u()(r)),r}return s()(n,[{key:"componentDidMount",value:function(){if(this.props.event){var e={uuid:{path:"id",value:this.props.event}};this.props.fetchEvent({filters:e,include:["field_room"]})}if(this.props.room){var t={uuid:{path:"id",value:this.props.room}};this.props.fetchRooms({filters:t,sort:{title:{path:"title"}},include:[].concat($a),headers:{"X-Consumer-ID":k.a.consumer}})}this.props.fetchLocations({filters:{onlyBranchLocation:{path:"field_branch_location",value:"1"},published:{path:"status",value:"1"}},fields:g()({},Ha.TYPE_LOCATION,["title","field_location_hours","field_branch_location","status"])}),this.props.fetchUserStatus()}},{key:"componentDidUpdate",value:function(e){e.eventRecord!==this.props.eventRecord&&(this.handleFormChange(this.getEventValues()),this.props.onChangeRoom(P()(this,"props.eventRecord.data.relationships.field_room.data.id")))}},{key:"onExited",value:function(){this.setState({room:Ma(Ma({},this.state.room),{},{exiting:!1})})}},{key:"render",value:function(){var e=this,t=this.props,n=t.step,a=t.onChangeStep,o=t.detail,i=t.room,l=t.roomDetail,s=t.onChangeDetail,c=t.onChangeRoomDetail,u=t.userStatus,d=this.state.formValues,p=d.date,f=d.end,m=d.start,h={maxDate:Ka,minDate:Xa,maxDateDescription:Qa},v=[O.a.createElement(pt,r()({onViewRoomDetail:function(e){c(e),s(!0)},dateLimits:h},this.props)),O.a.createElement(Xt,r()({},this.props,{dateLimits:h,onChange:this.handleFormChange,formValues:this.state.formValues})),O.a.createElement(Ea,r()({},this.props,{dateLimits:h,onChange:this.handleFormChange,formValues:this.state.formValues}))],b=n;return 2!==n||function(e,t,n){return null!==t&&null!==n&&null!==e&&(Ja(t,e)&&Za(n,e))}(p,m,f)?2===n&&null===i&&(b=0):b=1,O.a.createElement("div",{className:"l--offset"},O.a.createElement("header",{className:"l__header l--section"},O.a.createElement("h1",{className:"page-title"},"Reserve a Room"),O.a.createElement(me,r()({},this.props,{step:b,onChangeStep:function(t){e.props.fetchUserStatus(),a(t)},values:this.state.formValues})),O.a.createElement(_a,{userStatus:u})),O.a.createElement("div",{className:"l__main"},O.a.createElement("div",{className:"l__primary"},v[b])),O.a.createElement(Na,{open:!(!o||!l),onClose:function(){s(!1)},id:l}))}}]),n}(O.a.Component);er.propTypes={rooms:R.a.arrayOf(Object).isRequired,roomsLoading:R.a.bool.isRequired,fetchLocations:R.a.func.isRequired,fetchRooms:R.a.func.isRequired,fetchUser:R.a.func.isRequired,fetchUserStatus:R.a.func.isRequired,fetchEvent:R.a.func.isRequired,detail:R.a.bool,event:R.a.string,onChangeStep:R.a.func.isRequired,onChangeRoom:R.a.func.isRequired,onChangeDetail:R.a.func.isRequired,onChangeRoomDetail:R.a.func.isRequired,room:R.a.string,roomDetail:R.a.string,step:R.a.number,filters:R.a.object},er.defaultProps={view:"list",calView:"month",date:Ba.getUserTimeNow(),filters:{},step:0,detail:!1,roomDetail:null,room:null,event:null};t.a=Object(C.b)((function(e,t){return{eventRecord:t.event?Ua.event(t.event)(e):null,rooms:Ua.roomsAscending(e),roomsLoading:Ua.recordsAreLoading(Ha.TYPE_ROOM)(e),openHoursLimit:Ua.locationsOpenHoursLimit(e),calendarRooms:[]}}),(function(e){return{fetchRooms:function(t){e(Ya[Ha.TYPE_ROOM].fetchAll(t))},fetchEvent:function(t){e(Ya[Ha.TYPE_EVENT].fetchAll(t))},fetchLocations:function(t){e(Ya[Ha.TYPE_LOCATION].fetchAll(t))},fetchUser:function(t){e(Ya[Ha.TYPE_USER].fetchAll(t))}}}))(La(er))},328:function(e,t,n){"use strict";var a=n(4),r=n(13),o=n(0),i=(n(1),n(8)),l=n(15),s=n(102),c=n(78),u=o.forwardRef((function(e,t){var n=e.children,l=e.classes,u=e.className,d=e.disableTypography,p=void 0!==d&&d,f=e.inset,m=void 0!==f&&f,h=e.primary,v=e.primaryTypographyProps,b=e.secondary,g=e.secondaryTypographyProps,y=Object(r.a)(e,["children","classes","className","disableTypography","inset","primary","primaryTypographyProps","secondary","secondaryTypographyProps"]),O=o.useContext(c.a).dense,E=null!=h?h:n;null==E||E.type===s.a||p||(E=o.createElement(s.a,Object(a.a)({variant:O?"body2":"body1",className:l.primary,component:"span",display:"block"},v),E));var R=b;return null==R||R.type===s.a||p||(R=o.createElement(s.a,Object(a.a)({variant:"body2",className:l.secondary,color:"textSecondary",display:"block"},g),R)),o.createElement("div",Object(a.a)({className:Object(i.default)(l.root,u,O&&l.dense,m&&l.inset,E&&R&&l.multiline),ref:t},y),E,R)}));t.a=Object(l.a)({root:{flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4},multiline:{marginTop:6,marginBottom:6},dense:{},inset:{paddingLeft:56},primary:{},secondary:{}},{name:"MuiListItemText"})(u)},330:function(e,t,n){"use strict";var a=n(4),r=n(13),o=n(0),i=(n(1),n(8)),l=n(65),s=Object(l.a)(o.createElement("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}),"Cancel"),c=n(15),u=n(26),d=n(34),p=n(24),f=n(530);function m(e){return"Backspace"===e.key||"Delete"===e.key}var h=o.forwardRef((function(e,t){var n=e.avatar,l=e.classes,c=e.className,u=e.clickable,h=e.color,v=void 0===h?"default":h,b=e.component,g=e.deleteIcon,y=e.disabled,O=void 0!==y&&y,E=e.icon,R=e.label,C=e.onClick,_=e.onDelete,D=e.onKeyDown,T=e.onKeyUp,P=e.size,x=void 0===P?"medium":P,S=e.variant,j=void 0===S?"default":S,k=Object(r.a)(e,["avatar","classes","className","clickable","color","component","deleteIcon","disabled","icon","label","onClick","onDelete","onKeyDown","onKeyUp","size","variant"]),w=o.useRef(null),N=Object(d.a)(w,t),I=function(e){e.stopPropagation(),_&&_(e)},A=!(!1===u||!C)||u,V="small"===x,L=b||(A?f.a:"div"),q=L===f.a?{component:"div"}:{},M=null;if(_){var z=Object(i.default)("default"!==v&&("default"===j?l["deleteIconColor".concat(Object(p.a)(v))]:l["deleteIconOutlinedColor".concat(Object(p.a)(v))]),V&&l.deleteIconSmall);M=g&&o.isValidElement(g)?o.cloneElement(g,{className:Object(i.default)(g.props.className,l.deleteIcon,z),onClick:I}):o.createElement(s,{className:Object(i.default)(l.deleteIcon,z),onClick:I})}var F=null;n&&o.isValidElement(n)&&(F=o.cloneElement(n,{className:Object(i.default)(l.avatar,n.props.className,V&&l.avatarSmall,"default"!==v&&l["avatarColor".concat(Object(p.a)(v))])}));var Y=null;return E&&o.isValidElement(E)&&(Y=o.cloneElement(E,{className:Object(i.default)(l.icon,E.props.className,V&&l.iconSmall,"default"!==v&&l["iconColor".concat(Object(p.a)(v))])})),o.createElement(L,Object(a.a)({role:A||_?"button":void 0,className:Object(i.default)(l.root,c,"default"!==v&&[l["color".concat(Object(p.a)(v))],A&&l["clickableColor".concat(Object(p.a)(v))],_&&l["deletableColor".concat(Object(p.a)(v))]],"default"!==j&&[l.outlined,{primary:l.outlinedPrimary,secondary:l.outlinedSecondary}[v]],O&&l.disabled,V&&l.sizeSmall,A&&l.clickable,_&&l.deletable),"aria-disabled":!!O||void 0,tabIndex:A||_?0:void 0,onClick:C,onKeyDown:function(e){e.currentTarget===e.target&&m(e)&&e.preventDefault(),D&&D(e)},onKeyUp:function(e){e.currentTarget===e.target&&(_&&m(e)?_(e):"Escape"===e.key&&w.current&&w.current.blur()),T&&T(e)},ref:N},q,k),F||Y,o.createElement("span",{className:Object(i.default)(l.label,V&&l.labelSmall)},R),M)}));t.a=Object(c.a)((function(e){var t="light"===e.palette.type?e.palette.grey[300]:e.palette.grey[700],n=Object(u.c)(e.palette.text.primary,.26);return{root:{fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(13),display:"inline-flex",alignItems:"center",justifyContent:"center",height:32,color:e.palette.getContrastText(t),backgroundColor:t,borderRadius:16,whiteSpace:"nowrap",transition:e.transitions.create(["background-color","box-shadow"]),cursor:"default",outline:0,textDecoration:"none",border:"none",padding:0,verticalAlign:"middle",boxSizing:"border-box","&$disabled":{opacity:.5,pointerEvents:"none"},"& $avatar":{marginLeft:5,marginRight:-6,width:24,height:24,color:"light"===e.palette.type?e.palette.grey[700]:e.palette.grey[300],fontSize:e.typography.pxToRem(12)},"& $avatarColorPrimary":{color:e.palette.primary.contrastText,backgroundColor:e.palette.primary.dark},"& $avatarColorSecondary":{color:e.palette.secondary.contrastText,backgroundColor:e.palette.secondary.dark},"& $avatarSmall":{marginLeft:4,marginRight:-4,width:18,height:18,fontSize:e.typography.pxToRem(10)}},sizeSmall:{height:24},colorPrimary:{backgroundColor:e.palette.primary.main,color:e.palette.primary.contrastText},colorSecondary:{backgroundColor:e.palette.secondary.main,color:e.palette.secondary.contrastText},disabled:{},clickable:{userSelect:"none",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:hover, &:focus":{backgroundColor:Object(u.b)(t,.08)},"&:active":{boxShadow:e.shadows[1]}},clickableColorPrimary:{"&:hover, &:focus":{backgroundColor:Object(u.b)(e.palette.primary.main,.08)}},clickableColorSecondary:{"&:hover, &:focus":{backgroundColor:Object(u.b)(e.palette.secondary.main,.08)}},deletable:{"&:focus":{backgroundColor:Object(u.b)(t,.08)}},deletableColorPrimary:{"&:focus":{backgroundColor:Object(u.b)(e.palette.primary.main,.2)}},deletableColorSecondary:{"&:focus":{backgroundColor:Object(u.b)(e.palette.secondary.main,.2)}},outlined:{backgroundColor:"transparent",border:"1px solid ".concat("light"===e.palette.type?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"),"$clickable&:hover, $clickable&:focus, $deletable&:focus":{backgroundColor:Object(u.c)(e.palette.text.primary,e.palette.action.hoverOpacity)},"& $avatar":{marginLeft:4},"& $avatarSmall":{marginLeft:2},"& $icon":{marginLeft:4},"& $iconSmall":{marginLeft:2},"& $deleteIcon":{marginRight:5},"& $deleteIconSmall":{marginRight:3}},outlinedPrimary:{color:e.palette.primary.main,border:"1px solid ".concat(e.palette.primary.main),"$clickable&:hover, $clickable&:focus, $deletable&:focus":{backgroundColor:Object(u.c)(e.palette.primary.main,e.palette.action.hoverOpacity)}},outlinedSecondary:{color:e.palette.secondary.main,border:"1px solid ".concat(e.palette.secondary.main),"$clickable&:hover, $clickable&:focus, $deletable&:focus":{backgroundColor:Object(u.c)(e.palette.secondary.main,e.palette.action.hoverOpacity)}},avatar:{},avatarSmall:{},avatarColorPrimary:{},avatarColorSecondary:{},icon:{color:"light"===e.palette.type?e.palette.grey[700]:e.palette.grey[300],marginLeft:5,marginRight:-6},iconSmall:{width:18,height:18,marginLeft:4,marginRight:-4},iconColorPrimary:{color:"inherit"},iconColorSecondary:{color:"inherit"},label:{overflow:"hidden",textOverflow:"ellipsis",paddingLeft:12,paddingRight:12,whiteSpace:"nowrap"},labelSmall:{paddingLeft:8,paddingRight:8},deleteIcon:{WebkitTapHighlightColor:"transparent",color:n,height:22,width:22,cursor:"pointer",margin:"0 5px 0 -6px","&:hover":{color:Object(u.c)(n,.4)}},deleteIconSmall:{height:16,width:16,marginRight:4,marginLeft:-4},deleteIconColorPrimary:{color:Object(u.c)(e.palette.primary.contrastText,.7),"&:hover, &:active":{color:e.palette.primary.contrastText}},deleteIconColorSecondary:{color:Object(u.c)(e.palette.secondary.contrastText,.7),"&:hover, &:active":{color:e.palette.secondary.contrastText}},deleteIconOutlinedColorPrimary:{color:Object(u.c)(e.palette.primary.main,.7),"&:hover, &:active":{color:e.palette.primary.main}},deleteIconOutlinedColorSecondary:{color:Object(u.c)(e.palette.secondary.main,.7),"&:hover, &:active":{color:e.palette.secondary.main}}}}),{name:"MuiChip"})(h)},331:function(e,t,n){"use strict";var a=n(13),r=n(39),o=n(4),i=n(0),l=(n(1),n(8)),s=n(15),c=n(530),u=n(118),d=n(34),p=n(78),f=n(25),m="undefined"==typeof window?i.useEffect:i.useLayoutEffect,h=i.forwardRef((function(e,t){var n=e.alignItems,r=void 0===n?"center":n,s=e.autoFocus,h=void 0!==s&&s,v=e.button,b=void 0!==v&&v,g=e.children,y=e.classes,O=e.className,E=e.component,R=e.ContainerComponent,C=void 0===R?"li":R,_=e.ContainerProps,D=(_=void 0===_?{}:_).className,T=Object(a.a)(_,["className"]),P=e.dense,x=void 0!==P&&P,S=e.disabled,j=void 0!==S&&S,k=e.disableGutters,w=void 0!==k&&k,N=e.divider,I=void 0!==N&&N,A=e.focusVisibleClassName,V=e.selected,L=void 0!==V&&V,q=Object(a.a)(e,["alignItems","autoFocus","button","children","classes","className","component","ContainerComponent","ContainerProps","dense","disabled","disableGutters","divider","focusVisibleClassName","selected"]),M=i.useContext(p.a),z={dense:x||M.dense||!1,alignItems:r},F=i.useRef(null);m((function(){h&&F.current&&F.current.focus()}),[h]);var Y=i.Children.toArray(g),U=Y.length&&Object(u.a)(Y[Y.length-1],["ListItemSecondaryAction"]),B=i.useCallback((function(e){F.current=f.findDOMNode(e)}),[]),H=Object(d.a)(B,t),$=Object(o.a)({className:Object(l.default)(y.root,O,z.dense&&y.dense,!w&&y.gutters,I&&y.divider,j&&y.disabled,b&&y.button,"center"!==r&&y.alignItemsFlexStart,U&&y.secondaryAction,L&&y.selected),disabled:j},q),W=E||"li";return b&&($.component=E||"div",$.focusVisibleClassName=Object(l.default)(y.focusVisible,A),W=c.a),U?(W=$.component||E?W:"div","li"===C&&("li"===W?W="div":"li"===$.component&&($.component="div")),i.createElement(p.a.Provider,{value:z},i.createElement(C,Object(o.a)({className:Object(l.default)(y.container,D),ref:H},T),i.createElement(W,$,Y),Y.pop()))):i.createElement(p.a.Provider,{value:z},i.createElement(W,Object(o.a)({ref:H},$),Y))})),v=Object(s.a)((function(e){return{root:{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left",paddingTop:8,paddingBottom:8,"&$focusVisible":{backgroundColor:e.palette.action.selected},"&$selected, &$selected:hover":{backgroundColor:e.palette.action.selected},"&$disabled":{opacity:.5}},container:{position:"relative"},focusVisible:{},dense:{paddingTop:4,paddingBottom:4},alignItemsFlexStart:{alignItems:"flex-start"},disabled:{},divider:{borderBottom:"1px solid ".concat(e.palette.divider),backgroundClip:"padding-box"},gutters:{paddingLeft:16,paddingRight:16},button:{transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:e.palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}}},secondaryAction:{paddingRight:48},selected:{}}}),{name:"MuiListItem"})(h),b=i.forwardRef((function(e,t){var n,r=e.classes,s=e.className,c=e.component,u=void 0===c?"li":c,d=e.disableGutters,p=void 0!==d&&d,f=e.ListItemClasses,m=e.role,h=void 0===m?"menuitem":m,b=e.selected,g=e.tabIndex,y=Object(a.a)(e,["classes","className","component","disableGutters","ListItemClasses","role","selected","tabIndex"]);return e.disabled||(n=void 0!==g?g:-1),i.createElement(v,Object(o.a)({button:!0,role:h,tabIndex:n,component:u,selected:b,disableGutters:p,classes:Object(o.a)({dense:r.dense},f),className:Object(l.default)(r.root,s,b&&r.selected,!p&&r.gutters),ref:t},y))}));t.a=Object(s.a)((function(e){return{root:Object(o.a)({},e.typography.body1,Object(r.a)({minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",width:"auto",overflow:"hidden",whiteSpace:"nowrap"},e.breakpoints.up("sm"),{minHeight:"auto"})),gutters:{},selected:{},dense:Object(o.a)({},e.typography.body2,{minHeight:"auto"})}}),{name:"MuiMenuItem"})(b)},439:function(e,t,n){var a=n(344);e.exports=function(e,t){var n=[];return a(e,(function(e,a,r){t(e,a,r)&&n.push(e)})),n}},6:function(e,t){e.exports=interceptClient},60:function(e,t,n){"use strict";n(38),n(33),n(40),n(41),n(42),n(37),n(19),n(87),n(21),n(20),n(43);var a=n(23),r=n.n(a),o=n(10),i=n.n(o),l=n(9),s=n.n(l),c=n(3),u=n.n(c),d=n(11),p=n.n(d),f=n(12),m=n.n(f),h=n(5),v=n.n(h),b=n(2),g=n.n(b),y=n(0),O=n.n(y),E=n(46),R=n.n(E),C=n(6);function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=v()(e);if(t){var r=v()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return m()(this,n)}}var P=n.n(C).a.utils;t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200;return function(n){p()(o,n);var a=T(o);function o(e){var n;return i()(this,o),n=a.call(this,e),g()(u()(n),"handleResponse",(function(e){return n.mounted&&n.setState({availability:D(D({},n.state.availability),{},{loading:!1,rooms:JSON.parse(e),shouldUpdate:!1})}),e})),n.handleResponse=n.handleResponse.bind(u()(n)),n.fetchAvailability=R()(n.fetchAvailability,t).bind(u()(n)),n.state={availability:{loading:!1,shouldUpdate:!1,rooms:[]}},n}return s()(o,[{key:"componentDidMount",value:function(){this.mounted=!0}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"fetchAvailability",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e};return this.setState({availability:D(D({},this.state.availability),{},{loading:!0,shouldUpdate:!1})}),fetch("/api/rooms/availability",{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(D(D({},e),{},{start:P.dateToDrupal(P.ensureDate(e.start)),end:P.dateToDrupal(P.ensureDate(e.end))}))}).then((function(e){return e.text()})).then((function(e){return n(t.handleResponse(e))})).catch((function(e){t.mounted&&(console.log(e),t.setState({availability:D(D({},t.state.availability),{},{loading:!1,shouldUpdate:!1})}))}))}},{key:"render",value:function(){return O.a.createElement(e,r()({availability:this.state.availability,fetchAvailability:this.fetchAvailability},this.props))}}]),o}(O.a.Component)}},74:function(e,t){e.exports=Drupal},79:function(e,t,n){"use strict";n(29),n(19),n(21),n(20);var a=n(2),r=n.n(a),o=n(10),i=n.n(o),l=n(9),s=n.n(l),c=n(11),u=n.n(c),d=n(12),p=n.n(d),f=n(5),m=n.n(f),h=n(0),v=n.n(h),b=n(1),g=n.n(b),y=n(17),O=n(334);function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=m()(e);if(t){var r=m()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return p()(this,n)}}var _=function(e){u()(n,e);var t=C(n);function n(){return i()(this,n),t.apply(this,arguments)}return s()(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.errorMessage,a=t.label,r=t.isValid,o=t.onChange,i=t.isRequired,l=t.disabled,s=t.value,c=n||"";return this.props.helperText&&(c="".concat(this.props.helperText," ").concat(c)),v.a.createElement(O.a,{label:a,type:"text",disabled:l,onChange:function(t){o(t.target.value),e.props.setValue(t.target.value)},value:s,className:"input input--text",InputLabelProps:{className:"input__label"},inputProps:{},error:!r,helperText:c,required:i,fullWidth:!0})}}]),n}(v.a.PureComponent);_.propTypes=R(R({},y.propTypes),{},{onChange:g.a.func.isRequired,value:g.a.string,label:g.a.string,validators:g.a.arrayOf(String),disabled:g.a.bool}),_.defaultProps=R(R({},y.defaultProps),{},{value:"",label:"Text",validators:[],disabled:!1}),t.a=Object(y.withFormsy)(_)},855:function(e,t,n){"use strict";var a=n(4),r=n(13),o=n(0),i=(n(1),n(25)),l=n(204),s=n(386),c=n(34),u=n(76),d=n(119),p=n(101);function f(e,t){var n=function(e,t){var n,a=t.getBoundingClientRect();if(t.fakeTransform)n=t.fakeTransform;else{var r=window.getComputedStyle(t);n=r.getPropertyValue("-webkit-transform")||r.getPropertyValue("transform")}var o=0,i=0;if(n&&"none"!==n&&"string"==typeof n){var l=n.split("(")[1].split(")")[0].split(",");o=parseInt(l[4],10),i=parseInt(l[5],10)}return"left"===e?"translateX(".concat(window.innerWidth,"px) translateX(").concat(o-a.left,"px)"):"right"===e?"translateX(-".concat(a.left+a.width-o,"px)"):"up"===e?"translateY(".concat(window.innerHeight,"px) translateY(").concat(i-a.top,"px)"):"translateY(-".concat(a.top+a.height-i,"px)")}(e,t);n&&(t.style.webkitTransform=n,t.style.transform=n)}var m={enter:d.b.enteringScreen,exit:d.b.leavingScreen},h=o.forwardRef((function(e,t){var n=e.children,d=e.direction,h=void 0===d?"down":d,v=e.in,b=e.onEnter,g=e.onEntered,y=e.onEntering,O=e.onExit,E=e.onExited,R=e.onExiting,C=e.style,_=e.timeout,D=void 0===_?m:_,T=e.TransitionComponent,P=void 0===T?s.a:T,x=Object(r.a)(e,["children","direction","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"]),S=Object(u.a)(),j=o.useRef(null),k=o.useCallback((function(e){j.current=i.findDOMNode(e)}),[]),w=Object(c.a)(n.ref,k),N=Object(c.a)(w,t),I=function(e){return function(t){e&&(void 0===t?e(j.current):e(j.current,t))}},A=I((function(e,t){f(h,e),Object(p.b)(e),b&&b(e,t)})),V=I((function(e,t){var n=Object(p.a)({timeout:D,style:C},{mode:"enter"});e.style.webkitTransition=S.transitions.create("-webkit-transform",Object(a.a)({},n,{easing:S.transitions.easing.easeOut})),e.style.transition=S.transitions.create("transform",Object(a.a)({},n,{easing:S.transitions.easing.easeOut})),e.style.webkitTransform="none",e.style.transform="none",y&&y(e,t)})),L=I(g),q=I(R),M=I((function(e){var t=Object(p.a)({timeout:D,style:C},{mode:"exit"});e.style.webkitTransition=S.transitions.create("-webkit-transform",Object(a.a)({},t,{easing:S.transitions.easing.sharp})),e.style.transition=S.transitions.create("transform",Object(a.a)({},t,{easing:S.transitions.easing.sharp})),f(h,e),O&&O(e)})),z=I((function(e){e.style.webkitTransition="",e.style.transition="",E&&E(e)})),F=o.useCallback((function(){j.current&&f(h,j.current)}),[h]);return o.useEffect((function(){if(!v&&"down"!==h&&"right"!==h){var e=Object(l.a)((function(){j.current&&f(h,j.current)}));return window.addEventListener("resize",e),function(){e.clear(),window.removeEventListener("resize",e)}}}),[h,v]),o.useEffect((function(){v||F()}),[v,F]),o.createElement(P,Object(a.a)({nodeRef:j,onEnter:A,onEntered:L,onEntering:V,onExit:M,onExited:z,onExiting:q,appear:!0,in:v,timeout:D},x),(function(e,t){return o.cloneElement(n,Object(a.a)({ref:N,style:Object(a.a)({visibility:"exited"!==e||v?void 0:"hidden"},C,n.props.style)},t))}))}));t.a=h},856:function(e,t,n){"use strict";var a=n(4),r=n(13),o=n(0),i=(n(1),n(8)),l=n(15),s=n(24),c=n(529),u=o.forwardRef((function(e,t){var n=e.classes,l=e.className,u=e.color,d=void 0===u?"primary":u,p=e.position,f=void 0===p?"fixed":p,m=Object(r.a)(e,["classes","className","color","position"]);return o.createElement(c.a,Object(a.a)({square:!0,component:"header",elevation:4,className:Object(i.default)(n.root,n["position".concat(Object(s.a)(f))],n["color".concat(Object(s.a)(d))],l,"fixed"===f&&"mui-fixed"),ref:t},m))}));t.a=Object(l.a)((function(e){var t="light"===e.palette.type?e.palette.grey[100]:e.palette.grey[900];return{root:{display:"flex",flexDirection:"column",width:"100%",boxSizing:"border-box",zIndex:e.zIndex.appBar,flexShrink:0},positionFixed:{position:"fixed",top:0,left:"auto",right:0,"@media print":{position:"absolute"}},positionAbsolute:{position:"absolute",top:0,left:"auto",right:0},positionSticky:{position:"sticky",top:0,left:"auto",right:0},positionStatic:{position:"static"},positionRelative:{position:"relative"},colorDefault:{backgroundColor:t,color:e.palette.getContrastText(t)},colorPrimary:{backgroundColor:e.palette.primary.main,color:e.palette.primary.contrastText},colorSecondary:{backgroundColor:e.palette.secondary.main,color:e.palette.secondary.contrastText},colorInherit:{color:"inherit"},colorTransparent:{backgroundColor:"transparent",color:"inherit"}}}),{name:"MuiAppBar"})(u)},863:function(e,t,n){"use strict";n.r(t);n(32);var a=n(61),r=n.n(a),o=n(0),i=n.n(o),l=n(25),s=n(74),c=n.n(s),u=n(66),d=n(6),p=n.n(d),f=(n(38),n(33),n(40),n(41),n(42),n(37),n(19),n(21),n(91),n(20),n(253),n(141),n(43),n(23)),m=n.n(f),h=n(10),v=n.n(h),b=n(9),g=n.n(b),y=n(3),O=n.n(y),E=n(11),R=n.n(E),C=n(12),_=n.n(C),D=n(5),T=n.n(D),P=n(2),x=n.n(P),S=n(1),j=n.n(S),k=n(18),w=n(16),N=n.n(w),I=n(7),A=n.n(I),V=n(334),L=n(917),q=n(910),M=n(906),z=n(28),F=n.n(z),Y=n(387);function U(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=T()(e);if(t){var r=T()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return _()(this,n)}}var B=p.a.utils.getUserUuid(),H=function(e){R()(n,e);var t=U(n);function n(){return v()(this,n),t.apply(this,arguments)}return g()(n,[{key:"render",value:function(){var e=this.props,t=e.onClick,n=e.text,a=e.variant;return i.a.createElement(Y.a,{variant:a,size:"small",color:"primary",className:"action-button__button",onClick:t},n)}}]),n}(i.a.PureComponent);H.propTypes={entityId:j.a.string.isRequired,onClick:j.a.func,text:j.a.string,variant:j.a.string},H.defaultProps={onClick:null,userId:B,mustRegister:!1,registrationAllowed:!1,registerUrl:null,text:"",variant:"outlined"};var $=H,W=n(77),G=n(69);n(29);function K(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=T()(e);if(t){var r=T()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return _()(this,n)}}var Q=function(e){R()(n,e);var t=K(n);function n(){var e;v()(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r)),x()(O()(e),"getText",(function(e,t){switch(e){case"denied":return t?"Denying":"Denied";case"approved":return t?"Approving":"Approved";case"canceled":return t?"Cancelling":"Canceled";case"requested":return t?"Rerequesting":"Awaiting Approval";default:return null}})),e}return g()(n,[{key:"render",value:function(){var e=this.getText(this.props.status,this.props.syncing);return e?i.a.createElement("p",{className:"action-button__message"},e):null}}]),n}(i.a.PureComponent);Q.propTypes={status:j.a.string.isRequired,syncing:j.a.bool},Q.defaultProps={syncing:!1};var X=Q,J=n(60),Z=(n(68),n(87),n(82),n(227)),ee=n.n(Z),te=n(57),ne=n.n(te),ae=n(228),re=n.n(ae),oe=n(855),ie=n(911),le=n(856),se=n(908),ce=n(876),ue=n(102),de=n(89),pe=n(158),fe=n(229),me=n(108),he=n(148),ve=n(79),be=n(127),ge=n(97),ye=n(17),Oe=n.n(ye),Ee=n(155),Re=p.a.constants,Ce={default:"The status of the reservation is unknown",dirty:{requested:"Requesting reservation",approved:"Approving reservation",denied:"Denying reservation",canceled:"Cancelling reservation"},syncing:{requested:"Requesting reservation",approved:"Approving reservation",denied:"Denying reservation",canceled:"Cancelling reservation"},saved:{requested:"This reservation has been requested",approved:"This reservation has been approved",denied:"This reservation has been denied",canceled:"This reservation has been canceled"},error:{requested:"An error occured while requesting this reservation",approved:"An error occured while approving this reservation",denied:"An error occured while denying this reservation",canceled:"An error occured while cancelling this reservation"}},_e=function(e){return i.a.createElement(Ee.a,{type:Re.TYPE_ROOM_RESERVATION,id:e.uuid,messages:Ce,statusPath:"data.attributes.field_status"})};_e.propTypes={uuid:j.a.string.isRequired};var De=_e;function Te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Pe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Te(Object(n),!0).forEach((function(t){x()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Te(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function xe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=T()(e);if(t){var r=T()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return _()(this,n)}}var Se=p.a.constants,je=p.a.select,ke=Se,we=function(e){R()(n,e);var t=xe(n);function n(e){var a;return v()(this,n),a=t.call(this,e),x()(O()(a),"handleConfirm",(function(){a.props.onConfirm()})),a.state={uuid:null,state:"idle",saved:!1,disableBackdropClick:!0,disableEscapeKeyDown:!0},a}return g()(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.open,a=t.onCancel,r=t.eventNid,o=t.state,l=t.uuid,s=this.state,c=s.disableBackdropClick,u=s.disableEscapeKeyDown,d=null,p={onCancel:a};switch(o){case"idle":p=Pe(Pe({},p),{},{confirmText:"Submit",cancelText:"Cancel",heading:"Confirm reservation request?",onConfirm:function(){e.props.onConfirm()}});break;case"loading":p=Pe(Pe({},p),{},{cancelText:"Cancel",heading:"Sending reservation request",onConfirm:null,onCancel:null});break;case"conflict":p=Pe(Pe({},p),{},{heading:"This reservation time is no longer available.",cancelText:"Close"});break;case"error":p=Pe(Pe({},p),{},{heading:"There was an unexpected error with your reservation.",cancelText:"Close",confirmText:"Try Again",onConfirm:this.handleConfirm});break;case"saved":d=i.a.createElement(De,{uuid:l}),p=Pe(Pe({},p),{},{confirmText:"View Your Reservations",cancelText:"Close",heading:"",onConfirm:function(){window.location.href="/account/room-reservations"}}),r&&(p.confirmText="Back to Edit Event",p.onConfirm=function(){window.location.href="/node/".concat(r,"/edit")})}return i.a.createElement(W.a,m()({},p,{open:n,onBackdropClick:null,disableEscapeKeyDown:u,disableBackdropClick:c}),d)}}]),n}(i.a.Component);we.propTypes={onConfirm:j.a.func,onCancel:j.a.func,open:j.a.bool,state:j.a.string,values:j.a.object.isRequired,eventNid:j.a.number},we.defaultProps={onConfirm:null,onCancel:null,open:!1,eventNid:null,disableEscapeKeyDown:!0,disableBackdropClick:!0,state:"idle"};var Ne=Object(k.b)((function(e,t){var n=t.values,a=null;return n[ke.TYPE_EVENT]&&(a=A()(je.event(n[ke.TYPE_EVENT])(e),"data.attributes.nid")),{eventNid:a}}))(we),Ie=n(326);function Ae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Ve(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ae(Object(n),!0).forEach((function(t){x()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ae(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Le(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=T()(e);if(t){var r=T()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return _()(this,n)}}var qe=p.a.actions,Me=p.a.api,ze=p.a.constants,Fe=p.a.select,Ye=p.a.session,Ue=p.a.utils,Be=ze,He=[{key:"1",value:"Yes"},{key:"0",value:"No"}],$e=A()(F.a,"intercept.room_reservations.field_publicize.description","I would like to publicize this meeting"),We=[{key:"1",value:"Yes"},{key:"0",value:"No"}];Object(ye.addValidationRule)("isRequired",(function(e,t){return""!==t})),Object(ye.addValidationRule)("isPositive",(function(e,t){return t>0})),Object(ye.addValidationRule)("isRequiredIfServingRefreshments",(function(e,t){return!0})),Object(ye.addValidationRule)("isRequiredIfMeeting",(function(e,t){return!e.meeting||""!==t})),Object(ye.addValidationRule)("isGreaterOrEqualTo",(function(e,t,n){return null===n||t>=n})),Object(ye.addValidationRule)("isLesserOrEqualTo",(function(e,t,n){return null===n||t<=n})),Object(ye.addValidationRule)("isFutureDate",(function(e,t){return!t||t>=Ue.getUserStartOfDay()})),Object(ye.addValidationRule)("isFutureTime",(function(e,t){return null===t||void 0===e[Be.DATE]||Object(Ie.b)(t,e[Be.DATE])})),Object(ye.addValidationRule)("isAfterStart",(function(e,t){return null===t||e.end>e.start})),Object(ye.addValidationRule)("isAvailableDay",(function(e,t,n){return Ue.userIsStaff()&&n.is_closed||!n.is_closed})),Object(ye.addValidationRule)("isAvailableDuration",(function(e,t,n){return Ue.userIsStaff()&&n.has_max_duration_conflict||!n.has_max_duration_conflict})),Object(ye.addValidationRule)("isAvailableTime",(function(e,t,n){return!n.has_conflict||Ue.userIsStaff&&!n.has_reservation_conflict}));var Ge=i.a.forwardRef((function(e,t){return i.a.createElement(oe.a,m()({direction:"up",ref:t},e))})),Ke=A()(F.a,"intercept.room_reservations.agreement_text",void 0),Qe=function(e){R()(n,e);var t=Le(n);function n(e){var a;return v()(this,n),a=t.call(this,e),x()(O()(a),"onOpenDialog",(function(){a.setState({openDialog:!0})})),x()(O()(a),"onCloseDialog",(function(){a.setState({openDialog:!1}),a.props.closeEditDialog()})),x()(O()(a),"onOpenAgreementDialog",(function(){a.setState({openAgreementDialog:!0})})),x()(O()(a),"onCloseAgreementDialog",(function(){a.setState({openAgreementDialog:!1})})),x()(O()(a),"checkAvailability",(function(){var e=a.state.availabilityShouldUpdate,t=a.props,n=t.availability,r=t.fetchAvailability,o=t.values;e&&null!==o.date&&!n.loading&&(a.setState({availabilityShouldUpdate:!1}),r(a.getDayAvailabilityQuery()))})),x()(O()(a),"saveEntitytoStore",(function(e){var t=a.props,n=t.save,r=t.entityId,o=function(e,t){return{id:t,type:Be.TYPE_ROOM_RESERVATION,attributes:{id:t,field_attendee_count:e.attendees,field_dates:{value:N.a.tz(Ue.getDateFromTime(e.start,e.date),Ue.getUserTimezone()).format(),end_value:N.a.tz(Ue.getDateFromTime(e.end,e.date),Ue.getUserTimezone()).format()},field_group_name:e.groupName,field_meeting_purpose_details:e.meetingDetails,field_refreshments:"1"===e.refreshments,field_refreshments_description:{value:e.refreshmentsDesc},field_publicize:"1"===e.publicize,field_status:"requested",field_agreement:e.agreement},relationships:{field_event:{data:e[Be.TYPE_EVENT]?{type:Be.TYPE_EVENT,id:e[Be.TYPE_EVENT]}:null},field_room:{data:{type:Be.TYPE_ROOM,id:e[Be.TYPE_ROOM]}},field_meeting_purpose:{data:e.meetingPurpose?{type:Be.TYPE_MEETING_PURPOSE,id:e.meetingPurpose}:null},field_user:{data:{type:Be.TYPE_USER,id:e.user}}}}}(e,r);return n(o).then((function(){a.setState({uuid:r,state:"saved"})})).catch((function(){a.setState({state:"conflict"})})),o.id})),x()(O()(a),"getDisabledTimespans",(function(){var e=a.props,t=e.availability,n=e.room,r=A()(t,"rooms.".concat(n,".dates"));return r?ne()(ee()(r,a.onlyTodaysReservations),(function(e){return{start:Ue.getTimeFromDate(Ue.dateFromDrupal(e.start)),end:Ue.getTimeFromDate(Ue.dateFromDrupal(e.end))}})):[]})),x()(O()(a),"getDayAvailabilityQuery",(function(){var e=a.props,t=e.room,n=e.entityId,r=e.values,o=Ue.getUserTimezone(),i=N.a.tz(r.date,o);return{rooms:[t],start:i.clone().startOf("day"),end:i.clone().endOf("day"),exclude_uuid:[n]}})),x()(O()(a),"isConflicted",(function(){var e=a.props.roomAvailability;return!(!e.loading&&e)||!Ue.userIsStaff()&&(e.has_max_duration_conflict||e.has_open_hours_conflict||e.has_reservation_conflict)})),x()(O()(a),"validateForm",(function(){var e=a.props,t=(e.max,e.min,e.roomAvailability),n=Ue.userIsStaff()?"has_reservation_conflict":"has_conflict";A()(t,n)||!Ue.userIsStaff()&&isClosed||!Ue.userIsStaff()&&exceedsMaxDuration?a.setState({validationErrors:{start:"Room is not available at this time",end:"Room is not available at this time"}}):a.setState({validationErrors:{}})})),a.state={expand:{refreshments:!1,meeting:!1,confirm:!1,findRoom:!1,findTime:!1},openAgreementDialog:!1,openDialog:!1,canSubmit:!1,state:"idle",uuid:null,availabilityShouldUpdate:!0},a.toggleState=a.toggleState.bind(O()(a)),a.updateValue=a.updateValue.bind(O()(a)),a.updateValues=a.updateValues.bind(O()(a)),a.toggleValue=a.toggleValue.bind(O()(a)),a.onCloseAgreementDialog=a.onCloseAgreementDialog.bind(O()(a)),a.onCloseDialog=a.onCloseDialog.bind(O()(a)),a.onInputChange=a.onInputChange.bind(O()(a)),a.onOpenAgreementDialog=a.onOpenAgreementDialog.bind(O()(a)),a.onOpenDialog=a.onOpenDialog.bind(O()(a)),a.onValueChange=a.onValueChange.bind(O()(a)),a.disableButton=a.disableButton.bind(O()(a)),a.enableButton=a.enableButton.bind(O()(a)),a}return g()(n,[{key:"componentDidUpdate",value:function(){this.checkAvailability()}},{key:"onInputChange",value:function(e){var t=this;return function(n){t.updateValue(e,n.target.value)}}},{key:"onValueChange",value:function(e){var t=this;return function(n){t.updateValue(e,n)}}},{key:"onTimeChange",value:function(e){var t=this;return function(n){t.setState({availabilityShouldUpdate:!0}),t.updateValue(e,n)}}},{key:"onValueUserChange",value:function(e){var t=this;return function(n){t.updateValue(e,n)}}},{key:"enableButton",value:function(){this.setState({canSubmit:!0})}},{key:"toggleState",value:function(e){var t=this;return function(){t.setState({expand:Ve(Ve({},t.state.expand),{},x()({},e,!t.state.expand[e]))})}}},{key:"expand",value:function(e){var t=this;return function(){t.setState({expand:Ve(Ve({},t.state.expand),{},x()({},e,!0))})}}},{key:"collapse",value:function(e){var t=this;return function(){t.setState({expand:Ve(Ve({},t.state.expand),{},x()({},e,!1))})}}},{key:"updateValue",value:function(e,t){var n=Ve(Ve({},this.props.values),{},x()({},e,t));this.props.onChange(n)}},{key:"updateValues",value:function(e){var t=Ve(Ve({},this.props.values),e);this.props.onChange(t)}},{key:"toggleValue",value:function(e){this.updateValue(e,!this.props.values[e])}},{key:"agreementLabel",value:function(){return i.a.createElement(i.a.Fragment,null,"I agree to the ",i.a.createElement("a",{onClick:this.onOpenAgreementDialog,role:"link",tabIndex:"0"},"terms of service"),".",i.a.createElement(L.a,{open:this.state.openAgreementDialog,onCancel:this.onCloseAgreementDialog,onClose:this.onCloseAgreementDialog,TransitionComponent:Ge,className:"dialog dialog--fullscreen"},i.a.createElement(q.a,{id:"responsive-dialog-title"},"Terms of service"),i.a.createElement(M.a,null,i.a.createElement(ie.a,null,i.a.createElement("span",{dangerouslySetInnerHTML:{__html:Ke}})))))}},{key:"disableButton",value:function(){this.setState({canSubmit:!1})}},{key:"render",value:function(){var e,t,n=this,a=this.props,r=a.closeEditDialog,o=a.combinedValues,l=a.event,s=a.meetingPurpose,c=a.min,u=a.max,d=a.room,p=a.roomAvailability,f=a.roomCapacity,m=a.step,h=a.values,v=this.state,b=v.state,g=v.uuid,y=this.isConflicted(),O=this.getDisabledTimespans(),E=!!function(e){return e&&e.data.attributes.field_requires_explanation}(s),R=null;return this.form=i.a.createRef(),F.a.intercept.user.telephone&&F.a.intercept.user.email&&(R=i.a.createElement("div",{className:"l--subsection"},i.a.createElement("h4",{className:"section-title section-title--secondary"},"Your Current Contact Information"),i.a.createElement("small",null,"Telephone: ",F.a.intercept.user.telephone,i.a.createElement("br",null),"Email: ",F.a.intercept.user.email,i.a.createElement("br",null),i.a.createElement("em",null,"Need to update your info? After finishing your reservation visit My Account > Profile.")))),t=i.a.createElement(Oe.a,{className:"form__main",ref:this.form,onValidSubmit:this.onOpenDialog,onValid:this.enableButton,onInvalid:this.disableButton,validationErrors:this.state.validationErrors},i.a.createElement("div",{className:"l--2-col"},i.a.createElement("div",{className:"l__main"},i.a.createElement("div",{className:"l__primary"},i.a.createElement("div",{className:"l--subsection"},i.a.createElement("h4",{className:"section-title section-title--secondary"},"Reservation Details"),i.a.createElement(me.a,{handleChange:this.onTimeChange("date"),value:h.date,name:"date",required:!0,clearable:!1,validations:"isFutureDate",validationErrors:{isFutureDate:"Date must be in the future"}}),i.a.createElement(pe.a,{clearable:!0,label:"Start Time",value:h.start||null,onChange:this.onTimeChange("start"),name:"start",required:!0,validations:{isFutureTime:!0,isAvailableTime:p,isAvailableDuration:p},validationErrors:{isFutureTime:"Must be in the future",isAvailableTime:"Room is not available",isAvailableDuration:"Reservation exceeds maximum duration"},min:c,max:u,step:m,disabledSpans:O,disabledExclude:"trailing"}),i.a.createElement(pe.a,{clearable:!0,label:"End Time",value:h.end||null,onChange:this.onTimeChange("end"),name:"end",required:!0,validations:{isFutureTime:!0,isAfterStart:!0,isAvailableTime:p,isAvailableDuration:p},validationErrors:{isFutureTime:"Must be in the future",isAfterStart:"Must be after start time",isAvailableTime:"Room is not available",isAvailableDuration:"Reservation exceeds maximum duration"},min:c,max:u,step:m,disabledSpans:O,disabledExclude:"leading"}),i.a.createElement(he.a,{label:"Number of Attendees",value:h.attendees,onChange:this.onValueChange("attendees"),min:f.min,name:"attendees",int:!0,required:!Ue.userIsStaff(),validations:{isPositive:!0,isLesserOrEqualTo:f.max,isGreaterOrEqualTo:f.min},validationErrors:{isPositive:"Attendees must be a positive number",isLesserOrEqualTo:"The maximum capacity of this room is ".concat(f.max),isGreaterOrEqualTo:"The minimum capacity of this room is ".concat(f.min)},helperText:f.max&&"This room holds ".concat(f.min," to ").concat(f.max," people")}),i.a.createElement(ve.a,{label:"Group Name",onChange:this.onValueChange("groupName"),value:h.groupName,name:"groupName",helperText:"Help others find you by name.",required:!Ue.userIsStaff()}),i.a.createElement(de.a,{type:Be.TYPE_MEETING_PURPOSE,name:"meetingPurpose",handleChange:this.onInputChange("meetingPurpose"),value:h.meetingPurpose,label:"Purpose for using this room",required:!Ue.userIsStaff()}),i.a.createElement(ve.a,{label:"Description",onChange:this.onValueChange("meetingDetails"),value:h.meetingDetails,name:"meetingDetails",required:E}),R)),i.a.createElement("div",{className:"l__secondary"},i.a.createElement("div",{className:"l--subsection"},i.a.createElement("h4",{className:"section-title section-title--secondary"},"Account"),i.a.createElement(fe.a,{label:"Reserved For",value:h.user,onChange:function(e){return n.onValueChange("user")(e.uuid)},name:"user"})),i.a.createElement("div",{className:"l--subsection"},i.a.createElement("h4",{className:"section-title section-title--secondary"},"Refreshments"),i.a.createElement(be.a,{label:"I would like to serve refreshments and agree to the $25 charge that will be added to my library card. (Note: Some spaces may not allow refreshments. We will contact you if we are unable to fulfill this request.)",value:h.refreshments,onChange:this.onValueChange("refreshments"),name:"refreshments",required:!0,options:He}),i.a.createElement(ve.a,{label:"Please describe your light refreshments.",value:h.refreshmentsDesc,onChange:this.onValueChange("refreshmentsDesc"),name:"refreshmentDesc",required:"1"===h.refreshments,disabled:"1"!==h.refreshments})),i.a.createElement("div",{className:"l--subsection"},i.a.createElement("h4",{className:"section-title section-title--secondary"},"Publicize"),i.a.createElement(be.a,{label:$e,value:h.publicize,onChange:this.onValueChange("publicize"),name:"publicize",required:!0,options:We})),Ke&&i.a.createElement("div",{className:"l--subsection"},i.a.createElement("h4",{className:"section-title section-title--secondary"},"Terms of Service"),i.a.createElement(ge.a,{label:this.agreementLabel(),checked:h.agreement,onChange:function(){return n.toggleValue("agreement")},required:!0,value:h.agreement,name:"agreement"})),i.a.createElement(Y.a,{size:"large",color:"secondary",className:"button button--secondary",onClick:r},"Cancel"),i.a.createElement(Y.a,{variant:"contained",size:"large",color:"primary",type:"submit",className:"button button--primary",disabled:!this.state.canSubmit||y||!d||!h.agreement},"Save"))))),i.a.createElement("div",{className:"form"},t,i.a.createElement(Ne,{open:this.state.openDialog,onCancel:this.onCloseDialog,onConfirm:function(){var e;return n.saveEntitytoStore(Ve(Ve({},o),{},(e={},x()(e,Be.TYPE_ROOM,d),x()(e,Be.TYPE_EVENT,l),e)))},state:b,uuid:g,values:Ve(Ve({},o),{},(e={},x()(e,Be.TYPE_ROOM,d),x()(e,Be.TYPE_EVENT,l),e))}),i.a.createElement(L.a,{fullScreen:!0,open:this.state.expand.findRoom,onClose:function(){},TransitionComponent:Ge,className:"dialog dialog--fullscreen"},i.a.createElement(le.a,{className:"dialog__app-bar app-bar"},i.a.createElement(se.a,null,i.a.createElement(ce.a,{color:"inherit",onClick:this.collapse("findRoom"),"aria-label":"Close"},i.a.createElement(re.a,null)),i.a.createElement(ue.a,{variant:"title",color:"inherit",className:"app-bar_heading"},"Find a Room")))))}}]),n}(o.PureComponent);Qe.propTypes={values:j.a.shape({agreement:j.a.bool,attendees:j.a.number,date:j.a.object,groupName:j.a.string,meetingDetails:j.a.string,meetingPurpose:j.a.string,refreshments:j.a.string,refreshmentsDesc:j.a.string,publicize:j.a.string,user:j.a.string,start:j.a.string,end:j.a.string}),onChange:j.a.func.isRequired,save:j.a.func.isRequired,meetingPurpose:j.a.object,combinedValues:j.a.object,room:j.a.string,roomCapacity:j.a.shape({min:j.a.number,max:j.a.number}).isRequired,event:j.a.string,entityId:j.a.string.isRequired,step:j.a.number,fetchAvailability:j.a.func.isRequired,availability:j.a.object.isRequired,roomAvailability:j.a.object},Qe.defaultProps={combinedValues:{},values:{agreement:!0,attendees:null,groupName:"",meetingPurpose:"",meetingDetails:"",refreshments:"",refreshmentsDesc:"",publicize:"",user:F.a.intercept.user.uuid},meetingPurpose:null,room:null,event:null,step:15,hasConflict:!1,roomAvailability:{}};var Xe=Object(k.b)((function(e,t){return{hours:t.values.date.start&&t.room?Fe.roomLocationHours(t.room,Ue.getDayTimeStamp(t.values.date.start))(e):Fe.locationsOpenHoursLimit(e),meetingPurpose:t.values[Be.TYPE_MEETING_PURPOSE]?Fe.record(Fe.getIdentifier(Be.TYPE_MEETING_PURPOSE,t.values[Be.TYPE_MEETING_PURPOSE]))(e):null,roomCapacity:t.room?Fe.roomCapacity(t.room)(e):{min:0,max:null},getRoomReservation:function(t){return Fe.roomReservation(t)(e)}}}),(function(e){return{save:function(t){return e(qe.edit(t,Be.TYPE_ROOM_RESERVATION,t.id)),Promise.resolve(Ye.getToken().then((function(n){e(Me[Be.TYPE_ROOM_RESERVATION].sync(t.id,{headers:{"X-CSRF-Token":n}}))})).catch((function(e){console.log("Unable to save Reservation",e)})))}}}))(Object(J.a)(Qe));function Je(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Ze(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Je(Object(n),!0).forEach((function(t){x()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Je(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function et(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=T()(e);if(t){var r=T()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return _()(this,n)}}var tt=p.a.actions,nt=p.a.api,at=p.a.select,rt=p.a.session,ot=p.a.utils,it=p.a.constants,lt=function(e){var t;return t={agreement:A()(e,"data.attributes.field_agreement"),attendees:A()(e,"data.attributes.field_attendee_count"),date:ot.dateFromDrupal(A()(e,"data.attributes.field_dates.value")),groupName:A()(e,"data.attributes.field_group_name")||"",meetingPurpose:A()(e,"data.relationships.field_meeting_purpose.data.id"),meetingDetails:A()(e,"data.attributes.field_meeting_purpose_details")||"",refreshments:A()(e,"data.attributes.field_refreshments")?"1":"0",refreshmentsDesc:A()(e,"data.attributes.field_refreshments_description.value")||""},x()(t,it.TYPE_ROOM,A()(e,"data.relationships.field_room.data.id")),x()(t,"publicize",A()(e,"data.attributes.field_publicize")?"1":"0"),x()(t,"start",ot.getTimeFromDate(ot.dateFromDrupal(A()(e,"data.attributes.field_dates.value")))),x()(t,"end",ot.getTimeFromDate(ot.dateFromDrupal(A()(e,"data.attributes.field_dates.end_value")))),x()(t,"user",F.a.intercept.user.uuid),t},st=function(e){R()(n,e);var t=et(n);function n(e){var a,r;return v()(this,n),r=t.call(this,e),x()(O()(r),"onlyTodaysReservations",(function(e){var t=r.state.formValues;return ot.dateFromDrupal(e.start)<N()(A()(t,"date")).tz(ot.getUserTimezone()).endOf("day")})),x()(O()(r),"getRoomAvailabilityQuery",(function(){var e=r.state.formValues,t=r.props,n=t.record,a=t.entityId;return{rooms:[A()(n,"data.relationships.field_room.data.id")],start:ot.getDateFromTime(e.start,e.date),end:ot.getDateFromTime(e.end,e.date),exclude_uuid:[a]}})),x()(O()(r),"getActions",(function(e){var t=O()(r),n=t.cancel,a=t.deny,o=t.approve,i=t.request,l=t.edit,s=r.state.editDialogOpen,c=ot.userIsManager();switch(e){case"requested":return c?[o(),a(),l()]:[l(),n()];case"denied":return c?[o(),n()]:null;case"approved":return c?[a(),l(),n()]:[l(),n()];case"canceled":return r.isConflicted()&&!s?r.getConflictedMessage():[i(),l()];default:return null}})),x()(O()(r),"getDialogProps",(function(e){switch(e){case"requested":return{status:"requested",heading:"Are you sure you want to rerequest this reservation?"};case"denied":return{status:"denied",heading:"Are you sure you want to deny this reservation?"};case"approved":return{status:"approved",heading:"Are you sure you want to approve this reservation?"};case"canceled":return{status:"canceled",heading:"Are you sure you want to cancel this reservation?",children:r.cancellationNotesInput()};default:return null}})),x()(O()(r),"getConflictedMessage",(function(){var e=r.props,t=e.record,n=e.availability,a=A()(t,"data.relationships.field_room.data.id");return!n.loading&&n.rooms[a]?i.a.createElement("p",{className:"action-button__message"},"This reservation time is no longer available."):""})),x()(O()(r),"getHours",(function(){var e=r.props.hours;return e?{min:e.min,max:e.max.endsWith("00")?String(e.max-55):String(e.max-15)}:{min:null,max:null}})),x()(O()(r),"setFormValues",(function(e){r.setState({formValues:Ze(Ze({},r.state.formValues),e)})})),x()(O()(r),"checkAvailability",(function(){var e=r.state,t=e.availabilityShouldUpdate,n=e.formValues,a=r.props,o=a.record,i=a.isLoading,l=a.availability,s=a.fetchAvailability;i||null===o||!t||null===n.date||null===n.start||null===n.end||n.start===n.end||l.loading||(r.setState({availabilityShouldUpdate:!1}),s(r.getRoomAvailabilityQuery()))})),x()(O()(r),"isConflicted",(function(){var e=r.props,t=e.record,n=e.availability,a=A()(t,"data.relationships.field_room.data.id");if(!n.loading&&n.rooms[a]){var o=n.rooms[a];return o.has_max_duration_conflict||o.has_open_hours_conflict||o.has_reservation_conflict}return!0})),x()(O()(r),"openDialog",(function(e){r.setState({open:!0,dialogProps:r.getDialogProps(e)})})),x()(O()(r),"openEditDialog",(function(){r.setState({editDialogOpen:!0})})),x()(O()(r),"closeDialog",(function(){r.setState({open:!1})})),x()(O()(r),"closeEditDialog",(function(){var e=r.props.record;r.setState({editDialogOpen:!1}),r.setFormValues(lt(e))})),x()(O()(r),"closeErrorDialog",(function(){r.props.fetchReservation(r.props.entityId),r.setState({errorDialogOpen:!1})})),x()(O()(r),"confirmDialog",(function(e,t){r.props.setStatusTo(e,t),r.closeDialog()})),x()(O()(r),"cancel",(function(){return r.actionButton({status:"canceled",label:"Cancel"})})),x()(O()(r),"deny",(function(){return r.actionButton({status:"denied",label:"Deny"})})),x()(O()(r),"request",(function(){return r.actionButton({status:"requested",label:"Rerequest"})})),x()(O()(r),"approve",(function(){return r.actionButton({status:"approved",label:"Approve",variant:"contained"})})),x()(O()(r),"edit",(function(){return r.editButton({label:"Edit",variant:"contained"})})),x()(O()(r),"handleFormChange",(function(e){var t=r.props.record;r.setState({formValues:Ze(Ze({},lt(t)),e),availabilityShouldUpdate:!0})})),x()(O()(r),"handleNotesChange",(function(e){r.setState({notes:e.target.value})})),x()(O()(r),"cancellationNotesInput",(function(){return!!ot.userIsManager()&&i.a.createElement(V.a,{label:"Cancellation Reason",type:"text",id:"notes",onChange:r.handleNotesChange,defaultValue:r.props.notes,className:"input input--text",InputLabelProps:{className:"input__label"},inputProps:{},fullWidth:!0})})),x()(O()(r),"dialog",(function(){var e=r.state,t=e.dialogProps,n=e.notes;return i.a.createElement(W.a,m()({},t,{open:r.state.open,onClose:r.onDialogClose,onCancel:r.closeDialog,onBackdropClick:null,disableEscapeKeyDown:r.state.disableEscapeKeyDown,disableBackdropClick:r.state.disableBackdropClick,onConfirm:function(){return r.confirmDialog(t.status,n)},confirmText:"Yes"}))})),x()(O()(r),"editDialog",(function(){var e=r.props,t=e.record,n=e.entityId,a=e.availability,o=ot.userIsStaff()?{min:"0000",max:"2400"}:r.getHours(),l=t?"Edit Reservation ".concat(A()(t,"data.attributes.location")):"Edit Reservation",s=A()(t,"data.relationships.field_room.data.id");return t?i.a.createElement(L.a,{open:r.state.editDialogOpen,onClose:r.closeEditDialog,"aria-labelledby":"responsive-dialog-title",onBackdropClick:r.closeEditDialog,maxWidth:"md"},i.a.createElement(q.a,{id:"responsive-dialog-title"},l),i.a.createElement(M.a,null,i.a.createElement(Xe,{closeEditDialog:r.closeEditDialog,entityId:n,values:r.state.formValues,combinedValues:r.state.formValues,onChange:r.handleFormChange,min:o.min,max:o.max,room:s,event:A()(t,"data.relationships.field_event.data.id"),roomAvailability:A()(a,"rooms.".concat(s))}))):null})),x()(O()(r),"errorDialog",(function(){var e=r.state.dialogProps,t=r.props.record,n=(A()(t,"state.error.errors")||[]).map((function(e){return e.detail.replace("Entity is not valid: ","")}))||"Unknown Error";return i.a.createElement(W.a,m()({},e,{open:r.state.errorDialogOpen,onClose:r.closeErrorDialog,onConfirm:r.closeErrorDialog,onBackdropClick:null,disableEscapeKeyDown:r.state.disableEscapeKeyDown,disableBackdropClick:r.state.disableBackdropClick,heading:"Unable to update reservation",text:n,confirmText:"Close"}))})),r.state={availabilityShouldUpdate:!0,open:!1,editDialogOpen:!1,errorDialogOpen:!1,disableBackdropClick:!0,disableEscapeKeyDown:!0,dialogProps:{},formValues:(a={},x()(a,it.TYPE_ROOM,e.room||null),x()(a,"date",null),x()(a,"start",null),x()(a,"end",null),x()(a,"agreement",ot.userIsStaff()),x()(a,"attendees",null),x()(a,"groupName",""),x()(a,"meeting",!1),x()(a,it.TYPE_MEETING_PURPOSE,null),x()(a,"meetingDetails",""),x()(a,"refreshmentsDesc",""),x()(a,"user",ot.getUserUuid()),a),notes:""},r.actionButton=r.actionButton.bind(O()(r)),r}return g()(n,[{key:"componentDidMount",value:function(){this.props.fetchReservation(this.props.entityId)}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.record,a=t.isLoading,r=e.record,o=A()(n,"state.error"),i=A()(r,"state.error");a||null===n||r===n||this.setFormValues(lt(n)),this.checkAvailability(e.record),o&&!i&&this.setState({errorDialogOpen:!0})}},{key:"actionButton",value:function(e){var t=this,n=e.status,a=e.label,r=e.variant,o=this.props,l=o.record,s=o.entityId;return l?i.a.createElement($,{entityId:s,type:it.TYPE_ROOM_RESERVATION,record:l,text:a,onClick:function(){return t.openDialog(n)},key:n,variant:r}):null}},{key:"editButton",value:function(e){var t=this,n=e.label,a=e.variant,r=this.props,o=r.record,l=r.entityId;return o?i.a.createElement($,{entityId:l,type:it.TYPE_ROOM_RESERVATION,record:o,text:n,onClick:function(){return t.openEditDialog()},key:"edit",variant:a}):null}},{key:"render",value:function(){var e=this.props,t=e.record,n=e.isLoading,a=A()(t,"data.attributes.field_status")||this.props.status,r=n?i.a.createElement(G.a,{loading:n,size:20}):this.getActions(a);return i.a.createElement("div",{className:"reservation-register-button__inner"},i.a.createElement(X,{status:a,syncing:A()(t,"state.syncing")}),r,this.dialog(),this.editDialog(),this.errorDialog())}}]),n}(i.a.Component);st.propTypes={entityId:j.a.string.isRequired,type:j.a.string.isRequired,status:j.a.string.isRequired,fetchReservation:j.a.func.isRequired,fetchAvailability:j.a.func.isRequired,availability:j.a.object.isRequired,isLoading:j.a.bool,setStatusTo:j.a.func.isRequired,record:j.a.object,notes:j.a.string},st.defaultProps={record:null,isLoading:!1,notes:null};var ct=Object(k.b)((function(e,t){var n=at.record(at.getIdentifier(it.TYPE_ROOM_RESERVATION,t.entityId))(e),a=A()(n,"data.relationships.field_room.data.id"),r=lt(n);return{hours:r&&r.date&&a?at.roomLocationHours(a,ot.getDayTimeStamp(r.date))(e):at.locationsOpenHoursLimit(e),room:a,rooms:at.roomsAscending(e),record:n,notes:A()(n,"data.attributes.notes"),isLoading:at.recordsAreLoading(it.TYPE_ROOM_RESERVATION)(e)||at.recordIsLoading(it.TYPE_ROOM_RESERVATION,t.entityId)(e)}}),(function(e,t){var n=t.entityId,a=t.type;return{setStatusTo:function(t,r,o){!function(t,r,o){var i=r.data;i.attributes.field_status=t,o&&(i.attributes.notes=o),e(tt.edit(i,a,n))}(t,r,o),rt.getToken().then((function(t){e(nt[a].sync(n,{headers:{"X-CSRF-Token":t}}))})).catch((function(e){console.log("Unable to save Reservation",e)}))},fetchReservation:function(t){e(nt[it.TYPE_ROOM_RESERVATION].fetchResource(t,{include:["field_room","field_room.field_location"],fields:x()({},it.TYPE_ROOM,["field_capacity_max","field_capacity_min","field_location"])}))}}}),(function(e,t,n){return Ze(Ze(Ze(Ze({},n),e),t),{},{setStatusTo:function(n,a){return t.setStatusTo(n,e.record,a)}})}))(Object(J.a)(st)),ut=Object(u.a)(ct);function dt(e){var t=e.getAttribute("data-reservation-uuid"),n=e.getAttribute("data-status");Object(l.render)(i.a.createElement(ut,{entityId:t,isStaff:p.a.utils.userIsStaff(),status:n,type:p.a.constants.TYPE_ROOM_RESERVATION}),e)}c.a.behaviors.roomReservationActionButtonApp={attach:function(e){r()(e.getElementsByClassName("js--room-reservation-action")).map(dt)}}},88:function(e,t,n){var a=n(307),r=n(308)((function(e,t){return null==e?{}:a(e,t)}));e.exports=r},89:function(e,t,n){"use strict";n(29),n(33),n(32),n(19),n(21),n(20);var a=n(61),r=n.n(a),o=n(23),i=n.n(o),l=n(10),s=n.n(l),c=n(9),u=n.n(c),d=n(11),p=n.n(d),f=n(12),m=n.n(f),h=n(5),v=n.n(h),b=n(0),g=n.n(b),y=n(1),O=n.n(y),E=n(18),R=n(6),C=n.n(R),_=(n(96),n(122),n(83),n(3)),D=n.n(_),T=n(2),P=n.n(T),x=n(15),S=n(17),j=n(331),k=n(531),w=n(328),N=n(232),I=n(233),A=n(389),V=n(234);function L(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=v()(e);if(t){var r=v()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return m()(this,n)}}var q={MenuListProps:{className:"select-filter__menu-list"},PaperProps:{style:{backfaceVisibility:"hidden",maxHeight:200,width:250}},getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"left"},className:"select-filter__menu"},M=function(e){p()(n,e);var t=L(n);function n(){var e;s()(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r)),P()(D()(e),"handleChange",(function(t){e.props.handleChange(t)})),e}return u()(n,[{key:"render",value:function(){var e=this.props,t=e.chips,n=e.labels,a=e.isValid,r=e.renderValue,o=e.options,i=e.label,l=e.multiple,s=e.name,c=e.required,u=e.value,d=function(e){return"select-filter--".concat(e)},p=function(e,t){return g.a.createElement("label",{className:"select-filter__checkbox-label"},e)};return g.a.createElement("div",{className:"select-filter input input--select"},g.a.createElement(N.a,{className:"select-filter__control"},g.a.createElement(I.a,{className:"select-filter__label",htmlFor:s,shrink:(n||t)&&u.length>=1,required:c},i),g.a.createElement(A.a,{multiple:l,value:u||"",onChange:this.handleChange,input:g.a.createElement(V.a,{id:s}),renderValue:r,MenuProps:q,error:!a,required:this.props.required},o.reduce(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return function(n,a){return[].concat(n,g.a.createElement(j.a,{key:a.key,value:a.key,className:"select-filter__menu-item","data-depth":t},g.a.createElement(k.a,{checked:l?u.indexOf(a.key)>-1:u===a.key,id:d(a.key),className:"select-filter__checkbox"}),g.a.createElement(w.a,{disableTypography:!0,primary:p(a.value,d(a.key))})),a.children&&a.children.reduce(e(t+1),[]))}}(),[]))))}}]),n}(g.a.Component);M.propTypes={label:O.a.string.isRequired,value:O.a.oneOfType([O.a.arrayOf(String),O.a.string]),options:O.a.arrayOf(Object).isRequired,renderValue:O.a.func,handleChange:O.a.func.isRequired,multiple:O.a.bool,chips:O.a.bool,labels:O.a.bool},M.defaultProps={value:null,multiple:!1,chips:!1,labels:!1,renderValue:function(){return null}};var z=Object(x.a)((function(e){return{root:{display:"flex",flexWrap:"wrap"},formControl:{margin:e.spacing(1),minWidth:120,maxWidth:300,width:"100%"},inputLabel:{margin:0}}}),{withTheme:!0})(Object(S.withFormsy)(M)),F=n(117),Y=n(154),U=C.a.select,B=function(e){var t=e.identifier,n=e.label,a=t.id;return g.a.createElement("div",{key:a,className:"option-label"},n)};B.propTypes={identifier:O.a.shape({id:O.a.string,type:O.a.string}).isRequired,label:O.a.string},B.defaultProps={label:""};var H=Object(E.b)((function(e,t){return{label:U.recordLabel(t.identifier)(e)}}))(B);function $(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=v()(e);if(t){var r=v()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return m()(this,n)}}var W=C.a.select,G=C.a.api,K=function(e){p()(n,e);var t=$(n);function n(){return s()(this,n),t.apply(this,arguments)}return u()(n,[{key:"componentDidMount",value:function(){this.props.shouldFetch&&this.props.fetchAll({})}},{key:"render",value:function(){var e=this.props,t=e.chips,n=e.labels,a=e.value,o=e.multiple,l=e.type,s=e.handleChange,c=function(){};return n&&(c=function(e){return g.a.createElement("div",{className:"current-filter current-filter--embedded"},e.map((function(e){return g.a.createElement(H,{key:e,identifier:{type:l,id:e}})})))}),t&&(c=function(e){return g.a.createElement("div",{className:"current-filter current-filter--embedded"},e.map((function(e){return g.a.createElement(Y.a,{key:e,identifier:{type:l,id:e},onDelete:function(e){return s({target:{value:a.filter((function(t){return t!==e}))}})}})})))}),o?g.a.createElement(z,i()({},this.props,{value:null===a?[]:a,renderValue:c})):g.a.createElement(F.a,i()({},this.props,{options:[{key:"",value:"None"}].concat(r()(this.props.options)),value:a}))}}]),n}(g.a.Component);K.defaultProps={chips:!1,labels:!1,multiple:!1,value:null,shouldFetch:!0},K.propTypes={chips:O.a.bool,labels:O.a.bool,handleChange:O.a.func.isRequired,fetchAll:O.a.func.isRequired,label:O.a.string.isRequired,multiple:O.a.bool,shouldFetch:O.a.bool,options:O.a.arrayOf(Object).isRequired,value:O.a.oneOfType([O.a.arrayOf(String),O.a.string]),type:O.a.string.isRequired};t.a=Object(E.b)((function(e,t){return{options:W.recordOptions(t.type)(e)}}),(function(e,t){return{fetchAll:function(n){e(G[t.type].fetchAll(n))}}}))(K)},97:function(e,t,n){"use strict";n(29),n(19),n(21),n(20);var a=n(2),r=n.n(a),o=n(10),i=n.n(o),l=n(9),s=n.n(l),c=n(11),u=n.n(c),d=n(12),p=n.n(d),f=n(5),m=n.n(f),h=n(0),v=n.n(h),b=n(1),g=n.n(b),y=n(17),O=n(528),E=n(531);function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=m()(e);if(t){var r=m()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return p()(this,n)}}var D=function(e){u()(n,e);var t=_(n);function n(){return i()(this,n),t.apply(this,arguments)}return s()(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.label,a=(t.isValid,t.onChange),r=t.errorMessage,o=(t.isRequired,t.checked),i=t.value,l=r||"";return this.props.helperText&&(l="".concat(this.props.helperText," ").concat(l)),v.a.createElement(O.a,{className:"input input--checkbox",checked:o,onChange:function(t){a(t.target.value),e.props.setValue(t.target.value)},value:i,control:v.a.createElement(E.a,{className:"input--checkbox__checkbox"}),label:n})}}]),n}(v.a.PureComponent);D.propTypes=C(C({},y.propTypes),{},{onChange:g.a.func.isRequired,checked:g.a.bool,value:g.a.oneOfType([g.a.string,g.a.bool]).isRequired,label:g.a.oneOfType([g.a.string,g.a.object]),validators:g.a.arrayOf(String)}),D.defaultProps=C(C({},y.defaultProps),{},{checked:!1,label:"Agree",validators:[]}),t.a=Object(y.withFormsy)(D)}});