!function(e){function t(t){for(var r,i,c=t[0],s=t[1],u=t[2],f=0,d=[];f<c.length;f++)i=c[f],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&d.push(a[i][0]),a[i]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);for(l&&l(t);d.length;)d.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,c=1;c<n.length;c++){var s=n[c];0!==a[s]&&(r=!1)}r&&(o.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},a={13:0},o=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var c=window.wpJsonpIntercept=window.wpJsonpIntercept||[],s=c.push.bind(c);c.push=t,c=c.slice();for(var u=0;u<c.length;u++)t(c[u]);var l=s;o.push([869,0]),n()}({0:function(e,t){e.exports=React},123:function(e,t){e.exports=interceptTheme},15:function(e,t){e.exports=moment},164:function(e,t,n){var r=n(182),a=n(245),o=n(246);e.exports=function(e,t){return o(a(e,t,r),e+"")}},189:function(e,t,n){var r=n(149),a=n(150),o=n(249),i=n(304);e.exports=function(e,t){if(null==e)return{};var n=r(i(e),(function(e){return[e]}));return t=a(t),o(e,n,(function(e,n){return t(e,n[0])}))}},190:function(e,t,n){"use strict";n(19),n(106),n(21),n(20);var r=n(10),a=n.n(r),o=n(9),i=n.n(o),c=n(11),s=n.n(c),u=n(12),l=n.n(u),f=n(5),d=n.n(f),p=n(0),m=n.n(p),v=n(1),h=n.n(v);function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d()(e);if(t){var a=d()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return l()(this,n)}}var b=function(e){s()(n,e);var t=g(n);function n(){return a()(this,n),t.apply(this,arguments)}return i()(n,[{key:"render",value:function(){var e=this.props,t=e.userStatus,n=e.query,r="";if(!(t.exceededLimit&&t.initialized||!1!==window.drupalSettings.intercept.user.barred||window.drupalSettings.intercept.room_reservations.eligibility&&"all"!==window.drupalSettings.intercept.room_reservations.eligibility&&"study"!==window.drupalSettings.intercept.room_reservations.eligibility))return null;var a=encodeURIComponent(window.location.pathname+n);if(0===window.drupalSettings.user.uid)r=m.a.createElement("p",{className:"value-summary__footer-text"},"You must be logged in to reserve rooms."," ",m.a.createElement("a",{className:"value-summary__footer-link",href:"/user/login?destination=".concat(a)},"Log in now"));else if(!0===window.drupalSettings.intercept.user.barred){var o=window.drupalSettings.intercept.room_reservations.reservation_barred_text;r=m.a.createElement("p",{className:"value-summary__footer-text",dangerouslySetInnerHTML:{__html:o}})}else if("none"===window.drupalSettings.intercept.room_reservations.eligibility){var i=window.drupalSettings.intercept.room_reservations.eligibility_text;r=m.a.createElement("p",{className:"value-summary__footer-text",dangerouslySetInnerHTML:{__html:i}})}else r=m.a.createElement("p",{className:"value-summary__footer-text"},"You are only allowed to reserve a maximum of ",t.limit," room",1===parseInt(t.limit,10)?"":"s"," at a time."," ",m.a.createElement("a",{className:"value-summary__footer-link",href:"/account/room-reservations"},"View your current reservations."));return m.a.createElement("div",{className:"value-summary__footer value-summary__footer--".concat(this.props.level)},r)}}]),n}(m.a.PureComponent);b.propTypes={userStatus:h.a.object.isRequired,level:h.a.string,query:h.a.string},b.defaultProps={level:"error",query:""},t.a=b},191:function(e,t,n){"use strict";n(41),n(33),n(39),n(44),n(45),n(37),n(19),n(79),n(21),n(20),n(40);var r=n(23),a=n.n(r),o=n(10),i=n.n(o),c=n(9),s=n.n(c),u=n(3),l=n.n(u),f=n(11),d=n.n(f),p=n(12),m=n.n(p),v=n(5),h=n.n(v),g=n(2),b=n.n(g),y=n(0),O=n.n(y),E=n(38),w=n.n(E);function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){b()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h()(e);if(t){var a=h()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return m()(this,n)}}t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;return function(n){d()(o,n);var r=j(o);function o(e){var n;return i()(this,o),n=r.call(this,e),b()(l()(n),"handleResponse",(function(e){return n.mounted&&n.setState({userStatus:S(S({},n.state.userStatus),{},{loading:!1},JSON.parse(e))}),e})),n.handleResponse=n.handleResponse.bind(l()(n)),n.fetchUserStatus=w()(n.fetchUserStatus,t).bind(l()(n)),n.state={userStatus:{loading:!1,initialized:!1}},n}return s()(o,[{key:"componentDidMount",value:function(){this.mounted=!0}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"fetchUserStatus",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){return e};return 0===window.drupalSettings.user.uid?(this.setState({userStatus:S(S({},this.state.userStatus),{},{loading:!1,initialized:!0,exceededLimit:!0})}),Promise.resolve({exceededLimit:!0,limit:0})):(this.setState({userStatus:S(S({},this.state.userStatus),{},{loading:!0,initialized:!0})}),fetch("/api/rooms/user/status",{method:"GET",credentials:"same-origin",headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((function(e){return e.text()})).then((function(n){return t(e.handleResponse(n))})).catch((function(t){e.mounted&&(console.log(t),e.setState({userStatus:S(S({},e.state.userStatus),{},{loading:!1})}))})))}},{key:"render",value:function(){return O.a.createElement(e,a()({userStatus:this.state.userStatus,fetchUserStatus:this.fetchUserStatus},this.props))}}]),o}(O.a.Component)}},223:function(e,t,n){var r=n(411),a=n(412),o=n(289),i=n(99),c=n(131),s=n(341),u=n(244),l=n(342),f=Object.prototype.hasOwnProperty;e.exports=function(e){if(null==e)return!0;if(c(e)&&(i(e)||"string"==typeof e||"function"==typeof e.splice||s(e)||l(e)||o(e)))return!e.length;var t=a(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(u(e))return!r(e).length;for(var n in e)if(f.call(e,n))return!1;return!0}},25:function(e,t){e.exports=ReactDOM},251:function(e,t,n){var r=n(49),a=n(163);e.exports=function(e,t,n){var o,i;return a&&"function"==typeof(o=t.constructor)&&o!==n&&r(i=o.prototype)&&i!==n.prototype&&a(e,i),e}},304:function(e,t,n){var r=n(345),a=n(305),o=n(307);e.exports=function(e){return r(e,o,a)}},305:function(e,t,n){var r=n(295),a=n(306),o=n(346),i=n(348),c=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)r(t,o(e)),e=a(e);return t}:i;e.exports=c},306:function(e,t,n){var r=n(343)(Object.getPrototypeOf,Object);e.exports=r},307:function(e,t,n){var r=n(340),a=n(308),o=n(131);e.exports=function(e){return o(e)?r(e,!0):a(e)}},308:function(e,t,n){var r=n(130),a=n(244),o=n(309),i=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return o(e);var t=a(e),n=[];for(var c in e)("constructor"!=c||!t&&i.call(e,c))&&n.push(c);return n}},309:function(e,t){e.exports=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}},315:function(e,t,n){var r=n(183),a=n(425),o=n(164),i=n(429),c=o((function(e,t){if(null==e)return[];var n=t.length;return n>1&&i(e,t[0],t[1])?t=[]:n>2&&i(t[0],t[1],t[2])&&(t=[t[0]]),a(e,r(t,1),[])}));e.exports=c},322:function(e,t,n){"use strict";t.__esModule=!0,t.notify=function(e,t){e&&e.apply(null,[].concat(t))},t.instanceId=function(e,t){void 0===t&&(t="");return e.__id||(e.__id=function(e){return""+((null==e?"":e)+ ++r)}("rw_")),(e.props.id||e.__id)+t},t.isFirstFocusedRender=function(e){return e._firstFocus||e.state.focused&&(e._firstFocus=!0)};var r=0},357:function(e,t,n){"use strict";var r=n(16),a=n(78).find,o=n(137),i=n(89),c=!0,s=i("find");"find"in[]&&Array(1).find((function(){c=!1})),r({target:"Array",proto:!0,forced:c||!s},{find:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}}),o("find")},378:function(e,t){e.exports=jQuery},425:function(e,t,n){var r=n(149),a=n(150),o=n(414),i=n(426),c=n(243),s=n(427),u=n(182);e.exports=function(e,t,n){var l=-1;t=r(t.length?t:[u],c(a));var f=o(e,(function(e,n,a){return{criteria:r(t,(function(t){return t(e)})),index:++l,value:e}}));return i(f,(function(e,t){return s(e,t,n)}))}},426:function(e,t){e.exports=function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}},427:function(e,t,n){var r=n(428);e.exports=function(e,t,n){for(var a=-1,o=e.criteria,i=t.criteria,c=o.length,s=n.length;++a<c;){var u=r(o[a],i[a]);if(u)return a>=s?u:u*("desc"==n[a]?-1:1)}return e.index-t.index}},428:function(e,t,n){var r=n(242);e.exports=function(e,t){if(e!==t){var n=void 0!==e,a=null===e,o=e==e,i=r(e),c=void 0!==t,s=null===t,u=t==t,l=r(t);if(!s&&!l&&!i&&e>t||i&&c&&u&&!s&&!l||a&&c&&u||!n&&u||!o)return 1;if(!a&&!i&&!l&&e<t||l&&n&&o&&!a&&!i||s&&n&&o||!c&&o||!u)return-1}return 0}},429:function(e,t,n){var r=n(286),a=n(131),o=n(291),i=n(130);e.exports=function(e,t,n){if(!i(n))return!1;var c=typeof t;return!!("number"==c?a(n)&&o(t,n.length):"string"==c&&t in n)&&r(n[t],e)}},431:function(e,t,n){"use strict";var r=n(16),a=n(160),o=n(104),i=n(47),c=n(69),s=n(231),u=n(179),l=n(232),f=n(89),d=l("splice"),p=f("splice",{ACCESSORS:!0,0:0,1:2}),m=Math.max,v=Math.min;r({target:"Array",proto:!0,forced:!d||!p},{splice:function(e,t){var n,r,l,f,d,p,h=c(this),g=i(h.length),b=a(e,g),y=arguments.length;if(0===y?n=r=0:1===y?(n=0,r=g-b):(n=y-2,r=v(m(o(t),0),g-b)),g+n-r>9007199254740991)throw TypeError("Maximum allowed length exceeded");for(l=s(h,r),f=0;f<r;f++)(d=b+f)in h&&u(l,f,h[d]);if(l.length=r,n<r){for(f=b;f<g-r;f++)p=f+n,(d=f+r)in h?h[p]=h[d]:delete h[p];for(f=g;f>g-r+n;f--)delete h[f-1]}else if(n>r)for(f=g-r;f>b;f--)p=f+n-1,(d=f+r-1)in h?h[p]=h[d]:delete h[p];for(f=0;f<n;f++)h[f+b]=arguments[f+2];return h.length=g-r+n,l}})},432:function(e,t,n){"use strict";var r=n(51),a=n(36),o=n(230),i=n(88),c=n(72),s=n(147),u=n(251),l=n(128),f=n(32),d=n(138),p=n(177).f,m=n(77).f,v=n(63).f,h=n(161).trim,g=a.Number,b=g.prototype,y="Number"==s(d(b)),O=function(e){var t,n,r,a,o,i,c,s,u=l(e,!1);if("string"==typeof u&&u.length>2)if(43===(t=(u=h(u)).charCodeAt(0))||45===t){if(88===(n=u.charCodeAt(2))||120===n)return NaN}else if(48===t){switch(u.charCodeAt(1)){case 66:case 98:r=2,a=49;break;case 79:case 111:r=8,a=55;break;default:return+u}for(i=(o=u.slice(2)).length,c=0;c<i;c++)if((s=o.charCodeAt(c))<48||s>a)return NaN;return parseInt(o,r)}return+u};if(o("Number",!g(" 0o1")||!g("0b1")||g("+0x1"))){for(var E,w=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof w&&(y?f((function(){b.valueOf.call(n)})):"Number"!=s(n))?u(new g(O(t)),n,w):O(t)},_=r?p(g):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),S=0;_.length>S;S++)c(g,E=_[S])&&!c(w,E)&&v(w,E,m(g,E));w.prototype=b,b.constructor=w,i(a,"Number",w)}},434:function(e,t,n){"use strict";var r=n(16),a=n(97),o=n(420),i=n(32),c=n(112),s=n(136),u=n(422),l=n(88);r({target:"Promise",proto:!0,real:!0,forced:!!o&&i((function(){o.prototype.finally.call({then:function(){}},(function(){}))}))},{finally:function(e){var t=s(this,c("Promise")),n="function"==typeof e;return this.then(n?function(n){return u(t,e()).then((function(){return n}))}:e,n?function(n){return u(t,e()).then((function(){throw n}))}:e)}}),a||"function"!=typeof o||o.prototype.finally||l(o.prototype,"finally",c("Promise").prototype.finally)},530:function(e,t,n){var r=n(867),a=n(288),o=n(868),i=n(99);e.exports=function(e,t){return(i(e)?r:a)(e,o(t))}},531:function(e,t,n){"use strict";var r=n(57);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(0)),o=(0,r(n(107)).default)(a.default.createElement("path",{d:"M20 3h-1V1h-2v2H7V1H5v2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 18H4V8h16v13z"}),"CalendarToday");t.default=o},6:function(e,t){e.exports=interceptClient},61:function(e,t,n){"use strict";n(41),n(33),n(39),n(44),n(45),n(37),n(19),n(79),n(21),n(20),n(40);var r=n(23),a=n.n(r),o=n(10),i=n.n(o),c=n(9),s=n.n(c),u=n(3),l=n.n(u),f=n(11),d=n.n(f),p=n(12),m=n.n(p),v=n(5),h=n.n(v),g=n(2),b=n.n(g),y=n(0),O=n.n(y),E=n(38),w=n.n(E),_=n(6);function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){b()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h()(e);if(t){var a=h()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return m()(this,n)}}var x=n.n(_).a.utils;t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200;return function(n){d()(o,n);var r=D(o);function o(e){var n;return i()(this,o),n=r.call(this,e),b()(l()(n),"handleResponse",(function(e){return n.mounted&&n.setState({availability:j(j({},n.state.availability),{},{loading:!1,rooms:JSON.parse(e),shouldUpdate:!1})}),e})),n.handleResponse=n.handleResponse.bind(l()(n)),n.fetchAvailability=w()(n.fetchAvailability,t).bind(l()(n)),n.state={availability:{loading:!1,shouldUpdate:!1,rooms:[]}},n}return s()(o,[{key:"componentDidMount",value:function(){this.mounted=!0}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"fetchAvailability",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e};return this.setState({availability:j(j({},this.state.availability),{},{loading:!0,shouldUpdate:!1})}),fetch("/api/rooms/availability",{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(j(j({},e),{},{start:x.dateToDrupal(x.ensureDate(e.start)),end:x.dateToDrupal(x.ensureDate(e.end))}))}).then((function(e){return e.text()})).then((function(e){return n(t.handleResponse(e))})).catch((function(e){t.mounted&&(console.log(e),t.setState({availability:j(j({},t.state.availability),{},{loading:!1,shouldUpdate:!1})}))}))}},{key:"render",value:function(){return O.a.createElement(e,a()({availability:this.state.availability,fetchAvailability:this.fetchAvailability},this.props))}}]),o}(O.a.Component)}},85:function(e,t,n){var r=n(864),a=n(865),o=n(461),i=n(866);e.exports=function(e,t){return r(e)||a(e,t)||o(e,t)||i()}},864:function(e,t){e.exports=function(e){if(Array.isArray(e))return e}},865:function(e,t){e.exports=function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}return n}}},866:function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},867:function(e,t){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}},868:function(e,t,n){var r=n(182);e.exports=function(e){return"function"==typeof e?e:r}},869:function(e,t,n){"use strict";n.r(t);var r,a=n(0),o=n.n(a),i=n(25),c=n(71),s=n(2),u=n.n(s),l=n(30),f=(n(189),n(15)),d=n.n(f),p=n(6),m=n.n(p),v=n(202),h=l.Serialize.decodeArray,g=l.Serialize.encodeArray,b=(l.Serialize.decodeBoolean,l.Serialize.encodeBoolean,l.Serialize.decodeObject,l.Serialize.encodeObject,l.Serialize.decodeString,l.Serialize.encodeString,m.a.constants,m.a.utils),y=function(e){return g(e,"[]")||[]},O=function(e){return h(e,"[]")||[]},E=(r={view:{type:l.UrlQueryParamTypes.string},date:{type:{decode:function(e){var t=Object(l.decode)(l.UrlQueryParamTypes.date,e)||null;if(null!==t)return b.convertDateFromLocal(t,b.getUserTimezone())},encode:function(e){return d()(e).format("YYYY-MM-DD")||null}}},room:{type:l.UrlQueryParamTypes.string},roomDetail:{type:l.UrlQueryParamTypes.string},location:{type:{decode:O,encode:y}},type:{type:{decode:O,encode:y}},"max-capacity":{type:l.UrlQueryParamTypes.number}},u()(r,"start",{type:l.UrlQueryParamTypes.string}),u()(r,"end",{type:l.UrlQueryParamTypes.string}),u()(r,"detail",{type:l.UrlQueryParamTypes.boolean}),u()(r,"event",{type:l.UrlQueryParamTypes.string}),r),w=function(e){return Object(v.a)(Object(l.addUrlProps)({urlPropsQueryConfig:E})(e))},_=(n(41),n(29),n(33),n(357),n(39),n(31),n(432),n(44),n(45),n(37),n(40),n(85)),S=n.n(_),j=n(62),D=n.n(j),x=n(1),R=n.n(x),P=n(18),N=n(530),A=n.n(N),C=n(7),T=n.n(C),M=n(223),z=n.n(M),k=n(56),I=n.n(k),F=(n(358),n(19),n(106),n(21),n(20),n(3)),U=n.n(F),L=n(23),Y=n.n(L),q=n(10),H=n.n(q),B=n(9),V=n.n(B),G=n(11),W=n.n(G),Q=n(12),J=n.n(Q),X=n(5),Z=n.n(X),K=n(199),$=n(195),ee=n.n($),te=n(66),ne=n(226),re=n(884),ae=n(14),oe=n(86),ie=n(444),ce=n(197),se=n.n(ce),ue=n(198),le=n.n(ue),fe=n(531),de=n.n(fe),pe=n(440),me=n.n(pe),ve=n(201),he=function(e){var t=e.event;return o.a.createElement("div",{className:"reservation-calendar-event reservation-calendar-event"},o.a.createElement("p",{className:"reservation-calendar-event__title"},t.title))};he.propTypes={event:R.a.shape({title:R.a.string.isRequired}).isRequired};var ge=he,be=(n(98),n(120),n(176)),ye=n.n(be),Oe=n(8),Ee=n(22),we=n(322),_e=n(314),Se=n(145);function je(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Z()(e);if(t){var a=Z()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return J()(this,n)}}var De=function(e){W()(n,e);var t=je(n);function n(){var e;H()(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),u()(U()(e),"handleResizeUp",(function(t){0===t.button&&(t.stopPropagation(),e.context.draggable.onBeginAction(e.props.event,"resize","UP"))})),u()(U()(e),"handleResizeDown",(function(t){0===t.button&&(t.stopPropagation(),e.context.draggable.onBeginAction(e.props.event,"resize","DOWN"))})),u()(U()(e),"handleResizeLeft",(function(t){0===t.button&&(t.stopPropagation(),e.context.draggable.onBeginAction(e.props.event,"resize","LEFT"))})),u()(U()(e),"handleResizeRight",(function(t){0===t.button&&(t.stopPropagation(),e.context.draggable.onBeginAction(e.props.event,"resize","RIGHT"))})),u()(U()(e),"handleStartDragging",(function(t){0===t.button&&e.context.draggable.onBeginAction(e.props.event,"move")})),e}return V()(n,[{key:"renderAnchor",value:function(e){var t="Up"===e||"Down"===e?"ns":"ew";return o.a.createElement("div",{className:"rbc-addons-dnd-resize-".concat(t,"-anchor"),onMouseDown:this["handleResize".concat(e)],role:"button",tabIndex:0},o.a.createElement("div",{className:"rbc-addons-dnd-resize-".concat(t,"-icon")}))}},{key:"render",value:function(){var e=this.props,t=e.event,n=(e.type,e.continuesPrior),r=e.continuesAfter,a=this.props.children,i=Object(Se.accessor)(t,"isEditable");if(t.__isPreview)return o.a.cloneElement(a,{className:Object(Oe.default)(a.props.className,"rbc-addons-dnd-drag-preview")});var c=this.context.draggable,s=c.draggableAccessor,u=c.resizableAccessor,l=i&&(!s||!!Object(Se.accessor)(t,s));if(!l)return a;var f=i&&(!u||!!Object(Se.accessor)(t,u));if(f||l){var d={onMouseDown:this.handleStartDragging,onTouchStart:this.handleStartDragging};if(f){var p,m;p=!n&&this.renderAnchor("Left"),m=!r&&this.renderAnchor("Right"),d.children=o.a.createElement("div",{className:"rbc-addons-dnd-resizable"},p,a.props.children,m)}c.dragAndDropAction.interacting&&c.dragAndDropAction.event===t&&(d.className=Object(Oe.default)(a.props.className,"rbc-addons-dnd-dragged-event")),a=o.a.cloneElement(a,d)}return a}}]),n}(o.a.Component);u()(De,"contextTypes",{draggable:R.a.shape({onStart:R.a.func,onEnd:R.a.func,onBeginAction:R.a.func,draggableAccessor:_e.accessor,resizableAccessor:_e.accessor,dragAndDropAction:R.a.object})}),u()(De,"propTypes",{type:R.a.oneOf(["date","time"]),event:R.a.object.isRequired,draggable:R.a.bool,allDay:R.a.bool,isRow:R.a.bool,continuesPrior:R.a.bool,continuesAfter:R.a.bool,isDragging:R.a.bool,isResizing:R.a.bool});var xe=De,Re=n(46),Pe=n(110),Ne=n.n(Pe);function Ae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ae(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ae(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Te(e){return"string"==typeof e?e:e+"%"}var Me=function(e){var t=e.style,n=e.className,r=e.event,a=e.accessors,i=(e.rtl,e.selected),c=e.label,s=e.continuesEarlier,u=e.continuesLater,l=e.getters,f=e.onClick,d=e.onDoubleClick,p=e.components,m=p.event,v=p.eventWrapper,h=Object(Se.accessor)(r,"isEditable"),g=a.title(r),b=a.tooltip(r),y=a.end(r),O=a.start(r),E=l.eventProp(r,O,y,i),w=t.height,_=t.top,S=t.width,j=t.left,D=(t.xOffset,[o.a.createElement("div",{key:"1",className:"rbc-event-label"},c),o.a.createElement("div",{key:"2",className:"rbc-event-content"},m?o.a.createElement(m,{event:r,title:g}):g)]);return o.a.createElement(v,Y()({type:"time"},e),o.a.createElement("div",{onClick:h?f:null,onDoubleClick:h?d:null,style:Ce(Ce({},E.style),{},{top:Te(_),left:Te(j),width:Te(S),height:Te(w)}),title:b?("string"==typeof c?c+": ":"")+b:void 0,className:Object(Oe.default)("rbc-event",n,E.className,{"rbc-selected":i,"rbc-event-continues-earlier":s,"rbc-event-continues-later":u})},D))},ze=n(312),ke=n(439),Ie=n.n(ke);function Fe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ue(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fe(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Le(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Z()(e);if(t){var a=Z()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return J()(this,n)}}var Ye=function(e,t){var n=t.x,r=t.y,a=e.left,o=e.bottom,i=e.top;return r<o&&r>i&&n>a},qe=function(e){W()(n,e);var t=Le(n);function n(){var e;H()(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return e=t.call.apply(t,[this].concat(a)),u()(U()(e),"handleMove",(function(t,n){var r=e.context.draggable.dragAndDropAction.event,a=e.props,o=a.accessors,i=a.slotMetrics;if(Ye(n,t)){var c=i.closestSlotFromPoint({y:t.y-e.eventOffsetTop,x:t.x},n),s=o.start(r),u=o.end(r),l=Re.add(c,Re.diff(s,u,"minutes"),"minutes");e.update(r,i.getRange(c,l,!1,!0))}else e.reset()})),u()(U()(e),"handleDropFromOutside",(function(t,n){var r=e.props,a=r.slotMetrics,o=r.resource,i=a.closestSlotFromPoint({y:t.y,x:t.x},n);e.context.draggable.onDropFromOutside({start:i,end:a.nextSlot(i),allDay:!1,resource:o})})),u()(U()(e),"_selectable",(function(){var t=Object(i.findDOMNode)(U()(e)),n=e._selector=new Ne.a((function(){return t.closest(".rbc-time-view")})),r=function(n){var r=e.props.slotMetrics.closestSlotFromPoint(n,Object(Pe.getBoundsForNode)(t));e.state.selecting||(e._initialSlot=r);var a=e._initialSlot;Re.lte(a,r)?r=e.props.slotMetrics.nextSlot(r):Re.gt(a,r)&&(a=e.props.slotMetrics.nextSlot(a));var o=e.props.slotMetrics.getRange(Re.min(a,r),Re.max(a,r));return Ue(Ue({},o),{},{selecting:!0,left:"".concat(o.left,"%"),width:"".concat(o.width,"%")})},a=function(t){var n=e.props.onSelecting,a=e.state||{},o=r(t),i=o.startDate,c=o.endDate;n&&(Re.eq(a.startDate,i,"minutes")&&Re.eq(a.endDate,c,"minutes")||!1===n({start:i,end:c,resourceId:e.props.resource}))||e.state.start===o.start&&e.state.end===o.end&&e.state.selecting===o.selecting||e.setState(o)},o=function(t,n){if(!Object(Pe.isEvent)(Object(i.findDOMNode)(U()(e)),t)){var a=r(t),o=a.startDate,c=a.endDate;e._selectSlot({startDate:o,endDate:c,action:n,box:t})}e.setState({selecting:!1})};n.on("beforeSelect",(function(n){var r=e.context.draggable.dragAndDropAction;if(!r.action){if("ignoreEvents"!==e.props.selectable)return;return!Object(Pe.isEvent)(Object(i.findDOMNode)(U()(e)),n)&&Ye(Object(Pe.getBoundsForNode)(t),n)}if("resize"===r.action)return Ye(Object(Pe.getBoundsForNode)(t),n);var a=Object(Pe.getEventNodeFromPoint)(t,n);if(!a)return!1;e.eventOffsetLeft=n.x-Object(Pe.getBoundsForNode)(a).left})),n.on("selecting",(function(n){var r=e.context.draggable.dragAndDropAction;if(r.action){var o=Object(Pe.getBoundsForNode)(t);"move"===r.action&&e.handleMove(n,o),"resize"===r.action&&e.handleResize(n,o)}else a(n)})),n.on("dropFromOutside",(function(n){if(e.context.draggable.onDropFromOutside){var r=Object(Pe.getBoundsForNode)(t);Ye(r,n)&&e.handleDropFromOutside(n,r)}})),n.on("dragOver",(function(n){if(e.context.draggable.dragFromOutsideItem){var r=Object(Pe.getBoundsForNode)(t);e.handleDropFromOutside(n,r)}})),n.on("selectStart",(function(t){e.context.draggable.dragAndDropAction.action?e.context.draggable.onStart():a(t)})),n.on("select",(function(n){e.state.selecting&&(e._selectSlot(Ue(Ue({},e.state),{},{action:"select",point:n})),e.setState({selecting:!1}));var r=Object(Pe.getBoundsForNode)(t);e.state.event&&Ye(r,n)&&e.handleInteractionEnd()})),n.on("click",(function(t){o(t,"click"),e.context.draggable.onEnd(null)})),n.on("doubleClick",(function(e){return o(e,"doubleClick")})),n.on("reset",(function(){e.reset(),e.context.draggable.onEnd(null)}))})),u()(U()(e),"handleInteractionEnd",(function(){var t=e.props.resource,n=e.state.event;e.reset(),e.context.draggable.onEnd({start:n.start,end:n.end,resourceId:t})})),u()(U()(e),"_teardownSelectable",(function(){e._selector&&(e._selector.teardown(),e._selector=null)})),u()(U()(e),"_selectSlot",(function(t){for(var n=t.startDate,r=t.endDate,a=t.action,o=t.bounds,i=t.box,c=n,s=[];Re.lte(c,r);)s.push(c),c=Re.add(c,e.props.step,"minutes");Object(we.notify)(e.props.onSelectSlot,{slots:s,start:n,end:r,resourceId:e.props.resource,action:a,bounds:o,box:i})})),u()(U()(e),"eventHeight",(function(){return"".concat(e.props.eventHeight,"px")})),u()(U()(e),"renderPlaceholderEvent",(function(){var t=e.state,n=t.left,r=t.width,a={start:t.startDate,end:t.endDate},i=e.props.localizer;return o.a.createElement("div",{className:"rbc-slot-selection",style:{left:n,width:r,height:e.eventHeight()}},o.a.createElement("span",null,i.format(a,"selectRangeFormat")))})),u()(U()(e),"renderSelectedEvent",(function(){var t,n=e.props,r=n.accessors,a=n.components,i=n.getters,c=n.slotMetrics,s=n.localizer,u=e.state,l=u.event,f=u.left,d=u.width,p=l.start,m=l.end,v="eventTimeRangeFormat",h=c.startsBeforeDay(p),g=c.startsAfterDay(m);return h?v="eventTimeRangeEndFormat":g&&(v="eventTimeRangeStartFormat"),t=h&&g?s.messages.allDay:s.format({start:p,end:m},v),o.a.createElement(Me,{event:l,label:t,className:"rbc-addons-dnd-drag-preview",style:{left:f,width:d,height:e.eventHeight()},getters:i,components:Ue(Ue({},a),{},{eventWrapper:Ie.a}),accessors:Ue(Ue({},r),ze.dragAccessors),continuesEarlier:h,continuesLater:g})})),e.state={selecting:!1,timeIndicatorPosition:null},e}return V()(n,[{key:"componentDidMount",value:function(){this._selectable()}},{key:"componentWillUnmount",value:function(){this._teardownSelectable()}},{key:"reset",value:function(){this.state.event&&this.setState({event:null,left:null,width:null}),this.state.selecting&&this.setState({selecting:!1})}},{key:"update",value:function(e,t){var n=t.startDate,r=t.endDate,a=t.left,o=t.width,i=this.state.event;i&&n===i.start&&r===i.end||this.setState({left:a,width:o,event:Ue(Ue({},e),{},{start:n,end:r})})}},{key:"handleResize",value:function(e,t){var n,r,a=this.props,o=a.accessors,i=a.slotMetrics,c=this.context.draggable.dragAndDropAction,s=c.event,u=c.direction,l=i.closestSlotFromPoint(e,t);"LEFT"===u?(r=o.end(s),n=Re.min(l,i.closestSlotFromDate(r,-1))):"RIGHT"===u&&(n=o.start(s),r=Re.max(l,i.closestSlotFromDate(n))),this.update(s,i.getRange(n,r))}},{key:"render",value:function(){var e=this.props.children,t=this.state,n=t.event,r=t.selecting;if(!n&&!r)return e;var a=e.props.children;return o.a.cloneElement(e,{children:o.a.createElement(o.a.Fragment,null,a,n&&this.renderSelectedEvent(),r&&this.renderPlaceholderEvent())})}}]),n}(o.a.Component);u()(qe,"propTypes",{accessors:R.a.object.isRequired,components:R.a.object.isRequired,getters:R.a.object.isRequired,localizer:R.a.object.isRequired,selectable:R.a.string,slotMetrics:R.a.object.isRequired,resource:R.a.any}),u()(qe,"contextTypes",{draggable:R.a.shape({onStart:R.a.func,onEnd:R.a.func,onDropFromOutside:R.a.func,onBeginAction:R.a.func,dragAndDropAction:R.a.object,dragFromOutsideItem:R.a.func})});var He=qe,Be=o.a.createContext(),Ve=function(e){var t=e.children,n=ye()(e,["children"]),r=n;return n.dnd&&(r.components.eventWrapper=xe,r.components.eventContainerWrapper=He),o.a.createElement(Be.Provider,{value:r},t)};Ve.propTypes={children:R.a.element.isRequired,dnd:R.a.bool},Ve.defaultProps={dnd:!1};var Ge=Be,We=(n(431),n(315)),Qe=n.n(We),Je=function(){function e(t,n){var r=n.accessors,a=n.slotMetrics;H()(this,e);var o=a.getRange(r.start(t),r.end(t)),i=o.start,c=o.startDate,s=o.end,u=o.endDate,l=o.left,f=o.width,d=o.height;this.start=i,this.end=s,this.startMs=+c,this.endMs=+u,this.left=l,this.width=f,this.height=d,this.data=t}return V()(e,[{key:"_height",get:function(){return 50}},{key:"yOffset",get:function(){if(this.rows)return 0;if(this.leaves)return this.container._height;var e=this.row,t=e.leaves,n=e.yOffset,r=e._height;return n+(t.indexOf(this)+1)*r}}]),e}();function Xe(e,t,n){return Math.abs(t.start-e.start)<n||t.start>e.start&&t.start<e.end}function Ze(e){for(var t=e.events,n=e.minimumStartDifference,r=e.slotMetrics,a=e.accessors,o=function(e){for(var t=Qe()(e,["startMs",function(e){return-e.endMs}]),n=[];t.length>0;){var r=t.shift();n.push(r);for(var a=0;a<t.length;a+=1){var o=t[a];if(!(r.endMs>o.startMs)){if(a>0){var i=t.splice(a,1)[0];n.push(i)}break}}}return n}(t.map((function(e){return new Je(e,{slotMetrics:r,accessors:a})}))),i=[],c=function(e){var t=o[e],r=i.find((function(e){return e.end>t.start||Math.abs(t.start-e.start)<n}));if(!r)return t.rows=[],i.push(t),"continue";t.container=r;for(var a=null,c=r.rows.length-1;!a&&c>=0;c-=1)Xe(r.rows[c],t,n)&&(a=r.rows[c]);a?(a.leaves.push(t),t.row=a):(t.leaves=[],r.rows.push(t))},s=0;s<o.length;s+=1)c(s);return o.map((function(e){return{event:e.data,style:{top:"".concat(e.yOffset,"px"),left:e.left,height:"".concat(e._height,"px"),width:e.width,yOffset:Math.max(0,e.yOffset)+e._height}}}))}var Ke=function(e,t){return e.getTimezoneOffset()-t.getTimezoneOffset()},$e=function(e,t,n,r){return"".concat(+Re.startOf(e,"minutes"))+"".concat(+Re.startOf(t,"minutes"))+"".concat(n,"-").concat(r)};var et=o.a.createContext(),tt=function(e){var t=e.children,n=Object(a.useState)([]),r=S()(n,2),i=r[0],c=r[1],s=Object(a.useState)([]),u=S()(s,2),l=u[0],f=u[1],d={groups:i,collapseAllGroups:function(){f(D()(i.map((function(e){return e.id}))))},collapseGroup:function(e){f([e].concat(D()(l)))},expandAllGroups:function(){f([])},expandGroup:function(e){f(l.filter((function(t){return t!==e})))},isGroupCollapsed:function(e){return l.indexOf(e)>=0},isGroupExpanded:function(e){return l.indexOf(e)<0},setGroups:c};return o.a.createElement(et.Provider,{value:d},t)};tt.propTypes={children:R.a.element.isRequired};var nt=et;var rt=n(378),at=n.n(rt);function ot(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=Object(a.useRef)();Object(a.useEffect)((function(){o.current=t}),[t]),Object(a.useEffect)((function(){if(r&&void 0!==at.a){var t=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return o.current.apply(o,[e].concat(n))};return at()(n).on(e,t),function(){at()(n).off(e,t)}}if(n&&n.addEventListener){var a=function(e){return o.current(e)};return n.addEventListener(e,a),function(){n.removeEventListener(e,a)}}}),[e,n])}function it(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ct(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?it(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):it(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var st=m.a.utils;function ut(e,t){return!(!e||null==t)&&-1!==[].concat(t.id).indexOf(e.id)}var lt=function(e,t){var n;e.drupal_internal__nid&&window.dispatchEvent((n=e.drupal_internal__nid,new CustomEvent("intercept:viewRoom",{detail:{id:n}}))),t.preventDefault()},ft=function(e){var t=e.children,n=(e.width,e.timelineWidth),r=e.height,a=e.hideScrollbar,i=e.horizontal,c=e.overflow,s=e.vertical,u=e.scrollRef,l=e.scrollbarSize,f={},d={};i&&(f.overflowX="hidden",c&&(f.overflowX="auto")),s&&(f.height="".concat(r,"px"),f.overflowY="hidden",c&&(f.overflowY="auto"),a&&(d.marginRight="-".concat(l.width,"px")));var p={};return n&&(p.width="".concat(n,"px")),o.a.createElement("div",{className:"scheduler__scroll-wrapper",style:d},o.a.createElement("div",{className:"scheduler__scroll-frame",style:f,ref:u},o.a.createElement("div",{className:"scheduler__scroll-canvas",style:p},t)))},dt=function(e){var t=e.group,n=Object(a.useContext)(nt),r=n.isGroupCollapsed,i=n.collapseGroup,c=n.expandGroup,s=t.id,u=r(s),l=u?function(){return c(s)}:function(){return i(s)},f=u?"Expand Group":"Collapse Group";return o.a.createElement("button",{onClick:l,className:"scheduler__group-toggle","aria-expanded":!u},f)};dt.propTypes={group:R.a.shape({id:R.a.oneOfType([R.a.string,R.a.number]).isRequired}).isRequired};var pt=function(e){var t=e.resourceComponent,n=e.timelineComponent;return o.a.createElement("tr",null,o.a.createElement("td",{className:"scheduler__section scheduler__section--resource"},t),o.a.createElement("td",{className:"scheduler__section scheduler__section--divider"}),o.a.createElement("td",{className:"scheduler__section scheduler__section--timeline"},n))},mt=function(e){var t,n=e.group,r=e.accessors,a=e.slotMetrics,i=e.height,c=e.step,s=e.timeslots;n.hours?t=function(e,t){var n=e.style;return[{state:"closed",style:{left:0,width:"".concat(n.left,"%"),height:"".concat(t,"px"),top:0}},{state:"open",style:{left:"".concat(n.left,"%"),width:"".concat(n.width,"%"),height:"".concat(t,"px"),top:0}},{state:"closed",style:{left:"".concat(n.left+n.width,"%"),width:"".concat(100-n.left-n.width,"%"),height:"".concat(t,"px"),top:0}}]}(Ze({events:[n.hours],accessors:r,slotMetrics:a,minimumStartDifference:Math.ceil(c*s/2)})[0],i):t=[{state:"closed",style:{left:0,width:"100%",height:"".concat(i,"px")}}];return o.a.createElement("div",{className:"scheduler__resource-hours",style:{height:"".concat(i,"px")}},t.map((function(e,t){return o.a.createElement("div",{key:t,className:"scheduler__resource-hours__block scheduler__resource-hours__block--".concat(e.state),style:e.style})})))},vt=function(e){var t=e.resourceId,n=e.slotMetrics,r=function(){var t=e.accessors,r=e.components,a=e.getters,i=e.localizer,c=e.rtl,s=e.selected,u=e.styledEvents,l=i.messages;return u.map((function(u,f){var d,p=u.event,m=u.style,v=t.end(p),h=t.start(p),g="eventTimeRangeFormat",b=n.startsBeforeDay(h),y=n.startsAfterDay(v);b?g="eventTimeRangeEndFormat":y&&(g="eventTimeRangeStartFormat"),d=b&&y?l.allDay:i.format({start:h,end:v},g);var O=b||n.startsBefore(h),E=y||n.startsAfter(v);return o.a.createElement(Me,{style:m,event:p,label:d,key:"evt_".concat(f),getters:a,rtl:c,components:r,continuesEarlier:O,continuesLater:E,accessors:t,selected:ut(p,s),onClick:function(t){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Object(we.notify)(e.onSelectEvent,n)}(p,t)},onDoubleClick:function(t){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Object(we.notify)(e.onDoubleClickEvent,n)}(p,t)}})}))},i=Object(a.useContext)(Ge),c=i.selectable,s=i.accessors,u=i.getters,l=i.localizer,f=i.components,d=f.eventContainerWrapper,p=ye()(f,["eventContainerWrapper"]),m=i.onSelectSlot,v=i.rtl;return e.dnd?o.a.createElement("div",{className:"scheduler__events-row"},o.a.createElement(d,{localizer:l,resource:t,accessors:s,getters:u,components:p,slotMetrics:n,selectable:c,onSelectSlot:m,eventHeight:50},o.a.createElement("div",{className:Object(Oe.default)("rbc-events-container",v&&"rtl"),style:e.style},r()))):o.a.createElement("div",{className:"scheduler__events-row",style:e.style,key:t},r())},ht=function(){return window?window.innerHeight-56-80-40:500};var gt=function(e){var t,n=Object(a.useContext)(nt),r=n.groups,i=n.isGroupExpanded,c=Object(a.useContext)(Ge),s=c.accessors,l=c.date,f=c.resources,p=c.events,m=c.min,v=c.max,h=c.timeslots,g=c.step,b=c.components,y=Object(a.useState)(!1),O=S()(y,2),E=O[0],w=O[1],_=Object(a.useState)(500),j=S()(_,2),x=j[0],R=j[1],P=Object(a.useState)(null),N=S()(P,2),A=N[0],C=N[1],T=function(e){return function(){C(e===A?null:e)}},M=Object(a.useRef)(null),z=Object(a.useRef)(null),k=Object(a.useRef)(null),I=Object(a.useRef)(null),F=function e(t){for(var n=t.min,r=t.max,a=t.step,o=t.timeslots,i=$e(n,r,a,o),c=Re.startOf(n,"day"),s=Ke(c,n),u=1+Re.diff(n,r,"minutes")+Ke(n,r),l=Re.diff(c,n,"minutes")+s,f=Math.ceil(u/(a*o)),d=f*o,p=new Array(f),m=new Array(d),v=0;v<f;v++){p[v]=new Array(o);for(var h=0;h<o;h++){var g=v*o+h,b=g*a;m[g]=p[v][h]=new Date(n.getFullYear(),n.getMonth(),n.getDate(),0,l+b,0,0)}}var y=m.length*a;function O(e){var t=Re.diff(n,e,"minutes")+Ke(n,e);return Math.min(t,u)}return m.push(new Date(n.getFullYear(),n.getMonth(),n.getDate(),0,l+y,0,0)),{groups:p,update:function(t){return $e(t)!==i?e(t):this},dateIsInGroup:function(e,t){var n=p[t+1];return Re.inRange(e,p[t][0],n?n[0]:r,"minutes")},nextSlot:function(e){var t=m[Math.min(m.indexOf(e)+1,m.length-1)];return t===e&&(t=Re.add(e,a,"minutes")),t},closestSlotToPosition:function(e){var t=Math.min(m.length-1,Math.max(0,Math.floor(e*d)));return m[t]},closestSlotFromPoint:function(e,t){var n=Math.abs(t.left-t.right);return this.closestSlotToPosition((e.x-t.left)/n)},closestSlotFromDate:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(Re.lt(e,n,"minutes"))return m[0];var r=Re.diff(n,e,"minutes");return m[(r-r%a)/a+t]},startsBeforeDay:function(e){return Re.lt(e,n,"day")},startsAfterDay:function(e){return Re.gt(e,r,"day")},startsBefore:function(e){return Re.lt(Re.merge(n,e),n,"minutes")},startsAfter:function(e){return Re.gt(Re.merge(r,e),r,"minutes")},getRange:function(e,t){var o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],c=o?e:Re.min(r,Re.max(n,e)),s=i?t:Re.min(r,Re.max(n,t)),u=O(c),l=O(s),f=0;return 0!==u&&(f=l>a*(d-1)&&!Re.eq(r,s)?(u-a)/(a*d)*100:u/(a*d)*100),{left:f,width:l/(a*d)*100-f,start:O(c),startDate:c,end:O(s),endDate:s}},getCurrentTimePosition:function(e){return O(e)/(a*d)*100}}}({min:m,max:v,timeslots:h,step:g}),U=F.groups,L=(t=k.current)?t.offsetWidth:300,q=function(e,t){return e?e.offsetWidth-t:800}(M.current,L),H=function(e){var t;return 30*(t=[]).concat.apply(t,D()(e)).length}(U);ot("resize",(function(){R(ht())}),window),Object(a.useEffect)((function(){var e;(e={resourcesRef:k,scheduleRef:I,timelineRef:z},function(){var t=e.resourcesRef,n=e.scheduleRef,r=e.timelineRef,a=!1,o=!1,i=function(e){window.requestAnimationFrame((function(){a||(o=!0,r.current.scrollLeft=e.target.scrollLeft,t.current.scrollTop=e.target.scrollTop),a=!1}))},c=function(e){window.requestAnimationFrame((function(){o||(a=!0,n.current.scrollTop=e.target.scrollTop),o=!1}))};return n.current.addEventListener("scroll",i),t.current.addEventListener("scroll",c),function(){n.current.removeEventListener("scroll",i),t.current.removeEventListener("scroll",c)}})(),function(e,t){return function(){var n=e.scheduleRef,r=e.timelineRef,a=function(e){n.current.removeEventListener("scroll",e),r.current.removeEventListener("scroll",e)},o=function e(){t(!0),a(e)};return n.current.addEventListener("scroll",o),r.current.addEventListener("scroll",o),function(){a(o)}}}({scheduleRef:I,timelineRef:z},w)(),R(ht())}),[]),Object(a.useEffect)((function(){if(I.current&&!E){var e=st.convertDateFromLocal(l,st.getUserTimezone());!function(e,t,n,r,a,o,i){var c=Ze({events:[{start:t,end:t}],accessors:o,slotMetrics:n,minimumStartDifference:Math.ceil(r*a/2)}),s=i/(n.groups.length*a),u=c[0].style.left/100*i,l=Math.max(0,Math.floor(u/s)*s);e.current.scrollLeft=l}(I,e,F,g,h,s,H)}}),[z.current,I.current,p]);var B=function(){var e=Object(a.useState)({}),t=S()(e,2),n=t[0],r=t[1];return Object(a.useEffect)((function(){var e=document.body,t=document.createElement("div");t.setAttribute("style","width: 1337px; height: 1337px; position: absolute; left: -9999px; overflow: scroll;"),e.appendChild(t);var n=function(e){return t["offset".concat(e)]-t["client".concat(e)]},a=n("Width"),o=n("Height");e.removeChild(t),r({width:a,height:o})}),[]),n}(),V=function(e,t,n,r,a,o){return e.reduce((function(e,i){var c=Ze({events:t.filter((function(e){return e.resourceId===i.id})),accessors:o,slotMetrics:n,minimumStartDifference:Math.ceil(r*a/2)}),s=c.reduce((function(e,t){return t.style.yOffset>e?t.style.yOffset:e}),50)+2;return ct(ct({},e),{},u()({},i.id,ct(ct({},i),{},{styledEvents:c,height:s})))}),{})}(f,p,F,g,h,s);return o.a.createElement("table",{className:"scheduler",ref:M},o.a.createElement("thead",{className:"scheduler__head"},o.a.createElement(pt,{resourceComponent:o.a.createElement("span",null,"Rooms"),timelineComponent:o.a.createElement(ft,{horizontal:!0,hideScrollbar:!0,width:q,timelineWidth:H,scrollRef:z,scrollbarSize:B},o.a.createElement("table",null,o.a.createElement("colgroup",null,U.map((function(e){return e.map((function(e,t){return o.a.createElement("col",{key:t,style:{width:"".concat(30,"px")}})}))}))),o.a.createElement("tbody",null,o.a.createElement("tr",null,U.map((function(e,t){return o.a.createElement("td",{key:t,colSpan:e.length},o.a.createElement("button",{onClick:T(t)},d()(e[0]).format("ha")))}))))))})),o.a.createElement("tbody",{className:"scheduler__body"},o.a.createElement(pt,{resourceComponent:o.a.createElement(ft,{vertical:!0,hideScrollbar:!0,overflow:!0,height:x,scrollRef:k,scrollbarSize:B},o.a.createElement("table",null,o.a.createElement("tbody",null,r.map((function(e){var t=i(e.id),n=f.filter((function(t){return t.groupId===e.id}));return n.length<=0?null:o.a.createElement(o.a.Fragment,{key:e.id},o.a.createElement("tr",{className:"scheduler__row scheduler__row--group"},o.a.createElement("th",null,o.a.createElement("div",{className:"scheduler__group-heading"},o.a.createElement("span",{className:"scheduler__group-text"},e.title),o.a.createElement(dt,{group:e})))),t&&n.map((function(e){return o.a.createElement("tr",{key:e.id,className:"scheduler__row scheduler__row--resource",style:{height:V[e.id].height},"data-resource-id":e.id},o.a.createElement("td",null,e.title,o.a.createElement("a",{href:"/room/".concat(e.drupal_internal__nid),onClick:function(t){return lt(e,t)}},"View Room Details")))})))})),o.a.createElement("tr",null,o.a.createElement("td",null," "))))),timelineComponent:o.a.createElement(ft,{vertical:!0,horizontal:!0,overflow:!0,width:q,timelineWidth:H,height:x,scrollRef:I,scrollbarSize:B},o.a.createElement("div",{className:"rbc-scheduler-view"},o.a.createElement("div",{className:"scheduler__timeline-container rbc-time-view",style:{width:"".concat(H,"px"),minHeight:"".concat(x,"px")}},o.a.createElement("table",{className:"scheduler__timeline"},o.a.createElement("tbody",null,r.map((function(t){var n=i(t.id),r=f.filter((function(e){return e.groupId===t.id}));return r.length<=0?null:o.a.createElement(o.a.Fragment,{key:t.id},o.a.createElement("tr",{className:"scheduler__row scheduler__row--group",style:{height:"".concat(50,"px")}},o.a.createElement("td",null,o.a.createElement("div",{className:"scheduler__row-inner"},o.a.createElement(mt,Y()({},e,{group:t,slotMetrics:F,height:50}))))),n&&r.map((function(n){return o.a.createElement("tr",{key:n.id,className:"scheduler__row scheduler__row--event",style:{height:V[n.id].height}},o.a.createElement("td",null,o.a.createElement("div",{className:"scheduler__row-inner"},o.a.createElement(vt,Y()({},e,{components:b,accessors:s,slotMetrics:F,resourceId:n.id,style:{height:V[n.id].height},styledEvents:V[n.id].styledEvents})),o.a.createElement(mt,Y()({},e,{group:t,slotMetrics:F})))))})))})),o.a.createElement("tr",null,o.a.createElement("td",null," ")))),o.a.createElement("div",{className:"scheduler__bg"},o.a.createElement("table",null,o.a.createElement("colgroup",null,U.map((function(e){return e.map((function(e,t){return o.a.createElement("col",{key:t,style:{width:"".concat(30,"px")}})}))}))),o.a.createElement("tbody",null,o.a.createElement("tr",null,U.map((function(e,t){return e.map((function(e,n){return o.a.createElement("td",{key:n,className:"scheduler__bg--".concat(0===n?"major":"minor"," ").concat(t===A?"scheduler__bg--highlighted":""),style:{width:"".concat(30,"px")}})}))}))))))))),width:H})))};gt.propTypes={date:R.a.instanceOf(Date).isRequired,events:R.a.array.isRequired,resources:R.a.array.isRequired};var bt=function(e){return o.a.createElement(Ve,e,o.a.createElement(gt,e))};bt.title=function(e,t){return t.localizer.format(e,"dayHeaderFormat")},bt.navigate=function(e,t){switch(t){case te.b.PREVIOUS:return Ee.add(e,-1,"day");case te.b.NEXT:return Ee.add(e,1,"day");default:return e}};var yt=bt;function Ot(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Z()(e);if(t){var a=Z()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return J()(this,n)}}var Et=m.a.utils,wt=function(e){W()(n,e);var t=Ot(n);function n(){return H()(this,n),t.apply(this,arguments)}return V()(n,[{key:"render",value:function(){var e=this.props,t=e.localizer.messages,n=e.label,r=e.maxDate,a=e.minDate,i=e.date,c=e.onDateChange,s=d()(i).format("YYYY-MM-DD"),u=Object(ae.a)({root:{fontSize:"16px",letterSpacing:"normal",textTransform:"none"}})(ne.a);return o.a.createElement("div",{className:"rbc-toolbar"},o.a.createElement("span",{className:"rbc-btn-group"},o.a.createElement(ne.a,{variant:"contained",color:"primary",size:"small",className:"rbc-btn rbc-btn--today",onClick:this.navigate.bind(null,te.b.TODAY)},t.today)),o.a.createElement("div",{className:"rbc-toolbar__heading"},o.a.createElement(re.a,{className:"rbc-toolbar__pager-button rbc-toolbar__pager-button--prev",onClick:this.navigate.bind(null,te.b.PREVIOUS),color:"primary","aria-label":"Previous",variant:"flat",disabled:a&&a>=s},o.a.createElement(se.a,null)),o.a.createElement(oe.a,{utils:ve.a,moment:d.a},o.a.createElement(ie.a,{onChange:function(e){return c(e.toDate())},TextFieldComponent:function(e){var t=e.onClick;return o.a.createElement(u,{name:name,input:i,onClick:t,endIcon:o.a.createElement(de.a,null)},o.a.createElement("h2",{className:"rbc-toolbar__label"},n))},value:i,className:"date-filter",minDate:a})),o.a.createElement(re.a,{className:"rbc-toolbar__pager-button rbc-toolbar__pager-button--next",onClick:this.navigate.bind(null,te.b.NEXT),color:"primary","aria-label":"Next",disabled:r&&r<=s},o.a.createElement(le.a,null))),o.a.createElement("span",{className:"rbc-btn-group rbc-btn-group--views"},this.viewNamesGroup(t)))}}]),n}(ee.a);function _t(e,t){if(!t)return e;if("string"!=typeof t.id)return[].concat(e,t);var n=me()(e,(function(e){return e.id===t.id}));if(n<0)return e;var r=D()(e);return r[n]=t,r}var St=function(e){W()(n,e);var t=Ot(n);function n(e){var r;return H()(this,n),r=t.call(this,e),u()(U()(r),"getDateFromTime",(function(e,t){var n=parseInt(e.slice(0,2),10),r=parseInt(e.slice(2),10),a=new Date((t||new Date("Jan 1, 2000 00:00:00")).getTime());return a.setHours(n),a.setMinutes(r),a})),u()(U()(r),"handleDateChange",(function(e){r.props.onDateChange(e)})),u()(U()(r),"handleViewChange",(function(e){r.props.onViewChange(e)})),u()(U()(r),"getMergedEvents",(function(e,t){return t&&"string"!=typeof t.id?[].concat(e,t):e})),r.state={showEvent:!1},r.onHideEvent=r.onHideEvent.bind(U()(r)),r}return V()(n,[{key:"onHideEvent",value:function(){this.setState({showEvent:!1})}},{key:"render",value:function(){var e,t=this.props,n=t.date,r=t.defaultDate,a=t.min,i=t.max,c=t.events,s=t.resources,u=t.selected;return o.a.createElement(o.a.Fragment,null,o.a.createElement(K.a,{className:"rbc-calendar--no-overlap",components:(e=this.props,{event:ge,toolbar:function(t){return o.a.createElement(wt,Y()({},e,t))}}),date:n,dnd:!0,defaultDate:r,defaultView:this.props.view,draggableAccessor:this.props.draggableAccessor,elementProps:{style:{height:"calc(100vh - 26rem)"}},endAccessor:this.props.endAccessor,eventPropGetter:function(e){return{className:"rbc-event--".concat(e.status," ").concat(e.hasEvent?"rbc-event--hasEvent":""," ").concat(e.isReservedByStaff?"rbc-event--isReservedByStaff":"")}},events:_t(c,u),resources:"day"===this.props.view?s:void 0,max:this.getDateFromTime(i&&"2400"!==i&&"0000"!==i?i:"2359",Et.normalizeStartOfDay(n).toDate()),min:this.getDateFromTime(a||"0000",Et.normalizeStartOfDay(n).toDate()),onNavigate:this.props.onDateChange,onView:this.handleViewChange,onEventDrop:this.props.onChangeEvent,onEventResize:this.props.onChangeEvent,onSelectEvent:this.props.onSelectEvent,onDoubleClickEvent:this.props.onDoubleClickEvent,onSelectSlot:this.props.onSelectSlot,onDragStart:this.props.onDragStart,resizable:!0,selected:u,selectable:!0,startAccessor:this.props.startAccessor,step:15,timeslots:4,timeZoneName:Et.getUserTimezone(),titleAccessor:function(){return"Booked"},views:{day:yt}}))}}]),n}(o.a.Component);St.propTypes={onChangeEvent:R.a.func,onDateChange:R.a.func,onDragStart:R.a.func,onDoubleClickEvent:R.a.func,onSelectEvent:R.a.func,draggableAccessor:R.a.func,onSelectSlot:R.a.func,onViewChange:R.a.func,endAccessor:R.a.func,startAccessor:R.a.func,date:R.a.instanceOf(Date),defaultDate:R.a.instanceOf(Date),view:R.a.string,min:R.a.string,max:R.a.string},St.defaultProps={onChangeEvent:function(){},onDateChange:function(){},onDoubleClickEvent:function(){},onDragStart:function(){},onSelectEvent:function(){},draggableAccessor:function(){},startAccessor:function(){},endAccessor:function(){},onSelectSlot:function(){},onNavigate:null,onView:null,onViewChange:null,date:Et.getUserTimeNow(),defaultDate:Et.getUserTimeNow(),view:"day",min:"0000",max:"2359"};var jt=St;n(79),n(434);function Dt(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=Object(a.useState)(!1),r=S()(n,2),o=r[0],i=r[1],c=Object(a.useState)(null),s=S()(c,2),u=s[0],l=s[1],f=Object(a.useState)(null),d=S()(f,2),p=d[0],m=d[1],v=Object(a.useCallback)((function(){return i(!0),l(null),m(null),e().then((function(e){return l(e)})).catch((function(e){return m(e)})).finally((function(){return i(!1)}))}),[e]);return Object(a.useEffect)((function(){t&&v()}),[v,t]),{execute:v,pending:o,value:u,error:p}}var xt=o.a.createContext(),Rt=function(e){return function(){return new Promise((function(t,n){fetch("".concat(e,"&fields[node--room]=title,field_location,drupal_internal__nid"),{credentials:"same-origin"}).then((function(e){return e.json()})).then(t).catch(n)}))}},Pt=function(e){var t=e.view,n=e.display,r=e.children,i=Object(a.useState)(null),c=S()(i,2),s=c[0],u=c[1],l=Dt(Object(a.useCallback)(Rt(s),[s]),!1),f=l.execute,d=l.pending,p=l.value,m=l.error;ot("jsonApiViewsUriChange",Object(a.useCallback)((function(e){var r=e.detail;t===r.view&&n===r.display&&u(r.uri)}),[u])),Object(a.useEffect)((function(){var e=T()(window,"Drupal.behaviors.jsonApiViewsBlock.getUri")?window.Drupal.behaviors.jsonApiViewsBlock.getUri(t,n):null;u(e)}),[]),Object(a.useEffect)((function(){s&&f()}),[s]);var v={rooms:p?p.data:[],pending:d,error:m};return o.a.createElement(xt.Provider,{value:v},r)};Pt.propTypes={children:R.a.element.isRequired,display:R.a.string.isRequired,view:R.a.string.isRequired};var Nt=xt,At=n(61),Ct=n(191),Tt=n(190);var Mt=function(){return new Promise((function(e,t){fetch("/api/rooms/availability/refreshed-on").then((function(e){return e.json()})).then(e).catch(t)}))};function zt(e,t){var n=Object(a.useState)(0),r=S()(n,2),o=r[0],i=r[1],c=Dt(Mt,!1),s=c.execute,u=c.value,l=c.error;return function(e,t){var n=Object(a.useRef)(null),r=Object(a.useRef)(e);Object(a.useEffect)((function(){r.current=e}),[e]),Object(a.useEffect)((function(){if("number"==typeof t)return n.current=window.setInterval((function(){return r.current()}),t),function(){return window.clearInterval(n.current)}}),[t])}((function(){s().then((function(){u&&u.refreshed&&i(u.refreshed)})).catch((function(){console.warn(l)}))}),t),Object(a.useEffect)((function(){o&&e(o)}),[o]),o}function kt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function It(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kt(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ft=m.a.constants,Ut=m.a.api,Lt=m.a.select,Yt=m.a.utils,qt=Ft,Ht=function(e,t){return e.map((function(e){return function(e,t){return{id:e.id,title:e.attributes.title,groupId:e.relationships.field_location.data[0].id,hours:t(e.relationships.field_location.data[0].id),drupal_internal__nid:T()(e,"attributes.drupal_internal__nid")}}(e,t)}))},Bt=function(e){var t=[];return T()(e,"rooms")&&A()(e.rooms,(function(e,n){z()(e.dates)||(t=[].concat(D()(t),D()(I()(e.dates,(function(e){return function(e,t){return{id:T()(e,"uuid"),title:T()(e,"message","Booked"),resourceId:T()(e,"resource",t),status:T()(e,"isEditable")?T()(e,"status","disabled"):"disabled",start:T()(e,"start"),end:T()(e,"end"),hasEvent:T()(e,"hasEvent"),isReservedByStaff:T()(e,"isReservedByStaff"),isEditable:T()(e,"isEditable"),drupal_internal__id:T()(e,"id",t)}}(e,n)})))))})),t};var Vt=function(e){var t=e.availability,n=e.date,r=e.getLocationHours,i=e.fetchAvailability,c=e.fetchLocations,s=e.fetchUserStatus,l=e.room,f=e.start,p=e.end,m=e.userStatus,v=e.onChangeDate,h=e.onChangeEnd,g=e.onChangeRoom,b=e.onChangeStart,y=e.onChangeView,O=e.purgeReservations,E=e.locations,w=e.view,_=Object(a.useContext)(Nt).rooms,j=Object(a.useContext)(nt).setGroups,D=Object(a.useCallback)((function(){var e=_.map((function(e){return e.id})),t=Yt.getUserTimezone(),r=d.a.tz(n,t),a=r.clone().startOf("day"),o=r.clone().endOf("day");i({rooms:e,start:a,end:o})}),[_,n]),x=Object(a.useState)(null),R=S()(x,2),P=R[0],N=R[1];Object(a.useEffect)((function(){c({filters:{onlyBranchLocation:{path:"field_branch_location",value:"1"},published:{path:"status",value:"1"}},fields:u()({},qt.TYPE_LOCATION,["title","field_location_hours","field_branch_location","status"])}),s()}),[]),Object(a.useEffect)((function(){_.length>0&&D()}),[n,w,_]),Object(a.useEffect)((function(){j(function(e,t){return e.map((function(e){return function(e,t){return{id:e.data.id,title:e.data.attributes.title,hours:t(e.data.id)}}(e,t)}))}(E,r))}),[E]);var A=Ht(_,r),C=Bt(t);Object(a.useEffect)((function(){if(0!==A.length&&l&&f&&p){var e=A.find((function(e){return e.id===l}));e&&(N({title:"",start:f,end:p,resourceId:l,isEditable:!0}),window.dispatchEvent(function(e,t,n){var r=Yt.getUserTimezone(),a=d()(t).tz(r),o=d()(n).tz(r);return new CustomEvent("intercept:addRoomReservation",{detail:{resource:e,end:{date:o.format("YYYY-MM-DD"),time:o.format("HH:mm:ss")},start:{date:a.format("YYYY-MM-DD"),time:a.format("HH:mm:ss")}}})}(e,f,p)))}}),[_]),Object(a.useLayoutEffect)((function(){var e=document.querySelector(".rbc-selected");e&&e.scrollIntoViewIfNeeded&&e.scrollIntoViewIfNeeded()}),[P]);return ot("intercept:saveRoomReservationSuccess",(function(){D(),P&&"string"!=typeof P.id&&N(null)}),window,!0),ot("intercept:updateRoomReservation",(function(e,t){!function(e){var t=C.find((function(t){return t.id===e.id}))||{title:""},n=_.find((function(t){return t.attributes.drupal_internal__nid===Number(e.room)})),r=n?n.id:null;N(It(It({},t),{},{start:d()(e.start).tz(Yt.getUserTimezone()).format(),end:d()(e.end).tz(Yt.getUserTimezone()).format(),resourceId:r}))}(t)}),window,!0),ot("intercept:closeRoomReservation",(function(){g(null),h(null),b(null),N(null)})),zt((function(){_.length>0&&D()}),5e3),o.a.createElement("div",null,o.a.createElement(Tt.a,{userStatus:m}),o.a.createElement(jt,{date:n,events:C,resources:A,view:w,onDateChange:function(e){O(),v(e)},onViewChange:y,onChangeEvent:function(e){N(It(It({},e.event),{},{start:d()(e.start).tz(Yt.getUserTimezone()).format(),end:d()(e.end).tz(Yt.getUserTimezone()).format(),resourceId:e.resourceId})),window.dispatchEvent(function(e,t){var n=Yt.getUserTimezone(),r=d()(e.start).tz(n),a=d()(e.end).tz(n),o=t.find((function(t){return t.id===e.resourceId}));return new CustomEvent("intercept:changeRoomReservation",{detail:It(It({},e.event),{},{resource:o,end:{date:a.format("YYYY-MM-DD"),time:a.format("HH:mm:ss")},start:{date:r.format("YYYY-MM-DD"),time:r.format("HH:mm:ss")}})})}(e,A))},onSelectEvent:function(e){var t;g(null),h(null),b(null),e.drupal_internal__id&&(N(e),window.dispatchEvent((t=e.drupal_internal__id,new CustomEvent("intercept:viewRoomReservation",{detail:{id:t}}))))},draggableAccessor:function(e){return!!e.drupal_internal__id},startAccessor:function(e){var t=d()(Yt.dateFromDrupal(e.start)),r=d()(n).tz(Yt.getUserTimezone()).startOf("day");return d.a.max(t,r).toDate()},endAccessor:function(e){var t=d()(Yt.dateFromDrupal(e.end)),r=d()(n).tz(Yt.getUserTimezone()).endOf("day").subtract(1,"seconds"),a=d.a.min(t,r);return 0===a.get("hour")&&a.subtract(1,"seconds"),a.toDate()},onSelectSlot:function(e){var t=d()(e.start).tz(Yt.getUserTimezone()).format(),n=d()(e.end).tz(Yt.getUserTimezone()).format();N({title:"",start:t,end:n,resourceId:e.resourceId,isEditable:!0}),g(e.resourceId),h(n),b(t),window.dispatchEvent(function(e,t){var n=Yt.getUserTimezone(),r=d()(e.start).tz(n),a=d()(e.end).tz(n),o=t.find((function(t){return t.id===e.resourceId}));return new CustomEvent("intercept:addRoomReservation",{detail:It(It({},e.event),{},{resource:o,end:{date:a.format("YYYY-MM-DD"),time:a.format("HH:mm:ss")},start:{date:r.format("YYYY-MM-DD"),time:r.format("HH:mm:ss")}})})}(e,A))},onDoubleClickEvent:function(e){var t;e.drupal_internal__id&&window.dispatchEvent((t=e.drupal_internal__id,new CustomEvent("intercept:editRoomReservation",{detail:{id:t}})))},selected:P}))};Vt.propTypes={getLocationHours:R.a.func.isRequired,locations:R.a.arrayOf(Object).isRequired,locationsLoading:R.a.bool.isRequired,fetchAvailability:R.a.func.isRequired,fetchLocations:R.a.func.isRequired,fetchUser:R.a.func.isRequired,fetchUserStatus:R.a.func.isRequired,onChangeDate:R.a.func.isRequired,onChangeEnd:R.a.func.isRequired,onChangeRoom:R.a.func.isRequired,onChangeStart:R.a.func.isRequired,onChangeView:R.a.func.isRequired,purgeReservations:R.a.func.isRequired,date:R.a.instanceOf(Date),view:R.a.string},Vt.defaultProps={view:"day",date:Yt.getUserTimeNow()};var Gt=Object(P.b)((function(e,t){return{locations:Lt.locationsAscending(e),locationsLoading:Lt.recordsAreLoading(qt.TYPE_LOCATION)(e),getLocationHours:function(n){return Lt.locationHoursTimesOnDate(n,t.date||Yt.getUserTimeNow())(e)},openHoursLimit:Lt.locationsOpenHoursLimit(e),calendarRooms:[]}}),(function(e){return{fetchLocations:function(t){e(Ut[qt.TYPE_LOCATION].fetchAll(t))},fetchUser:function(t){e(Ut[qt.TYPE_USER].fetchAll(t))},purgeReservations:function(t){e(Ut[qt.TYPE_ROOM_RESERVATION].purge(t))}}}))(Object(Ct.a)(Object(At.a)(Vt))),Wt=w((function(e){return o.a.createElement(Pt,{view:e.viewsId,display:e.displayId},o.a.createElement(tt,null,o.a.createElement(Gt,e)))})),Qt=Object(c.a)(Wt),Jt=document.getElementById("roomReservationSchedulerRoot"),Xt=Jt.getAttribute("data-jsonapi-views-view"),Zt=Jt.getAttribute("data-jsonapi-views-display");Object(i.render)(o.a.createElement(Qt,{viewsId:Xt,displayId:Zt}),Jt)}});