!function(){var e,t={4896:function(e){"use strict";e.exports=interceptClient},17373:function(e,t,n){var r=n(83729),s=n(80909),o=n(24066),a=n(56449);e.exports=function(e,t){return(a(e)?r:s)(e,o(t))}},24066:function(e,t,n){var r=n(83488);e.exports=function(e){return"function"==typeof e?e:r}},31205:function(e,t,n){"use strict";var r=n(24994),s=n(6305);t.A=void 0;var o=s(n(41594)),a=(0,r(n(76447)).default)(o.createElement("path",{d:"M20 3h-1V1h-2v2H7V1H5v2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 18H4V8h16v13z"}),"CalendarToday");t.A=a},33031:function(e,t,n){var r=n(83120),s=n(46155),o=n(69302),a=n(36800),i=o((function(e,t){if(null==e)return[];var n=t.length;return n>1&&a(e,t[0],t[1])?t=[]:n>2&&a(t[0],t[1],t[2])&&(t=[t[0]]),s(e,r(t,1),[])}));e.exports=i},36800:function(e,t,n){var r=n(75288),s=n(64894),o=n(30361),a=n(23805);e.exports=function(e,t,n){if(!a(n))return!1;var i=typeof t;return!!("number"==i?s(n)&&o(t,n.length):"string"==i&&t in n)&&r(n[t],e)}},38123:function(e){"use strict";e.exports=moment},40140:function(e){"use strict";e.exports=interceptTheme},41203:function(e,t){"use strict";t.me=function(e,t){e&&e.apply(null,[].concat(t))};var n=0},41594:function(e){"use strict";e.exports=React},43714:function(e,t,n){var r=n(53730);e.exports=function(e,t,n){for(var s=-1,o=e.criteria,a=t.criteria,i=o.length,l=n.length;++s<i;){var c=r(o[s],a[s]);if(c)return s>=l?c:c*("desc"==n[s]?-1:1)}return e.index-t.index}},46155:function(e,t,n){var r=n(34932),s=n(47422),o=n(15389),a=n(5128),i=n(73937),l=n(27301),c=n(43714),d=n(83488),u=n(56449);e.exports=function(e,t,n){t=t.length?r(t,(function(e){return u(e)?function(t){return s(t,1===e.length?e[0]:e)}:e})):[d];var h=-1;t=r(t,l(o));var m=a(e,(function(e,n,s){return{criteria:r(t,(function(t){return t(e)})),index:++h,value:e}}));return i(m,(function(e,t){return c(e,t,n)}))}},53730:function(e,t,n){var r=n(44394);e.exports=function(e,t){if(e!==t){var n=void 0!==e,s=null===e,o=e==e,a=r(e),i=void 0!==t,l=null===t,c=t==t,d=r(t);if(!l&&!d&&!a&&e>t||a&&i&&c&&!l&&!d||s&&i&&c||!n&&c||!o)return 1;if(!s&&!a&&!d&&e<t||d&&n&&o&&!s&&!a||l&&n&&o||!i&&o||!c)return-1}return 0}},69302:function(e,t,n){var r=n(83488),s=n(56757),o=n(32865);e.exports=function(e,t){return o(s(e,t,r),e+"")}},71086:function(e,t,n){var r=n(34932),s=n(15389),o=n(97420),a=n(83349);e.exports=function(e,t){if(null==e)return{};var n=r(a(e),(function(e){return[e]}));return t=s(t),o(e,n,(function(e,n){return t(e,n[0])}))}},73937:function(e){e.exports=function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}},75206:function(e){"use strict";e.exports=ReactDOM},77046:function(e,t,n){"use strict";var r=n(41594),s=n.n(r),o=n(75206),a=n(5667),i=n(93641),l=(n(71086),n(38123)),c=n.n(l),d=n(4896),u=n.n(d),h=n(42614);const{decodeArray:m,encodeArray:p,decodeBoolean:f,encodeBoolean:g,decodeObject:v,encodeObject:b,decodeString:E,encodeString:y}=i.nb,{constants:w,utils:_}=u(),D="start",x="end",S=e=>p(e,"[]")||[],R=e=>m(e,"[]")||[],A={view:{type:i.uo.string},date:{type:{decode:e=>{const t=(0,i.D4)(i.uo.date,e)||null;if(null===t)return;return _.convertDateFromLocal(t,_.getUserTimezone())},encode:e=>c()(e).format("YYYY-MM-DD")||null}},room:{type:i.uo.string},roomDetail:{type:i.uo.string},location:{type:{decode:R,encode:S}},type:{type:{decode:R,encode:S}},"max-capacity":{type:i.uo.number},[D]:{type:i.uo.string},[x]:{type:i.uo.string},detail:{type:i.uo.boolean},event:{type:i.uo.string}};var C=e=>(0,h.A)((0,i.Bi)({urlPropsQueryConfig:A})(e)),N=n(5556),O=n.n(N),T=n(84196),M=n(17373),z=n.n(M),F=n(58156),I=n.n(F),k=n(62193),P=n.n(k),Y=n(55378),L=n.n(Y),q=n(49421),H=n(35327),j=n.n(H),$=n(64),B=n(96746),U=n(42460),V=n(32150),G=n(83257),W=n(43033),X=n(39608),J=n(87086),Q=n(31205),Z=n(24713),K=n.n(Z),ee=n(15001);const te=e=>{let{event:t}=e;return s().createElement("div",{className:"reservation-calendar-event reservation-calendar-event"},s().createElement("p",{className:"reservation-calendar-event__title"},t.title))};te.propTypes={event:O().shape({title:O().string.isRequired}).isRequired};var ne=te,re=n(20053),se=n(12096),oe=n(41203),ae=n(10436),ie=n(98346);class le extends s().Component{static contextTypes=(()=>({draggable:O().shape({onStart:O().func,onEnd:O().func,onBeginAction:O().func,draggableAccessor:ae.accessor,resizableAccessor:ae.accessor,dragAndDropAction:O().object})}))();static propTypes=(()=>({type:O().oneOf(["date","time"]),event:O().object.isRequired,draggable:O().bool,allDay:O().bool,isRow:O().bool,continuesPrior:O().bool,continuesAfter:O().bool,isDragging:O().bool,isResizing:O().bool}))();handleResizeUp=e=>{0===e.button&&(e.stopPropagation(),this.context.draggable.onBeginAction(this.props.event,"resize","UP"))};handleResizeDown=e=>{0===e.button&&(e.stopPropagation(),this.context.draggable.onBeginAction(this.props.event,"resize","DOWN"))};handleResizeLeft=e=>{0===e.button&&(e.stopPropagation(),this.context.draggable.onBeginAction(this.props.event,"resize","LEFT"))};handleResizeRight=e=>{0===e.button&&(e.stopPropagation(),this.context.draggable.onBeginAction(this.props.event,"resize","RIGHT"))};handleStartDragging=e=>{0===e.button&&this.context.draggable.onBeginAction(this.props.event,"move")};renderAnchor(e){const t="Up"===e||"Down"===e?"ns":"ew";return s().createElement("div",{className:`rbc-addons-dnd-resize-${t}-anchor`,onMouseDown:this[`handleResize${e}`],role:"button",tabIndex:0},s().createElement("div",{className:`rbc-addons-dnd-resize-${t}-icon`}))}render(){const{event:e,type:t,continuesPrior:n,continuesAfter:r}=this.props;let{children:o}=this.props;const a=(0,ie.accessor)(e,"isEditable");if(e.__isPreview)return s().cloneElement(o,{className:(0,re.default)(o.props.className,"rbc-addons-dnd-drag-preview")});const{draggable:i}=this.context,{draggableAccessor:l,resizableAccessor:c}=i,d=a&&(!l||!!(0,ie.accessor)(e,l));if(!d)return o;const u=a&&(!c||!!(0,ie.accessor)(e,c));if(u||d){const t={onMouseDown:this.handleStartDragging,onTouchStart:this.handleStartDragging};if(u){let e=null,a=null;e=!n&&this.renderAnchor("Left"),a=!r&&this.renderAnchor("Right"),t.children=s().createElement("div",{className:"rbc-addons-dnd-resizable"},e,o.props.children,a)}i.dragAndDropAction.interacting&&i.dragAndDropAction.event===e&&(t.className=(0,re.default)(o.props.className,"rbc-addons-dnd-dragged-event")),o=s().cloneElement(o,t)}return o}}var ce=le,de=n(91155),ue=n(45086);function he(){return he=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},he.apply(null,arguments)}function me(e){return"string"==typeof e?e:e+"%"}var pe=function(e){const{style:t,className:n,event:r,accessors:o,rtl:a,selected:i,label:l,continuesEarlier:c,continuesLater:d,getters:u,onClick:h,onDoubleClick:m,components:{event:p,eventWrapper:f}}=e,g=(0,ie.accessor)(r,"isEditable");let v=o.title(r),b=o.tooltip(r),E=o.end(r),y=o.start(r),w=u.eventProp(r,y,E,i),{height:_,top:D,width:x,left:S,xOffset:R}=t;const A=[s().createElement("div",{key:"1",className:"rbc-event-label"},l),s().createElement("div",{key:"2",className:"rbc-event-content"},p?s().createElement(p,{event:r,title:v}):v)];return s().createElement(f,he({type:"time"},e),s().createElement("div",{onClick:g?h:null,onDoubleClick:g?m:null,style:{...w.style,top:me(D),left:me(S),width:me(x),height:me(_)},title:b?("string"==typeof l?l+": ":"")+b:void 0,className:(0,re.default)("rbc-event",n,w.className,{"rbc-selected":i,"rbc-event-continues-earlier":c,"rbc-event-continues-later":d})},A))},fe=n(49110),ge=n(65059),ve=n.n(ge);const be=(e,t)=>{let{x:n,y:r}=t;const{left:s,bottom:o,top:a}=e;return r<o&&r>a&&n>s};class Ee extends s().Component{static propTypes=(()=>({accessors:O().object.isRequired,components:O().object.isRequired,getters:O().object.isRequired,localizer:O().object.isRequired,selectable:O().string,slotMetrics:O().object.isRequired,resource:O().any}))();static contextTypes=(()=>({draggable:O().shape({onStart:O().func,onEnd:O().func,onDropFromOutside:O().func,onBeginAction:O().func,dragAndDropAction:O().object,dragFromOutsideItem:O().func})}))();constructor(){super(...arguments),this.state={selecting:!1,timeIndicatorPosition:null}}componentDidMount(){this._selectable()}componentWillUnmount(){this._teardownSelectable()}reset(){this.state.event&&this.setState({event:null,left:null,width:null}),this.state.selecting&&this.setState({selecting:!1})}update(e,t){let{startDate:n,endDate:r,left:s,width:o}=t;const{event:a}=this.state;a&&n===a.start&&r===a.end||this.setState({left:s,width:o,event:{...e,start:n,end:r}})}handleMove=(e,t)=>{const{event:n}=this.context.draggable.dragAndDropAction,{accessors:r,slotMetrics:s}=this.props;if(!be(t,e))return void this.reset();const o=s.closestSlotFromPoint({y:e.y-this.eventOffsetTop,x:e.x},t),a=r.start(n),i=r.end(n),l=de.add(o,de.diff(a,i,"minutes"),"minutes");this.update(n,s.getRange(o,l,!1,!0))};handleResize(e,t){let n,r;const{accessors:s,slotMetrics:o}=this.props,{event:a,direction:i}=this.context.draggable.dragAndDropAction,l=o.closestSlotFromPoint(e,t);"LEFT"===i?(r=s.end(a),n=de.min(l,o.closestSlotFromDate(r,-1))):"RIGHT"===i&&(n=s.start(a),r=de.max(l,o.closestSlotFromDate(n))),this.update(a,o.getRange(n,r))}handleDropFromOutside=(e,t)=>{const{slotMetrics:n,resource:r}=this.props,s=n.closestSlotFromPoint({y:e.y,x:e.x},t);this.context.draggable.onDropFromOutside({start:s,end:n.nextSlot(s),allDay:!1,resource:r})};_selectable=()=>{const e=(0,o.findDOMNode)(this),t=this._selector=new ue.default((()=>e.closest(".rbc-time-view"))),n=t=>{let n=this.props.slotMetrics.closestSlotFromPoint(t,(0,ue.getBoundsForNode)(e));this.state.selecting||(this._initialSlot=n);let r=this._initialSlot;de.lte(r,n)?n=this.props.slotMetrics.nextSlot(n):de.gt(r,n)&&(r=this.props.slotMetrics.nextSlot(r));const s=this.props.slotMetrics.getRange(de.min(r,n),de.max(r,n));return{...s,selecting:!0,left:`${s.left}%`,width:`${s.width}%`}},r=e=>{const t=this.props.onSelecting,r=this.state||{},s=n(e),{startDate:o,endDate:a}=s;t&&(de.eq(r.startDate,o,"minutes")&&de.eq(r.endDate,a,"minutes")||!1===t({start:o,end:a,resourceId:this.props.resource}))||this.state.start===s.start&&this.state.end===s.end&&this.state.selecting===s.selecting||this.setState(s)},s=(e,t)=>{if(!(0,ue.isEvent)((0,o.findDOMNode)(this),e)){const{startDate:r,endDate:s}=n(e);this._selectSlot({startDate:r,endDate:s,action:t,box:e})}this.setState({selecting:!1})};t.on("beforeSelect",(t=>{const{dragAndDropAction:n}=this.context.draggable;if(!n.action){if("ignoreEvents"!==this.props.selectable)return;return!(0,ue.isEvent)((0,o.findDOMNode)(this),t)&&be((0,ue.getBoundsForNode)(e),t)}if("resize"===n.action)return be((0,ue.getBoundsForNode)(e),t);const r=(0,ue.getEventNodeFromPoint)(e,t);if(!r)return!1;this.eventOffsetLeft=t.x-(0,ue.getBoundsForNode)(r).left})),t.on("selecting",(t=>{const{dragAndDropAction:n}=this.context.draggable;if(!n.action)return void r(t);const s=(0,ue.getBoundsForNode)(e);"move"===n.action&&this.handleMove(t,s),"resize"===n.action&&this.handleResize(t,s)})),t.on("dropFromOutside",(t=>{if(!this.context.draggable.onDropFromOutside)return;const n=(0,ue.getBoundsForNode)(e);be(n,t)&&this.handleDropFromOutside(t,n)})),t.on("dragOver",(t=>{if(!this.context.draggable.dragFromOutsideItem)return;const n=(0,ue.getBoundsForNode)(e);this.handleDropFromOutside(t,n)})),t.on("selectStart",(e=>{const{dragAndDropAction:t}=this.context.draggable;t.action?this.context.draggable.onStart():r(e)})),t.on("select",(t=>{this.state.selecting&&(this._selectSlot({...this.state,action:"select",point:t}),this.setState({selecting:!1}));const n=(0,ue.getBoundsForNode)(e);this.state.event&&be(n,t)&&this.handleInteractionEnd()})),t.on("click",(e=>{s(e,"click"),this.context.draggable.onEnd(null)})),t.on("doubleClick",(e=>s(e,"doubleClick"))),t.on("reset",(()=>{this.reset(),this.context.draggable.onEnd(null)}))};handleInteractionEnd=()=>{const{resource:e}=this.props,{event:t}=this.state;this.reset(),this.context.draggable.onEnd({start:t.start,end:t.end,resourceId:e})};_teardownSelectable=()=>{this._selector&&(this._selector.teardown(),this._selector=null)};_selectSlot=e=>{let{startDate:t,endDate:n,action:r,bounds:s,box:o}=e,a=t;const i=[];for(;de.lte(a,n);)i.push(a),a=de.add(a,this.props.step,"minutes");(0,oe.me)(this.props.onSelectSlot,{slots:i,start:t,end:n,resourceId:this.props.resource,action:r,bounds:s,box:o})};eventHeight=()=>`${this.props.eventHeight}px`;renderPlaceholderEvent=()=>{const{left:e,width:t,startDate:n,endDate:r}=this.state,o={start:n,end:r},{localizer:a}=this.props;return s().createElement("div",{className:"rbc-slot-selection",style:{left:e,width:t,height:this.eventHeight()}},s().createElement("span",null,a.format(o,"selectRangeFormat")))};renderSelectedEvent=()=>{const{accessors:e,components:t,getters:n,slotMetrics:r,localizer:o}=this.props,{event:a,left:i,width:l}=this.state,{start:c,end:d}=a;let u,h="eventTimeRangeFormat";const m=r.startsBeforeDay(c),p=r.startsAfterDay(d);return m?h="eventTimeRangeEndFormat":p&&(h="eventTimeRangeStartFormat"),u=m&&p?o.messages.allDay:o.format({start:c,end:d},h),s().createElement(pe,{event:a,label:u,className:"rbc-addons-dnd-drag-preview",style:{left:i,width:l,height:this.eventHeight()},getters:n,components:{...t,eventWrapper:ve()},accessors:{...e,...fe.dragAccessors},continuesEarlier:m,continuesLater:p})};render(){const{children:e}=this.props,{event:t,selecting:n}=this.state;if(!t&&!n)return e;const r=e.props.children;return s().cloneElement(e,{children:s().createElement(s().Fragment,null,r,t&&this.renderSelectedEvent(),n&&this.renderPlaceholderEvent())})}}var ye=Ee;const we=s().createContext(),_e=e=>{let{children:t,...n}=e;const r=n;return n.dnd&&(r.components.eventWrapper=ce,r.components.eventContainerWrapper=ye),s().createElement(we.Provider,{value:r},t)};_e.propTypes={children:O().element.isRequired,dnd:O().bool},_e.defaultProps={dnd:!1};var De=we,xe=n(33031),Se=n.n(xe);class Re{constructor(e,t){let{accessors:n,slotMetrics:r}=t;const{start:s,startDate:o,end:a,endDate:i,left:l,width:c,height:d}=r.getRange(n.start(e),n.end(e));this.start=s,this.end=a,this.startMs=+o,this.endMs=+i,this.left=l,this.width=c,this.height=d,this.data=e}get _height(){return 50}get yOffset(){if(this.rows)return 0;if(this.leaves)return this.container._height;const{leaves:e,yOffset:t,_height:n}=this.row;return t+(e.indexOf(this)+1)*n}}function Ae(e,t,n){return Math.abs(t.start-e.start)<n||t.start>e.start&&t.start<e.end}function Ce(e){let{events:t,minimumStartDifference:n,slotMetrics:r,accessors:s}=e;const o=function(e){const t=Se()(e,["startMs",e=>-e.endMs]),n=[];for(;t.length>0;){const e=t.shift();n.push(e);for(let r=0;r<t.length;r+=1){const s=t[r];if(!(e.endMs>s.startMs)){if(r>0){const e=t.splice(r,1)[0];n.push(e)}break}}}return n}(t.map((e=>new Re(e,{slotMetrics:r,accessors:s})))),a=[];for(let e=0;e<o.length;e+=1){const t=o[e],r=a.find((e=>e.end>t.start||Math.abs(t.start-e.start)<n));if(!r){t.rows=[],a.push(t);continue}t.container=r;let s=null;for(let e=r.rows.length-1;!s&&e>=0;e-=1)Ae(r.rows[e],t,n)&&(s=r.rows[e]);s?(s.leaves.push(t),t.row=s):(t.leaves=[],r.rows.push(t))}return o.map((e=>({event:e.data,style:{top:`${e.yOffset}px`,left:e.left,height:`${e._height}px`,width:e.width,yOffset:Math.max(0,e.yOffset)+e._height}})))}const Ne=(e,t)=>e.getTimezoneOffset()-t.getTimezoneOffset(),Oe=(e,t,n,r)=>+de.startOf(e,"minutes")+(""+ +de.startOf(t,"minutes"))+`${n}-${r}`;function Te(e){let{min:t,max:n,step:r,timeslots:s}=e;const o=Oe(t,n,r,s),a=de.startOf(t,"day"),i=Ne(a,t),l=1+de.diff(t,n,"minutes")+Ne(t,n),c=de.diff(a,t,"minutes")+i,d=Math.ceil(l/(r*s)),u=d*s,h=new Array(d),m=new Array(u);for(let e=0;e<d;e++){h[e]=new Array(s);for(let n=0;n<s;n++){const o=e*s+n,a=o*r;m[o]=h[e][n]=new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,c+a,0,0)}}const p=m.length*r;function f(e){const n=de.diff(t,e,"minutes")+Ne(t,e);return Math.min(n,l)}return m.push(new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,c+p,0,0)),{groups:h,update(e){return Oe(e)!==o?Te(e):this},dateIsInGroup(e,t){const r=h[t+1];return de.inRange(e,h[t][0],r?r[0]:n,"minutes")},nextSlot(e){let t=m[Math.min(m.indexOf(e)+1,m.length-1)];return t===e&&(t=de.add(e,r,"minutes")),t},closestSlotToPosition(e){const t=Math.min(m.length-1,Math.max(0,Math.floor(e*u)));return m[t]},closestSlotFromPoint(e,t){const n=Math.abs(t.left-t.right);return this.closestSlotToPosition((e.x-t.left)/n)},closestSlotFromDate(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(de.lt(e,t,"minutes"))return m[0];const s=de.diff(t,e,"minutes");return m[(s-s%r)/r+n]},startsBeforeDay(e){return de.lt(e,t,"day")},startsAfterDay(e){return de.gt(e,n,"day")},startsBefore(e){return de.lt(de.merge(t,e),t,"minutes")},startsAfter(e){return de.gt(de.merge(n,e),n,"minutes")},getRange(e,s){let o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2]?e:de.min(n,de.max(t,e)),i=o?s:de.min(n,de.max(t,s)),l=f(a),c=f(i);let d=0;return 0!==l&&(d=c>r*(u-1)&&!de.eq(n,i)?(l-r)/(r*u)*100:l/(r*u)*100),{left:d,width:c/(r*u)*100-d,start:f(a),startDate:a,end:f(i),endDate:i}},getCurrentTimePosition(e){return f(e)/(r*u)*100}}}const Me=s().createContext(),ze=e=>{let{children:t}=e;const[n,o]=(0,r.useState)([]),[a,i]=(0,r.useState)([]),l={groups:n,collapseAllGroups:()=>{i([...n.map((e=>e.id))])},collapseGroup:e=>{i([e,...a])},expandAllGroups:()=>{i([])},expandGroup:e=>{i(a.filter((t=>t!==e)))},isGroupCollapsed:e=>a.indexOf(e)>=0,isGroupExpanded:e=>a.indexOf(e)<0,setGroups:o};return s().createElement(Me.Provider,{value:l},t)};ze.propTypes={children:O().element.isRequired};var Fe=Me;var Ie=jQuery,ke=n.n(Ie);function Pe(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const o=(0,r.useRef)();(0,r.useEffect)((()=>{o.current=t}),[t]),(0,r.useEffect)((()=>{if(s&&void 0!==ke()){const t=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return o.current(e,...n)};return ke()(n).on(e,t),()=>{ke()(n).off(e,t)}}if(!(n&&n.addEventListener))return;const t=e=>o.current(e);return n.addEventListener(e,t),()=>{n.removeEventListener(e,t)}}),[e,n])}function Ye(){return Ye=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ye.apply(null,arguments)}const{utils:Le}=u();function qe(e,t){return!(!e||null==t)&&-1!==[].concat(t.id).indexOf(e.id)}const He=(e,t)=>{var n;e.drupal_internal__nid&&window.dispatchEvent((n=e.drupal_internal__nid,new CustomEvent("intercept:viewRoom",{detail:{id:n}}))),t.preventDefault()},je=e=>{let{children:t,width:n,timelineWidth:r,height:o,hideScrollbar:a,horizontal:i,overflow:l,vertical:c,scrollRef:d,scrollbarSize:u}=e;const h={},m={};i&&(h.overflowX="hidden",l&&(h.overflowX="auto")),c&&(h.height=`${o}px`,h.overflowY="hidden",l&&(h.overflowY="auto"),a&&(m.marginRight=`-${u.width}px`));const p={};return r&&(p.width=`${r}px`),s().createElement("div",{className:"scheduler__scroll-wrapper",style:m},s().createElement("div",{className:"scheduler__scroll-frame",style:h,ref:d},s().createElement("div",{className:"scheduler__scroll-canvas",style:p},t)))},$e=e=>{let{group:t}=e;const{isGroupCollapsed:n,collapseGroup:o,expandGroup:a}=(0,r.useContext)(Fe),{id:i}=t,l=n(i),c=l?()=>a(i):()=>o(i),d=l?"Expand Group":"Collapse Group";return s().createElement("button",{onClick:c,className:"scheduler__group-toggle","aria-expanded":!l},d)};$e.propTypes={group:O().shape({id:O().oneOfType([O().string,O().number]).isRequired}).isRequired};const Be=e=>{let{resourceComponent:t,timelineComponent:n}=e;return s().createElement("tr",null,s().createElement("td",{className:"scheduler__section scheduler__section--resource"},t),s().createElement("td",{className:"scheduler__section scheduler__section--divider"}),s().createElement("td",{className:"scheduler__section scheduler__section--timeline"},n))},Ue=e=>{let t,{group:n,accessors:r,slotMetrics:o,height:a,step:i,timeslots:l}=e;if(n.hours){t=function(e,t){const{style:n}=e;return[{state:"closed",style:{left:0,width:`${n.left}%`,height:`${t}px`,top:0}},{state:"open",style:{left:`${n.left}%`,width:`${n.width}%`,height:`${t}px`,top:0}},{state:"closed",style:{left:`${n.left+n.width}%`,width:100-n.left-n.width+"%",height:`${t}px`,top:0}}]}(Ce({events:[n.hours],accessors:r,slotMetrics:o,minimumStartDifference:Math.ceil(i*l/2)})[0],a)}else t=[{state:"closed",style:{left:0,width:"100%",height:`${a}px`}}];return s().createElement("div",{className:"scheduler__resource-hours",style:{height:`${a}px`}},t.map(((e,t)=>s().createElement("div",{key:t,className:`scheduler__resource-hours__block scheduler__resource-hours__block--${e.state}`,style:e.style}))))},Ve=e=>{const{resourceId:t,slotMetrics:n}=e,o=()=>{const{accessors:t,components:r,getters:o,localizer:a,rtl:i,selected:l,styledEvents:c}=e,{messages:d}=a;return c.map(((c,u)=>{let{event:h,style:m}=c;const p=t.end(h),f=t.start(h);let g,v="eventTimeRangeFormat";const b=n.startsBeforeDay(f),E=n.startsAfterDay(p);b?v="eventTimeRangeEndFormat":E&&(v="eventTimeRangeStartFormat"),g=b&&E?d.allDay:a.format({start:f,end:p},v);const y=b||n.startsBefore(f),w=E||n.startsAfter(p);return s().createElement(pe,{style:m,event:h,label:g,key:`evt_${u}`,getters:o,rtl:i,components:r,continuesEarlier:y,continuesLater:w,accessors:t,selected:qe(h,l),onClick:t=>function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];(0,oe.me)(e.onSelectEvent,n)}(h,t),onDoubleClick:t=>function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];(0,oe.me)(e.onDoubleClickEvent,n)}(h,t)})}))},{selectable:a,accessors:i,getters:l,localizer:c,components:{eventContainerWrapper:d,...u},onSelectSlot:h,rtl:m}=(0,r.useContext)(De);return e.dnd?s().createElement("div",{className:"scheduler__events-row"},s().createElement(d,{localizer:c,resource:t,accessors:i,getters:l,components:u,slotMetrics:n,selectable:a,onSelectSlot:h,eventHeight:50},s().createElement("div",{className:(0,re.default)("rbc-events-container",m&&"rtl"),style:e.style},o()))):s().createElement("div",{className:"scheduler__events-row",style:e.style,key:t},o())},Ge=()=>window?window.innerHeight-56-80-40:500;const We=e=>{const{groups:t,isGroupExpanded:n}=(0,r.useContext)(Fe),{accessors:o,date:a,resources:i,events:l,min:d,max:u,timeslots:h,step:m,components:p}=(0,r.useContext)(De),[f,g]=(0,r.useState)(!1),[v,b]=(0,r.useState)(500),[E,y]=(0,r.useState)(null),w=e=>()=>{y(e===E?null:e)},_=(0,r.useRef)(null),D=(0,r.useRef)(null),x=(0,r.useRef)(null),S=(0,r.useRef)(null),R=Te({min:d,max:u,timeslots:h,step:m}),A=R.groups,C=(N=x.current)?N.offsetWidth:300;var N;const O=((e,t)=>e?e.offsetWidth-t:800)(_.current,C),T=(e=>30*[].concat(...e).length)(A);Pe("resize",(()=>{b(Ge())}),window),(0,r.useEffect)((()=>{var e;(e={resourcesRef:x,scheduleRef:S,timelineRef:D},()=>{const{resourcesRef:t,scheduleRef:n,timelineRef:r}=e;let s=!1,o=!1;const a=e=>{window.requestAnimationFrame((()=>{s||(o=!0,r.current.scrollLeft=e.target.scrollLeft,t.current.scrollTop=e.target.scrollTop),s=!1}))},i=e=>{window.requestAnimationFrame((()=>{o||(s=!0,n.current.scrollTop=e.target.scrollTop),o=!1}))};return n.current.addEventListener("scroll",a),t.current.addEventListener("scroll",i),()=>{n.current.removeEventListener("scroll",a),t.current.removeEventListener("scroll",i)}})(),((e,t)=>()=>{const{scheduleRef:n,timelineRef:r}=e,s=e=>{n.current.removeEventListener("scroll",e),r.current.removeEventListener("scroll",e)},o=()=>{t(!0),s(o)};return n.current.addEventListener("scroll",o),r.current.addEventListener("scroll",o),()=>{s(o)}})({scheduleRef:S,timelineRef:D},g)(),b(Ge())}),[]),(0,r.useEffect)((()=>{if(S.current&&!f){const e=Le.convertDateFromLocal(a,Le.getUserTimezone());((e,t,n,r,s,o,a)=>{const i=Ce({events:[{start:t,end:t}],accessors:o,slotMetrics:n,minimumStartDifference:Math.ceil(r*s/2)}),l=a/(n.groups.length*s),c=i[0].style.left/100*a,d=Math.max(0,Math.floor(c/l)*l);e.current.scrollLeft=d})(S,e,R,m,h,o,T)}}),[D.current,S.current,l]);const M=function(){const[e,t]=(0,r.useState)({});return(0,r.useEffect)((()=>{const{body:e}=document,n=document.createElement("div");n.setAttribute("style","width: 1337px; height: 1337px; position: absolute; left: -9999px; overflow: scroll;"),e.appendChild(n);const r=e=>n[`offset${e}`]-n[`client${e}`],s=r("Width"),o=r("Height");e.removeChild(n),t({width:s,height:o})}),[]),e}(),z=function(e,t,n,r,s,o){return e.reduce(((e,a)=>{const i=Ce({events:t.filter((e=>e.resourceId===a.id)),accessors:o,slotMetrics:n,minimumStartDifference:Math.ceil(r*s/2)}),l=i.reduce(((e,t)=>t.style.yOffset>e?t.style.yOffset:e),50)+2;return{...e,[a.id]:{...a,styledEvents:i,height:l}}}),{})}(i,l,R,m,h,o);return s().createElement("table",{className:"scheduler",ref:_},s().createElement("thead",{className:"scheduler__head"},s().createElement(Be,{resourceComponent:s().createElement("span",null,"Rooms"),timelineComponent:s().createElement(je,{horizontal:!0,hideScrollbar:!0,width:O,timelineWidth:T,scrollRef:D,scrollbarSize:M},s().createElement("table",null,s().createElement("colgroup",null,A.map((e=>e.map(((e,t)=>s().createElement("col",{key:t,style:{width:"30px"}})))))),s().createElement("tbody",null,s().createElement("tr",null,A.map(((e,t)=>s().createElement("td",{key:t,colSpan:e.length},s().createElement("button",{onClick:w(t)},c()(e[0]).format("ha")))))))))})),s().createElement("tbody",{className:"scheduler__body"},s().createElement(Be,{resourceComponent:s().createElement(je,{vertical:!0,hideScrollbar:!0,overflow:!0,height:v,scrollRef:x,scrollbarSize:M},s().createElement("table",null,s().createElement("tbody",null,t.map((e=>{const t=n(e.id),r=i.filter((t=>t.groupId===e.id));return r.length<=0?null:s().createElement(s().Fragment,{key:e.id},s().createElement("tr",{className:"scheduler__row scheduler__row--group"},s().createElement("th",null,s().createElement("div",{className:"scheduler__group-heading"},s().createElement("span",{className:"scheduler__group-text"},e.title),s().createElement($e,{group:e})))),t&&r.map((e=>s().createElement("tr",{key:e.id,className:"scheduler__row scheduler__row--resource",style:{height:z[e.id].height},"data-resource-id":e.id},s().createElement("td",null,e.title,s().createElement("a",{href:`/room/${e.drupal_internal__nid}`,onClick:t=>He(e,t)},"View Room Details"))))))})),s().createElement("tr",null,s().createElement("td",null," "))))),timelineComponent:s().createElement(je,{vertical:!0,horizontal:!0,overflow:!0,width:O,timelineWidth:T,height:v,scrollRef:S,scrollbarSize:M},s().createElement("div",{className:"rbc-scheduler-view"},s().createElement("div",{className:"scheduler__timeline-container rbc-time-view",style:{width:`${T}px`,minHeight:`${v}px`}},s().createElement("table",{className:"scheduler__timeline"},s().createElement("tbody",null,t.map((t=>{const r=n(t.id),a=i.filter((e=>e.groupId===t.id));return a.length<=0?null:s().createElement(s().Fragment,{key:t.id},s().createElement("tr",{className:"scheduler__row scheduler__row--group",style:{height:"50px"}},s().createElement("td",null,s().createElement("div",{className:"scheduler__row-inner"},s().createElement(Ue,Ye({},e,{group:t,slotMetrics:R,height:50}))))),r&&a.map((n=>s().createElement("tr",{key:n.id,className:"scheduler__row scheduler__row--event",style:{height:z[n.id].height}},s().createElement("td",null,s().createElement("div",{className:"scheduler__row-inner"},s().createElement(Ve,Ye({},e,{components:p,accessors:o,slotMetrics:R,resourceId:n.id,style:{height:z[n.id].height},styledEvents:z[n.id].styledEvents})),s().createElement(Ue,Ye({},e,{group:t,slotMetrics:R}))))))))})),s().createElement("tr",null,s().createElement("td",null," ")))),s().createElement("div",{className:"scheduler__bg"},s().createElement("table",null,s().createElement("colgroup",null,A.map((e=>e.map(((e,t)=>s().createElement("col",{key:t,style:{width:"30px"}})))))),s().createElement("tbody",null,s().createElement("tr",null,A.map(((e,t)=>e.map(((e,n)=>s().createElement("td",{key:n,className:`scheduler__bg--${0===n?"major":"minor"} ${t===E?"scheduler__bg--highlighted":""}`,style:{width:"30px"}})))))))))))),width:T})))};We.propTypes={date:O().instanceOf(Date).isRequired,events:O().array.isRequired,resources:O().array.isRequired};const Xe=e=>s().createElement(_e,e,s().createElement(We,e));Xe.title=(e,t)=>{let{localizer:n}=t;return n.format(e,"dayHeaderFormat")},Xe.navigate=(e,t)=>{switch(t){case $.C5.PREVIOUS:return se.add(e,-1,"day");case $.C5.NEXT:return se.add(e,1,"day");default:return e}};var Je=Xe;function Qe(){return Qe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Qe.apply(null,arguments)}const{utils:Ze}=u();class Ke extends(j()){render(){const{localizer:{messages:e},label:t,maxDate:n,minDate:r,date:o,onDateChange:a}=this.props,i=c()(o).format("YYYY-MM-DD"),l=(0,V.A)({root:{fontSize:"16px",letterSpacing:"normal",textTransform:"none"}})(B.A);return s().createElement("div",{className:"rbc-toolbar"},s().createElement("span",{className:"rbc-btn-group"},s().createElement(B.A,{variant:"contained",color:"primary",size:"small",className:"rbc-btn rbc-btn--today",onClick:this.navigate.bind(null,$.C5.TODAY)},e.today)),s().createElement("div",{className:"rbc-toolbar__heading"},s().createElement(U.A,{className:"rbc-toolbar__pager-button rbc-toolbar__pager-button--prev",onClick:this.navigate.bind(null,$.C5.PREVIOUS),color:"primary","aria-label":"Previous",variant:"flat",disabled:r&&r>=i},s().createElement(X.A,null)),s().createElement(G.M,{utils:ee.A,moment:c()},s().createElement(W.l,{onChange:e=>a(e.toDate()),TextFieldComponent:e=>{let{onClick:n}=e;return s().createElement(l,{name:name,input:o,onClick:n,endIcon:s().createElement(Q.A,null)},s().createElement("h2",{className:"rbc-toolbar__label"},t))},value:o,className:"date-filter",minDate:r})),s().createElement(U.A,{className:"rbc-toolbar__pager-button rbc-toolbar__pager-button--next",onClick:this.navigate.bind(null,$.C5.NEXT),color:"primary","aria-label":"Next",disabled:n&&n<=i},s().createElement(J.A,null))),s().createElement("span",{className:"rbc-btn-group rbc-btn-group--views"},this.viewNamesGroup(e)))}}function et(e,t){if(!t)return e;if("string"!=typeof t.id)return[].concat(e,t);const n=K()(e,(e=>e.id===t.id));if(n<0)return e;const r=[...e];return r[n]=t,r}class tt extends s().Component{constructor(e){super(e),this.state={showEvent:!1},this.onHideEvent=this.onHideEvent.bind(this)}onHideEvent(){this.setState({showEvent:!1})}getDateFromTime=(e,t)=>{const n=parseInt(e.slice(0,2),10),r=parseInt(e.slice(2),10),s=new Date((t||new Date("Jan 1, 2000 00:00:00")).getTime());return s.setHours(n),s.setMinutes(r),s};handleDateChange=e=>{this.props.onDateChange(e)};handleViewChange=e=>{this.props.onViewChange(e)};getMergedEvents=(e,t)=>t&&"string"!=typeof t.id?[].concat(e,t):e;render(){const{date:e,defaultDate:t,min:n,max:r,events:o,resources:a,selected:i}=this.props;return s().createElement(s().Fragment,null,s().createElement(q.Ay,{className:"rbc-calendar--no-overlap",components:(l=this.props,{event:ne,toolbar:e=>s().createElement(Ke,Qe({},l,e))}),date:e,dnd:!0,defaultDate:t,defaultView:this.props.view,draggableAccessor:this.props.draggableAccessor,elementProps:{style:{height:"calc(100vh - 26rem)"}},endAccessor:this.props.endAccessor,eventPropGetter:e=>({className:`rbc-event--${e.status} ${e.hasEvent?"rbc-event--hasEvent":""} ${e.isReservedByStaff?"rbc-event--isReservedByStaff":""}`}),events:et(o,i),resources:"day"===this.props.view?a:void 0,max:this.getDateFromTime(r&&"2400"!==r&&"0000"!==r?r:"2359",Ze.normalizeStartOfDay(e).toDate()),min:this.getDateFromTime(n||"0000",Ze.normalizeStartOfDay(e).toDate()),onNavigate:this.props.onDateChange,onView:this.handleViewChange,onEventDrop:this.props.onChangeEvent,onEventResize:this.props.onChangeEvent,onSelectEvent:this.props.onSelectEvent,onDoubleClickEvent:this.props.onDoubleClickEvent,onSelectSlot:this.props.onSelectSlot,onDragStart:this.props.onDragStart,resizable:!0,selected:i,selectable:!0,startAccessor:this.props.startAccessor,step:15,timeslots:4,timeZoneName:Ze.getUserTimezone(),titleAccessor:()=>"Booked",views:{day:Je}}));var l}}tt.propTypes={onChangeEvent:O().func,onDateChange:O().func,onDragStart:O().func,onDoubleClickEvent:O().func,onSelectEvent:O().func,draggableAccessor:O().func,onSelectSlot:O().func,onViewChange:O().func,endAccessor:O().func,startAccessor:O().func,date:O().instanceOf(Date),defaultDate:O().instanceOf(Date),view:O().string,min:O().string,max:O().string},tt.defaultProps={onChangeEvent:()=>{},onDateChange:()=>{},onDoubleClickEvent:()=>{},onDragStart:()=>{},onSelectEvent:()=>{},draggableAccessor:()=>{},startAccessor:()=>{},endAccessor:()=>{},onSelectSlot:()=>{},onNavigate:null,onView:null,onViewChange:null,date:Ze.getUserTimeNow(),defaultDate:Ze.getUserTimeNow(),view:"day",min:"0000",max:"2359"};var nt=tt;function rt(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const[n,s]=(0,r.useState)(!1),[o,a]=(0,r.useState)(null),[i,l]=(0,r.useState)(null),c=(0,r.useCallback)((()=>(s(!0),a(null),l(null),e().then((e=>a(e))).catch((e=>l(e))).finally((()=>s(!1))))),[e]);return(0,r.useEffect)((()=>{t&&c()}),[c,t]),{execute:c,pending:n,value:o,error:i}}const st=s().createContext(),ot=e=>()=>new Promise(((t,n)=>{fetch(`${e}&fields[node--room]=title,field_location,drupal_internal__nid`,{credentials:"same-origin"}).then((e=>e.json())).then(t).catch(n)})),at=e=>{let{view:t,display:n,children:o}=e;const[a,i]=(0,r.useState)(null),l=(0,r.useCallback)(ot(a),[a]),{execute:c,pending:d,value:u,error:h}=rt(l,!1);Pe("jsonApiViewsUriChange",(0,r.useCallback)((e=>{let{detail:r}=e;t===r.view&&n===r.display&&i(r.uri)}),[i])),(0,r.useEffect)((()=>{const e=I()(window,"Drupal.behaviors.jsonApiViewsBlock.getUri")?window.Drupal.behaviors.jsonApiViewsBlock.getUri(t,n):null;i(e)}),[]),(0,r.useEffect)((()=>{a&&c()}),[a]);const m={rooms:u?u.data:[],pending:d,error:h};return s().createElement(st.Provider,{value:m},o)};at.propTypes={children:O().element.isRequired,display:O().string.isRequired,view:O().string.isRequired};var it=st,lt=n(44814),ct=n(10092),dt=n(83031);const ut=()=>new Promise(((e,t)=>{fetch("/api/rooms/availability/refreshed-on").then((e=>e.json())).then(e).catch(t)}));function ht(e,t){const[n,s]=(0,r.useState)(0),{execute:o,value:a,error:i}=rt(ut,!1);return function(e,t){const n=(0,r.useRef)(null),s=(0,r.useRef)(e);(0,r.useEffect)((()=>{s.current=e}),[e]),(0,r.useEffect)((()=>{const e=()=>s.current();if("number"==typeof t)return n.current=window.setInterval(e,t),()=>window.clearInterval(n.current)}),[t])}((()=>{o().then((()=>{a&&a.refreshed&&s(a.refreshed)})).catch((()=>{console.warn(i)}))}),t),(0,r.useEffect)((()=>{n&&e(n)}),[n]),n}const{constants:mt,api:pt,select:ft,utils:gt}=u(),vt=mt,bt="intercept:addRoomReservation",Et=(e,t)=>e.map((e=>((e,t)=>({id:e.id,title:e.attributes.title,groupId:e.relationships.field_location.data[0].id,hours:t(e.relationships.field_location.data[0].id),drupal_internal__nid:I()(e,"attributes.drupal_internal__nid")}))(e,t))),yt=e=>{let t=[];return I()(e,"rooms")&&z()(e.rooms,((e,n)=>{P()(e.dates)||(t=[...t,...L()(e.dates,(e=>((e,t)=>({id:I()(e,"uuid"),title:I()(e,"message","Booked"),resourceId:I()(e,"resource",t),status:I()(e,"isEditable")?I()(e,"status","disabled"):"disabled",start:I()(e,"start"),end:I()(e,"end"),hasEvent:I()(e,"hasEvent"),isReservedByStaff:I()(e,"isReservedByStaff"),isEditable:I()(e,"isEditable"),drupal_internal__id:I()(e,"id",t)}))(e,n)))])})),t};const wt=e=>{let{availability:t,date:n,getLocationHours:o,fetchAvailability:a,fetchLocations:i,fetchUserStatus:l,room:d,start:u,end:h,userStatus:m,onChangeDate:p,onChangeEnd:f,onChangeRoom:g,onChangeStart:v,onChangeView:b,purgeReservations:E,locations:y,view:w}=e;const{rooms:_}=(0,r.useContext)(it),{setGroups:D}=(0,r.useContext)(Fe),x=(0,r.useCallback)((()=>{const e=_.map((e=>e.id)),t=gt.getUserTimezone(),r=c().tz(n,t),s=r.clone().startOf("day"),o=r.clone().endOf("day");a({rooms:e,start:s,end:o})}),[_,n]),[S,R]=(0,r.useState)(null);(0,r.useEffect)((()=>{i({filters:{onlyBranchLocation:{path:"field_branch_location",value:"1"},published:{path:"status",value:"1"}},fields:{[vt.TYPE_LOCATION]:["title","field_location_hours","field_branch_location","status"]}}),l()}),[]),(0,r.useEffect)((()=>{_.length>0&&x()}),[n,w,_]),(0,r.useEffect)((()=>{D(((e,t)=>e.map((e=>((e,t)=>({id:e.data.id,title:e.data.attributes.title,hours:t(e.data.id)}))(e,t))))(y,o))}),[y]);const A=Et(_,o),C=yt(t);(0,r.useEffect)((()=>{if(0===A.length||!d||!u||!h)return;const e=A.find((e=>e.id===d));e&&(R({title:"",start:u,end:h,resourceId:d,isEditable:!0}),window.dispatchEvent(function(e,t,n){const r=gt.getUserTimezone(),s=c()(t).tz(r),o=c()(n).tz(r);return new CustomEvent(bt,{detail:{resource:e,end:{date:o.format("YYYY-MM-DD"),time:o.format("HH:mm:ss")},start:{date:s.format("YYYY-MM-DD"),time:s.format("HH:mm:ss")}}})}(e,u,h)))}),[_]),(0,r.useLayoutEffect)((()=>{const e=document.querySelector(".rbc-selected");e&&e.scrollIntoViewIfNeeded&&e.scrollIntoViewIfNeeded()}),[S]);return Pe("intercept:saveRoomReservationSuccess",(()=>{x(),S&&"string"!=typeof S.id&&R(null)}),window,!0),Pe("intercept:updateRoomReservation",((e,t)=>{(e=>{const t=C.find((t=>t.id===e.id))||{title:""},n=_.find((t=>t.attributes.drupal_internal__nid===Number(e.room))),r=n?n.id:null;R({...t,start:c()(e.start).tz(gt.getUserTimezone()).format(),end:c()(e.end).tz(gt.getUserTimezone()).format(),resourceId:r})})(t)}),window,!0),Pe("intercept:closeRoomReservation",(()=>{g(null),f(null),v(null),R(null)})),ht((()=>{_.length>0&&x()}),5e3),s().createElement("div",null,s().createElement(dt.A,{userStatus:m}),s().createElement(nt,{date:n,events:C,resources:A,view:w,onDateChange:e=>{E(),p(e)},onViewChange:b,onChangeEvent:e=>{R({...e.event,start:c()(e.start).tz(gt.getUserTimezone()).format(),end:c()(e.end).tz(gt.getUserTimezone()).format(),resourceId:e.resourceId}),window.dispatchEvent(function(e,t){const n=gt.getUserTimezone(),r=c()(e.start).tz(n),s=c()(e.end).tz(n),o=t.find((t=>t.id===e.resourceId));return new CustomEvent("intercept:changeRoomReservation",{detail:{...e.event,resource:o,end:{date:s.format("YYYY-MM-DD"),time:s.format("HH:mm:ss")},start:{date:r.format("YYYY-MM-DD"),time:r.format("HH:mm:ss")}}})}(e,A))},onSelectEvent:e=>{var t;g(null),f(null),v(null),e.drupal_internal__id&&(R(e),window.dispatchEvent((t=e.drupal_internal__id,new CustomEvent("intercept:viewRoomReservation",{detail:{id:t}}))))},draggableAccessor:e=>!!e.drupal_internal__id,startAccessor:e=>{const t=c()(gt.dateFromDrupal(e.start)),r=c()(n).tz(gt.getUserTimezone()).startOf("day");return c().max(t,r).toDate()},endAccessor:e=>{const t=c()(gt.dateFromDrupal(e.end)),r=c()(n).tz(gt.getUserTimezone()).endOf("day").subtract(1,"seconds"),s=c().min(t,r);return 0===s.get("hour")&&s.subtract(1,"seconds"),s.toDate()},onSelectSlot:e=>{const t=c()(e.start).tz(gt.getUserTimezone()).format(),n=c()(e.end).tz(gt.getUserTimezone()).format();R({title:"",start:t,end:n,resourceId:e.resourceId,isEditable:!0}),g(e.resourceId),f(n),v(t),window.dispatchEvent(function(e,t){const n=gt.getUserTimezone(),r=c()(e.start).tz(n),s=c()(e.end).tz(n),o=t.find((t=>t.id===e.resourceId));return new CustomEvent(bt,{detail:{...e.event,resource:o,end:{date:s.format("YYYY-MM-DD"),time:s.format("HH:mm:ss")},start:{date:r.format("YYYY-MM-DD"),time:r.format("HH:mm:ss")}}})}(e,A))},onDoubleClickEvent:e=>{var t;e.drupal_internal__id&&window.dispatchEvent((t=e.drupal_internal__id,new CustomEvent("intercept:editRoomReservation",{detail:{id:t}})))},selected:S}))};wt.propTypes={getLocationHours:O().func.isRequired,locations:O().arrayOf(Object).isRequired,locationsLoading:O().bool.isRequired,fetchAvailability:O().func.isRequired,fetchLocations:O().func.isRequired,fetchUser:O().func.isRequired,fetchUserStatus:O().func.isRequired,onChangeDate:O().func.isRequired,onChangeEnd:O().func.isRequired,onChangeRoom:O().func.isRequired,onChangeStart:O().func.isRequired,onChangeView:O().func.isRequired,purgeReservations:O().func.isRequired,date:O().instanceOf(Date),view:O().string},wt.defaultProps={view:"day",date:gt.getUserTimeNow()};var _t=(0,T.Ng)(((e,t)=>({locations:ft.locationsAscending(e),locationsLoading:ft.recordsAreLoading(vt.TYPE_LOCATION)(e),getLocationHours:n=>ft.locationHoursTimesOnDate(n,t.date||gt.getUserTimeNow())(e),openHoursLimit:ft.locationsOpenHoursLimit(e),calendarRooms:[]})),(e=>({fetchLocations:t=>{e(pt[vt.TYPE_LOCATION].fetchAll(t))},fetchUser:t=>{e(pt[vt.TYPE_USER].fetchAll(t))},purgeReservations:t=>{e(pt[vt.TYPE_ROOM_RESERVATION].purge(t))}})))((0,ct.A)((0,lt.A)(wt)));var Dt=C((e=>s().createElement(at,{view:e.viewsId,display:e.displayId},s().createElement(ze,null,s().createElement(_t,e)))));const xt=(0,a.A)(Dt),St=document.getElementById("roomReservationSchedulerRoot"),Rt=St.getAttribute("data-jsonapi-views-view"),At=St.getAttribute("data-jsonapi-views-display");(0,o.render)(s().createElement(xt,{viewsId:Rt,displayId:At}),St)},83729:function(e){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}}},n={};function r(e){var s=n[e];if(void 0!==s)return s.exports;var o=n[e]={id:e,loaded:!1,exports:{}};return t[e](o,o.exports,r),o.loaded=!0,o.exports}r.m=t,e=[],r.O=function(t,n,s,o){if(!n){var a=1/0;for(d=0;d<e.length;d++){n=e[d][0],s=e[d][1],o=e[d][2];for(var i=!0,l=0;l<n.length;l++)(!1&o||a>=o)&&Object.keys(r.O).every((function(e){return r.O[e](n[l])}))?n.splice(l--,1):(i=!1,o<a&&(a=o));if(i){e.splice(d--,1);var c=s();void 0!==c&&(t=c)}}return t}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[n,s,o]},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},r.j=674,function(){var e={674:0};r.O.j=function(t){return 0===e[t]};var t=function(t,n){var s,o,a=n[0],i=n[1],l=n[2],c=0;if(a.some((function(t){return 0!==e[t]}))){for(s in i)r.o(i,s)&&(r.m[s]=i[s]);if(l)var d=l(r)}for(t&&t(n);c<a.length;c++)o=a[c],r.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return r.O(d)},n=self.wpJsonpIntercept=self.wpJsonpIntercept||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var s=r.O(void 0,[436],(function(){return r(77046)}));s=r.O(s)}();