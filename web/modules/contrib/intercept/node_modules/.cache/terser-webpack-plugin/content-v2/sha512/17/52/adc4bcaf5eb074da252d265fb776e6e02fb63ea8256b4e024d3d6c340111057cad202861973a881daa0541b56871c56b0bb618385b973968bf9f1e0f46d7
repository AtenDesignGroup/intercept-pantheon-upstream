{"code":"!function(e){function t(t){for(var r,o,s=t[0],u=t[1],c=t[2],f=0,d=[];f<s.length;f++)o=s[f],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&d.push(i[o][0]),i[o]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);for(l&&l(t);d.length;)d.shift()();return a.push.apply(a,c||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],r=!0,s=1;s<n.length;s++){var u=n[s];0!==i[u]&&(r=!1)}r&&(a.splice(t--,1),e=o(o.s=n[0]))}return e}var r={},i={9:0},a=[];function o(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,\"a\",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p=\"\";var s=window.wpJsonpIntercept=window.wpJsonpIntercept||[],u=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var l=u;a.push([871,0]),n()}({0:function(e,t){e.exports=React},115:function(e,t){e.exports=interceptTheme},143:function(e,t,n){\"use strict\";var r=n(0),i=n.n(r),a=n(1),o=n.n(a),s=n(18),u=n(6),c=n.n(u),l=n(392),f=c.a.select,d=c.a.utils.getUserUuid();function p(e){var t=e.onClick,n=e.mustRegister,r=e.registerUrl,a=e.text,o=e.registrationAllowed;return n?i.a.createElement(l.a,{href:t?null:r,variant:\"register\"===a?\"contained\":\"outlined\",size:\"small\",color:\"primary\",className:\"action-button__button\",disabled:!o,onClick:t},\"Cancel\"===a&&r?\"View Registration\":a):null}p.propTypes={eventId:o.a.string.isRequired,userId:o.a.string,onClick:o.a.func,mustRegister:o.a.bool,registrationAllowed:o.a.bool,registerUrl:o.a.string,text:o.a.string},p.defaultProps={onClick:null,userId:d,mustRegister:!1,registrationAllowed:!1,registerUrl:null,text:\"\"};t.a=Object(s.b)((function(e,t){var n=t.eventId,r=f.mustRegisterForEvent(n)(e),i=f.registerUrl(n)(e),a=t.userId||d;return{mustRegister:r,registerUrl:i,text:f.registrationButtonText(n,a)(e),registrationAllowed:f.registrationAllowed(n,a)(e)}}))(p)},144:function(e,t,n){\"use strict\";var r=n(0),i=n.n(r),a=n(1),o=n.n(a),s=n(18),u=n(6),c=n.n(u),l=c.a.select,f=c.a.utils.getUserUuid();function d(e){var t=e.text;return t?i.a.createElement(\"p\",{className:\"action-button__message\"},t):null}d.propTypes={eventId:o.a.string.isRequired,userId:o.a.string,text:o.a.string},d.defaultProps={text:null,userId:f};t.a=Object(s.b)((function(e,t){var n=t.eventId,r=t.userId;return{text:l.registrationStatusText(n,r||f)(e)}}))(d)},16:function(e,t){e.exports=moment},218:function(e,t,n){var r=n(49),i=n(219),a=n(64),o=Math.ceil,s=function(e){return function(t,n,s){var u,c,l=String(a(t)),f=l.length,d=void 0===s?\" \":String(s),p=r(n);return p<=f||\"\"==d?l:(u=p-f,(c=i.call(d,o(u/d.length))).length>u&&(c=c.slice(0,u)),e?l+c:c+l)}};e.exports={start:s(!1),end:s(!0)}},219:function(e,t,n){\"use strict\";var r=n(104),i=n(64);e.exports=\"\".repeat||function(e){var t=String(i(this)),n=\"\",a=r(e);if(a<0||a==1/0)throw RangeError(\"Wrong number of repetitions\");for(;a>0;(a>>>=1)&&(t+=t))1&a&&(n+=t);return n}},240:function(e,t,n){var r=n(14),i=n(279);r({target:\"Date\",proto:!0,forced:Date.prototype.toISOString!==i},{toISOString:i})},25:function(e,t){e.exports=ReactDOM},256:function(e,t,n){\"use strict\";var r=n(14),i=n(216).includes,a=n(120);r({target:\"Array\",proto:!0,forced:!n(76)(\"indexOf\",{ACCESSORS:!0,1:0})},{includes:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),a(\"includes\")},257:function(e,t,n){\"use strict\";var r=n(14),i=n(183),a=n(64);r({target:\"String\",proto:!0,forced:!n(184)(\"includes\")},{includes:function(e){return!!~String(a(this)).indexOf(i(e),arguments.length>1?arguments[1]:void 0)}})},261:function(e,t,n){\"use strict\";n(32),n(19),n(21),n(20);var r=n(10),i=n.n(r),a=n(9),o=n.n(a),s=n(11),u=n.n(s),c=n(12),l=n.n(c),f=n(5),d=n.n(f),p=n(0),v=n.n(p),h=n(1),g=n.n(h),m=n(15);function y(e){var t=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d()(e);if(t){var i=d()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return l()(this,n)}}var b=function(e){u()(n,e);var t=y(n);function n(){return i()(this,n),t.apply(this,arguments)}return o()(n,[{key:\"render\",value:function(){var e=this.props,t=e.value,n=e.handleChange,r=e.options;return v.a.createElement(\"div\",{className:\"view-switcher\"},r.map((function(e){return v.a.createElement(\"button\",{key:e.key,className:(r=t===e.key,\"view-switcher__button \".concat(r&&\"view-switcher__button--active\")),disabled:t===e.key,onClick:function(){return n(e.key)}},e.value);var r})))}}]),n}(v.a.PureComponent);b.propTypes={handleChange:g.a.func.isRequired,value:g.a.string,options:g.a.arrayOf(g.a.shape({key:g.a.string,value:g.a.string})).isRequired},b.defaultProps={value:\"list\"},t.a=Object(m.a)((function(e){return{checked:{fontWeight:\"bold\"},unChecked:{fontWeight:\"bold\",color:e.palette.secondary.main}}}))(b)},262:function(e,t,n){\"use strict\";n(33),n(256),n(32),n(19),n(21),n(74),n(20),n(257),n(114);var r=n(10),i=n.n(r),a=n(9),o=n.n(a),s=n(11),u=n.n(s),c=n(12),l=n.n(c),f=n(5),d=n.n(f),p=n(0),v=n.n(p),h=n(1),g=n.n(h),m=n(18),y=n(16),b=n.n(y),E=n(7),_=n.n(E),R=n(6),w=n.n(R),S=n(27),O=n.n(S),P=n(59),T=n(116),C=n(63),U=n.n(C),k=n(392),x=w.a.select;function I(e){var t=e.checkinStatus,n=e.checkinUrl;return\"open\"===t?v.a.createElement(k.a,{href:n,className:\"action-button__button\",size:\"small\",variant:\"contained\",color:\"primary\"},U.a.t(\"Check in\")):null}I.propTypes={eventId:g.a.string.isRequired,checkinStatus:g.a.string,checkinUrl:g.a.string},I.defaultProps={checkinStatus:\"closed\",checkinUrl:null};var j=Object(m.b)((function(e,t){var n=t.eventId;return{checkinStatus:x.eventCheckinStatus(n)(e),checkinUrl:x.eventCheckinUrl(n)(e)}}))(I),D=n(143),A=n(144);function N(e){var t=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d()(e);if(t){var i=d()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return l()(this,n)}}var F=w.a.select,M=w.a.constants,V=w.a.utils,q=M,Y=V.getUserUuid(),B=function(e){u()(n,e);var t=N(n);function n(){return i()(this,n),t.apply(this,arguments)}return o()(n,[{key:\"render\",value:function(){var e=this.props,t=e.id,n=e.event,r=e.registrations,i=b()(V.dateFromDrupal(n.attributes.field_date_time.value)),a=Array.isArray(n.relationships.field_event_audience)?n.relationships.field_event_audience.map((function(e){return{id:e.id,name:_()(e,\"attributes.name\")}})).filter((function(e){return e.id})):[],o=a.length>0?v.a.createElement(P.a,{label:\"Audience\",key:\"audience\",values:a}):null,s=_()(n,\"attributes.event_thumbnail\"),u=_()(O.a,\"intercept.events.recommended\"),c=Array.isArray(u)&&u.includes(_()(n,\"attributes.drupal_internal__nid\").toString())?\"Recommended For You\":null;return v.a.createElement(T.a,{key:t,modifiers:[s?\"with-image\":\"without-image\"],image:s,highlight:c,supertitle:_()(n,\"relationships.field_location.0.attributes.title\"),title:n.attributes.title,titleUrl:n.attributes.path?n.attributes.path.alias:\"/node/\".concat(n.attributes.nid),date:{month:i.utcOffset(V.getUserUtcOffset()).format(\"MMM\"),date:i.utcOffset(V.getUserUtcOffset()).format(\"D\"),time:V.getTimeDisplay(i).replace(\":00\",\"\")},description:_()(n,\"attributes.field_text_teaser.value\"),tags:[o],registrations:r,footer:function(e){return v.a.createElement(v.a.Fragment,null,v.a.createElement(j,{eventId:e.event.id}),v.a.createElement(D.a,{eventId:e.event.id}),v.a.createElement(A.a,{eventId:e.event.id}))},event:n})}}]),n}(p.PureComponent);B.propTypes={id:g.a.string.isRequired,event:g.a.object.isRequired,registrations:g.a.array},B.defaultProps={registrations:[]};t.a=Object(m.b)((function(e,t){var n=F.getIdentifier(q.TYPE_EVENT,t.id),r=F.eventRegistrationsByEventByUser(t.id,Y)(e);return{event:F.bundle(n)(e),registrations:r}}))(B)},27:function(e,t){e.exports=drupalSettings},279:function(e,t,n){\"use strict\";var r=n(31),i=n(218).start,a=Math.abs,o=Date.prototype,s=o.getTime,u=o.toISOString;e.exports=r((function(){return\"0385-07-25T07:06:39.999Z\"!=u.call(new Date(-50000000000001))}))||!r((function(){u.call(new Date(NaN))}))?function(){if(!isFinite(s.call(this)))throw RangeError(\"Invalid time value\");var e=this.getUTCFullYear(),t=this.getUTCMilliseconds(),n=e<0?\"-\":e>9999?\"+\":\"\";return n+i(a(e),n?6:4,0)+\"-\"+i(this.getUTCMonth()+1,2,0)+\"-\"+i(this.getUTCDate(),2,0)+\"T\"+i(this.getUTCHours(),2,0)+\":\"+i(this.getUTCMinutes(),2,0)+\":\"+i(this.getUTCSeconds(),2,0)+\".\"+i(t,3,0)+\"Z\"}:u},6:function(e,t){e.exports=interceptClient},63:function(e,t){e.exports=Drupal},871:function(e,t,n){\"use strict\";n.r(t);var r=n(0),i=n.n(r),a=n(25),o=n(68),s=n(30),u=n(6),c=n.n(u),l=n(208),f={view:{type:s.UrlQueryParamTypes.string},showSaves:{type:s.UrlQueryParamTypes.boolean},showRegistrations:{type:s.UrlQueryParamTypes.boolean}},d=function(e){return Object(l.a)(Object(s.addUrlProps)({urlPropsQueryConfig:f})(e))},p=(n(40),n(33),n(38),n(32),n(240),n(42),n(43),n(37),n(19),n(21),n(20),n(39),n(10)),v=n.n(p),h=n(9),g=n.n(h),m=n(3),y=n.n(m),b=n(11),E=n.n(b),_=n(12),R=n.n(_),w=n(5),S=n.n(w),O=n(2),P=n.n(O),T=n(1),C=n.n(T),U=n(18),k=n(16),x=n.n(k),I=n(27),j=n.n(I),D=n(44),A=n.n(D),N=n(145),F=n(262),M=n(71),V=n(261);function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(Object(n),!0).forEach((function(t){P()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function B(e){var t=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=S()(e);if(t){var i=S()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R()(this,n)}}var L=c.a.constants,Q=c.a.api,W=c.a.select,z=L,G=j.a.intercept.parameters.user.uuid,J=[{key:\"past\",value:\"Past\"},{key:\"upcoming\",value:\"Upcoming\"}];function X(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:\"upcoming\",t=arguments.length>1?arguments[1]:void 0,n=\"past\"===e?\"<\":\">\",r=x()(new Date).toISOString();return{date:{path:t,value:r,operator:n}}}var Z=function(e){E()(n,e);var t=B(n);function n(e){var r;return v()(this,n),r=t.call(this,e),P()(y()(r),\"handleViewChange\",(function(e){r.props.onChangeView(e),r.doFetch(e)})),r.state={open:!1},r.handleViewChange=r.handleViewChange.bind(y()(r)),r.doFetch=A()(r.doFetch,300).bind(y()(r)),r.doFetchRegistrations=r.doFetchRegistrations.bind(y()(r)),r.doFetchSavedEvents=r.doFetchSavedEvents.bind(y()(r)),r}return g()(n,[{key:\"componentDidMount\",value:function(){this.props.fetchAudiences({fields:P()({},z.TYPE_AUDIENCE,[\"name\"])}),this.doFetch(this.props.view)}},{key:\"doFetchRegistrations\",value:function(e){this.props.fetchRegistrations({filters:Y({user:{path:\"field_user.id\",value:G}},X(e,\"field_event.field_date_time.end_value\")),include:[\"field_event\",\"field_event.image_primary\",\"field_event.image_primary.field_media_image\",\"field_event.field_location\"],headers:{\"X-Consumer-ID\":c.a.consumer}})}},{key:\"doFetchSavedEvents\",value:function(e){this.props.fetchSavedEvents({filters:{user:{path:\"uid.uid\",value:G}},include:[\"flagged_entity\",\"flagged_entity.image_primary\",\"flagged_entity.image_primary.field_media_image\",\"flagged_entity.field_location\"],headers:{\"X-Consumer-ID\":c.a.consumer}})}},{key:\"doFetch\",value:function(e){this.props.showSaves&&this.doFetchSavedEvents(e),this.props.showRegistrations&&this.doFetchRegistrations(e)}},{key:\"doConfirmAction\",value:function(){this.setState({open:!0,text:\"Confirm cancel\"})}},{key:\"render\",value:function(){var e,t=this.props,n=this.handleViewChange,r=t.events,a=t.view,o=t.isLoading,s=r.length>0?i.a.createElement(N.a,{heading:null,items:(e=r,e.map((function(e){return{key:e.data.id,node:i.a.createElement(F.a,{id:e.data.id,className:\"event-teaser\"})}})))}):o?i.a.createElement(M.a,{loading:o}):i.a.createElement(\"p\",null,\"No events available.\");return i.a.createElement(\"div\",{className:\"l--main\"},i.a.createElement(\"div\",{className:\"l--subsection\"},i.a.createElement(V.a,{options:J,value:a,handleChange:n})),i.a.createElement(\"div\",{className:\"l--subsection\"},s))}}]),n}(r.Component);Z.propTypes={events:C.a.array,onChangeView:C.a.func.isRequired,fetchAudiences:C.a.func.isRequired,fetchRegistrations:C.a.func.isRequired,fetchSavedEvents:C.a.func.isRequired,view:C.a.string,showSaves:C.a.bool,showRegistrations:C.a.bool},Z.defaultProps={events:[],view:\"upcoming\",showSaves:!0,showRegistrations:!0};var H=d(Object(U.b)((function(e,t){var n=\"past\"===t.view?\"usersPastEvents\":\"usersUpcomingEvents\";return!1===t.showSaves&&(n=\"past\"===t.view?\"usersPastRegisteredEvents\":\"usersUpcomingRegisteredEvents\"),!1===t.showRegistrations&&(n=\"past\"===t.view?\"usersPastSavedEvents\":\"usersUpcomingSavedEvents\"),{events:W[n](G)(e),registrations:W.eventRegistrations(e),isLoading:W.recordsAreLoading(z.TYPE_EVENT_REGISTRATION)(e)||W.recordsAreLoading(z.TYPE_SAVED_EVENT)(e)}}),(function(e,t){return{fetchAudiences:function(t){e(Q[z.TYPE_AUDIENCE].fetchAll(t))},fetchRegistrations:function(t){e(Q[z.TYPE_EVENT_REGISTRATION].fetchAll(t))},fetchSavedEvents:function(t){e(Q[z.TYPE_SAVED_EVENT].fetchAll(t))}}}))(Z)),K=Object(o.a)(H);Object(a.render)(i.a.createElement(K,null),document.getElementById(\"eventRegistrationRoot\"))}});","extractedComments":[]}